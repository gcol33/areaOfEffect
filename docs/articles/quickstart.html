<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Quick Start • areaOfEffect</title>
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Quick Start">
</head>
<body>
<p>








  pkgdown/mathjax-config.html

  

  </p>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">areaOfEffect</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.5</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/quickstart.html">Get Started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/quickstart.html">Quick Start</a></li>
    <li><a class="dropdown-item" href="../articles/theory.html">Theory</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/gcol33/areaOfEffect" aria-label="GitHub"><span class="fa fab fa-github"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Quick Start</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/gcol33/areaOfEffect/blob/HEAD/vignettes/quickstart.Rmd" class="external-link"><code>vignettes/quickstart.Rmd</code></a></small>
      <div class="d-none name"><code>quickstart.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>The <code>areaOfEffect</code> package classifies spatial points by
their position relative to a region’s boundary—without requiring sf
expertise.</p>
<p><strong>Dataframe in → dataframe out.</strong></p>
<p>Points are classified as:</p>
<ul>
<li><p><strong>Core</strong>: inside the original support</p></li>
<li><p><strong>Halo</strong>: outside the original but inside the area
of effect</p></li>
<li><p><strong>Pruned</strong>: outside the AoE entirely
(removed)</p></li>
</ul>
<p>By default, halos are defined as <strong>equal area to the
core</strong>—a proportion-based definition that enables consistent
cross-region comparisons.</p>
</div>
<div class="section level2">
<h2 id="getting-started">Getting Started<a class="anchor" aria-label="anchor" href="#getting-started"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://gillescolling.com/areaOfEffect/" class="external-link">areaOfEffect</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="from-a-dataframe">From a Dataframe<a class="anchor" aria-label="anchor" href="#from-a-dataframe"></a>
</h3>
<p>The simplest usage: pass a dataframe with coordinates and a country
name.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Your occurrence data</span></span>
<span><span class="va">observations</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  species <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Oak"</span>, <span class="st">"Beech"</span>, <span class="st">"Pine"</span>, <span class="st">"Spruce"</span><span class="op">)</span>,</span>
<span>  lon <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">14.5</span>, <span class="fl">15.2</span>, <span class="fl">16.8</span>, <span class="fl">20.0</span><span class="op">)</span>,</span>
<span>  lat <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">47.5</span>, <span class="fl">48.1</span>, <span class="fl">47.2</span>, <span class="fl">48.5</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Classify relative to Austria</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe.html">aoe</a></span><span class="op">(</span><span class="va">observations</span>, <span class="st">"Austria"</span><span class="op">)</span></span>
<span><span class="va">result</span><span class="op">$</span><span class="va">aoe_class</span></span>
<span><span class="co">#&gt; [1] "core" "core" "halo"</span></span></code></pre></div>
<p>The package auto-detects coordinate columns (lon/lat, x/y,
longitude/latitude, etc.).</p>
</div>
<div class="section level3">
<h3 id="from-sf-objects">From sf Objects<a class="anchor" aria-label="anchor" href="#from-sf-objects"></a>
</h3>
<p>sf objects work directly:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe.html">aoe</a></span><span class="op">(</span><span class="va">pts_sf</span>, <span class="st">"AT"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="austria-example">Austria Example<a class="anchor" aria-label="anchor" href="#austria-example"></a>
</h2>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get Austria and transform to equal-area projection</span></span>
<span><span class="va">austria</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_country.html">get_country</a></span><span class="op">(</span><span class="st">"AT"</span><span class="op">)</span></span>
<span><span class="va">austria_ea</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_transform.html" class="external-link">st_transform</a></span><span class="op">(</span><span class="va">austria</span>, <span class="st">"ESRI:54009"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create a point inside Austria</span></span>
<span><span class="va">dummy_pt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_unary.html" class="external-link">st_centroid</a></span><span class="op">(</span><span class="va">austria_ea</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: st_centroid assumes attributes are constant over geometries</span></span>
<span></span>
<span><span class="co"># Run aoe() to get geometries (uses buffer method by default)</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe.html">aoe</a></span><span class="op">(</span><span class="va">dummy_pt</span>, <span class="va">austria_ea</span><span class="op">)</span></span>
<span><span class="va">geoms</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe_geometry.html">aoe_geometry</a></span><span class="op">(</span><span class="va">result</span>, <span class="st">"both"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Extract geometries</span></span>
<span><span class="va">austria_geom</span> <span class="op">&lt;-</span> <span class="va">geoms</span><span class="op">[</span><span class="va">geoms</span><span class="op">$</span><span class="va">type</span> <span class="op">==</span> <span class="st">"original"</span>, <span class="op">]</span></span>
<span><span class="va">aoe_geom</span> <span class="op">&lt;-</span> <span class="va">geoms</span><span class="op">[</span><span class="va">geoms</span><span class="op">$</span><span class="va">type</span> <span class="op">==</span> <span class="st">"aoe"</span>, <span class="op">]</span></span>
<span></span>
<span><span class="co"># Plot</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>, bty <span class="op">=</span> <span class="st">"n"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_geometry</a></span><span class="op">(</span><span class="va">aoe_geom</span><span class="op">)</span>, border <span class="op">=</span> <span class="st">"steelblue"</span>, lty <span class="op">=</span> <span class="fl">2</span>, lwd <span class="op">=</span> <span class="fl">1.5</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_geometry</a></span><span class="op">(</span><span class="va">austria_geom</span><span class="op">)</span>, border <span class="op">=</span> <span class="st">"black"</span>, lwd <span class="op">=</span> <span class="fl">2</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/legend.html" class="external-link">legend</a></span><span class="op">(</span><span class="st">"topright"</span>,</span>
<span>       legend <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Austria (core)"</span>, <span class="st">"Area of Effect"</span><span class="op">)</span>,</span>
<span>       col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"black"</span>, <span class="st">"steelblue"</span><span class="op">)</span>,</span>
<span>       lty <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>       lwd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">1.5</span><span class="op">)</span>,</span>
<span>       inset <span class="op">=</span> <span class="fl">0.02</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<div class="svg-container"><button type="button" class="btn btn-primary btn-copy-svg" title="Copy SVG to clipboard" aria-label="Copy SVG to clipboard" data-bs-toggle="tooltip" data-bs-placement="left"><i class="fa fa-copy"></i></button>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='576.00pt' height='432.00pt' viewBox='0 0 576.00 432.00' class="r-plt inline-svg" style="max-width:100%;width:100%;height:auto;">
<g class='svglite'>
<defs>
  <style type='text/css'><![CDATA[
    /* theme-aware-processed */
    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite circle {
      fill: none;
      stroke: #3E3F3A;
      stroke-linecap: round;
      stroke-linejoin: round;
      stroke-miterlimit: 10.00;
    }
    .svglite > g > rect {
      fill: none;
      stroke: #3E3F3A;
      stroke-linecap: round;
      stroke-linejoin: round;
      stroke-miterlimit: 10.00;
    }
    .svglite text {
      white-space: pre;
      fill: #3E3F3A;
    }
    .svglite g.glyphgroup path {
      fill: inherit;
      stroke: none;
    }
  ]]></style>
</defs>
<rect width='100%' height='100%' style='stroke: none; fill: #F5F6F8;'/>
<defs>
  <clipPath id='cpMC4wMHw1NzYuMDB8MC4wMHw0MzIuMDA='>
    <rect x='0.00' y='0.00' width='576.00' height='432.00' />
  </clipPath>
</defs>
<g clip-path='url(#cpMC4wMHw1NzYuMDB8MC4wMHw0MzIuMDA=)'>
</g>
<defs>
  <clipPath id='cpMTQuNDB8NTYxLjYwfDE0LjQwfDQxNy42MA=='>
    <rect x='14.40' y='14.40' width='547.20' height='403.20' />
  </clipPath>
</defs>
<g clip-path='url(#cpMTQuNDB8NTYxLjYwfDE0LjQwfDQxNy42MA==)'>
<rect class='legend-bg' x='14.40' y='14.40' width='547.20' height='403.20' style='stroke-width: 0.75; stroke: #F5F6F8; fill: #F5F6F8;' />
<path d='M 37.22 242.57 L 36.64 241.06 L 36.08 239.33 L 35.61 237.57 L 35.24 235.79 L 34.96 233.99 L 34.76 232.18 L 34.67 230.36 L 34.67 228.54 L 34.76 226.72 L 34.94 224.91 L 35.22 223.11 L 35.60 221.32 L 36.06 219.56 L 36.62 217.83 L 37.26 216.12 L 37.99 214.45 L 38.81 212.83 L 39.70 211.24 L 40.68 209.71 L 41.74 208.22 L 42.88 206.80 L 44.08 205.43 L 45.36 204.13 L 46.69 202.90 L 48.10 201.74 L 49.56 200.65 L 51.07 199.64 L 52.64 198.70 L 54.02 197.93 L 55.62 197.08 L 57.27 196.32 L 58.95 195.64 L 60.67 195.05 L 62.41 194.55 L 64.18 194.14 L 65.97 193.83 L 67.26 193.66 L 68.59 193.05 L 70.31 192.36 L 72.06 191.76 L 73.84 191.26 L 75.64 190.84 L 77.46 190.53 L 79.30 190.31 L 81.14 190.19 L 82.99 190.16 L 84.84 190.23 L 86.68 190.40 L 88.51 190.67 L 90.32 191.03 L 92.12 191.48 L 93.88 192.03 L 99.27 193.86 L 101.02 194.51 L 102.73 195.24 L 105.54 196.55 L 105.98 196.29 L 107.63 195.46 L 109.31 194.71 L 111.03 194.05 L 112.79 193.48 L 114.57 193.01 L 116.37 192.63 L 118.20 192.34 L 120.03 192.15 L 121.87 192.06 L 123.71 192.06 L 125.55 192.16 L 127.39 192.35 L 129.10 192.63 L 134.01 192.42 L 135.98 192.39 L 137.95 192.48 L 139.92 192.67 L 141.87 192.97 L 143.80 193.38 L 145.70 193.90 L 147.36 194.46 L 149.53 194.55 L 151.38 194.67 L 153.22 194.89 L 155.05 195.21 L 156.86 195.62 L 158.64 196.13 L 160.39 196.73 L 162.11 197.42 L 163.79 198.20 L 165.43 199.07 L 166.03 199.43 L 167.01 199.06 L 167.80 198.79 L 170.29 197.28 L 172.00 196.31 L 173.77 195.43 L 175.58 194.66 L 177.43 193.98 L 185.44 191.32 L 187.25 190.78 L 189.09 190.33 L 190.95 189.98 L 192.83 189.73 L 199.22 189.05 L 200.20 188.11 L 201.62 186.88 L 203.11 185.73 L 204.66 184.65 L 206.27 183.66 L 207.92 182.76 L 209.62 181.95 L 211.37 181.23 L 213.14 180.61 L 214.95 180.08 L 216.79 179.65 L 217.35 179.55 L 217.49 178.41 L 217.80 176.64 L 218.20 174.90 L 218.68 173.17 L 219.25 171.48 L 219.91 169.81 L 220.65 168.18 L 221.48 166.59 L 222.38 165.04 L 225.00 160.81 L 226.00 159.29 L 227.08 157.81 L 228.24 156.39 L 229.46 155.04 L 230.76 153.75 L 232.12 152.53 L 233.54 151.38 L 237.94 148.02 L 239.28 147.05 L 240.66 146.14 L 242.08 145.29 L 252.04 139.69 L 253.75 138.80 L 254.24 138.57 L 254.60 137.28 L 255.18 135.56 L 255.86 133.87 L 256.61 132.22 L 257.46 130.61 L 258.38 129.04 L 259.38 127.53 L 260.46 126.07 L 261.62 124.66 L 262.84 123.32 L 264.13 122.05 L 264.31 121.86 L 265.61 120.59 L 266.97 119.39 L 268.39 118.26 L 269.86 117.21 L 271.39 116.23 L 272.97 115.33 L 274.59 114.52 L 276.25 113.78 L 276.40 113.73 L 276.92 112.87 L 277.96 111.34 L 279.08 109.86 L 280.28 108.45 L 281.55 107.10 L 282.89 105.82 L 284.29 104.61 L 285.76 103.48 L 287.28 102.43 L 288.86 101.45 L 290.48 100.57 L 292.15 99.77 L 293.86 99.05 L 295.61 98.43 L 297.39 97.90 L 299.19 97.47 L 301.01 97.13 L 302.84 96.89 L 304.69 96.74 L 306.54 96.69 L 308.39 96.74 L 310.24 96.89 L 312.08 97.13 L 313.90 97.47 L 315.70 97.90 L 317.47 98.43 L 319.17 98.98 L 320.82 99.57 L 322.45 100.24 L 324.04 100.99 L 328.99 103.48 L 330.42 104.23 L 331.81 105.06 L 333.16 105.94 L 335.85 107.80 L 336.09 106.66 L 336.57 104.89 L 337.14 103.16 L 337.80 101.45 L 338.54 99.78 L 339.38 98.15 L 340.29 96.57 L 341.29 95.03 L 342.36 93.55 L 343.39 92.21 L 344.53 90.80 L 345.73 89.45 L 347.01 88.17 L 348.35 86.95 L 349.75 85.80 L 351.21 84.73 L 352.73 83.73 L 354.29 82.82 L 355.89 81.98 L 357.54 81.23 L 359.23 80.56 L 360.94 79.98 L 362.69 79.49 L 364.45 79.09 L 366.24 78.79 L 368.04 78.57 L 369.84 78.45 L 371.65 78.42 L 373.46 78.48 L 377.67 78.73 L 379.44 78.88 L 381.19 79.12 L 382.92 79.45 L 384.64 79.86 L 386.34 80.36 L 387.10 80.63 L 388.65 80.54 L 390.51 80.54 L 392.38 80.63 L 394.24 80.82 L 396.08 81.11 L 397.91 81.50 L 403.33 82.79 L 405.02 83.24 L 406.67 83.77 L 408.30 84.38 L 409.90 85.07 L 418.47 89.03 L 421.03 89.09 L 422.83 89.17 L 424.62 89.35 L 426.40 89.62 L 428.16 89.98 L 429.91 90.43 L 431.63 90.96 L 433.31 91.59 L 434.97 92.30 L 436.58 93.09 L 438.16 93.97 L 443.71 97.25 L 445.06 96.66 L 446.76 96.03 L 448.48 95.48 L 450.24 95.02 L 452.01 94.66 L 453.80 94.38 L 455.60 94.20 L 457.41 94.11 L 459.22 94.11 L 461.03 94.21 L 464.82 94.51 L 466.88 94.74 L 468.92 95.08 L 470.93 95.55 L 472.92 96.13 L 476.37 97.25 L 478.33 97.95 L 480.25 98.77 L 482.11 99.70 L 484.97 101.23 L 486.85 101.57 L 488.89 102.06 L 491.90 102.89 L 493.70 103.44 L 495.47 104.08 L 497.20 104.81 L 498.88 105.64 L 500.52 106.55 L 502.11 107.55 L 503.65 108.64 L 505.12 109.80 L 506.53 111.04 L 507.88 112.36 L 509.15 113.74 L 510.34 115.19 L 511.46 116.71 L 512.49 118.28 L 513.44 119.90 L 514.90 122.57 L 515.38 123.14 L 516.47 124.59 L 517.48 126.09 L 518.42 127.64 L 519.27 129.23 L 520.04 130.87 L 520.73 132.54 L 521.32 134.25 L 521.83 135.98 L 522.25 137.74 L 522.58 139.52 L 522.82 141.31 L 522.97 143.11 L 523.02 144.92 L 522.98 146.69 L 523.00 147.09 L 523.04 148.92 L 522.98 150.74 L 522.83 152.57 L 522.59 154.38 L 522.38 155.52 L 523.20 156.97 L 528.64 164.11 L 529.25 164.96 L 530.08 165.69 L 531.41 166.99 L 532.67 168.36 L 533.85 169.80 L 534.96 171.29 L 535.99 172.84 L 536.93 174.44 L 537.79 176.09 L 538.56 177.78 L 539.24 179.51 L 539.82 181.28 L 540.32 183.07 L 540.71 184.89 L 541.02 186.72 L 541.22 188.57 L 541.33 190.43 L 541.33 192.29 L 541.24 194.14 L 541.05 195.99 L 540.77 197.83 L 540.39 199.65 L 539.91 201.45 L 539.34 203.22 L 538.74 204.76 L 539.21 206.44 L 539.61 208.25 L 539.92 210.08 L 540.13 211.92 L 540.24 213.77 L 540.25 215.63 L 540.17 217.48 L 539.99 219.33 L 539.71 221.16 L 539.34 222.98 L 538.87 224.77 L 538.30 226.54 L 537.65 228.27 L 536.90 229.97 L 536.07 231.63 L 535.14 233.24 L 534.14 234.80 L 533.06 236.30 L 531.89 237.75 L 530.66 239.13 L 529.35 240.45 L 527.97 241.69 L 526.53 242.86 L 525.03 243.95 L 523.48 244.97 L 521.87 245.89 L 520.22 246.74 L 518.53 247.49 L 516.79 248.16 L 515.03 248.73 L 514.99 248.74 L 514.86 249.09 L 514.12 250.72 L 513.31 252.31 L 512.83 253.13 L 513.20 254.90 L 513.48 256.80 L 513.67 258.72 L 513.74 260.65 L 513.72 262.58 L 513.62 264.83 L 513.55 267.24 L 513.45 269.04 L 513.26 270.83 L 512.98 272.61 L 512.47 275.40 L 512.19 276.74 L 511.92 277.98 L 511.46 279.79 L 510.91 281.57 L 510.26 283.32 L 509.53 285.03 L 508.70 286.70 L 507.78 288.33 L 506.79 289.90 L 505.71 291.42 L 504.55 292.88 L 503.31 294.28 L 502.00 295.61 L 500.63 296.87 L 499.19 298.05 L 497.68 299.16 L 496.13 300.18 L 494.52 301.12 L 492.86 301.97 L 491.25 302.75 L 489.56 303.51 L 487.84 304.18 L 486.90 304.49 L 486.85 304.66 L 486.25 306.39 L 485.57 308.09 L 484.79 309.76 L 484.71 309.91 L 484.00 311.50 L 483.17 313.14 L 482.25 314.72 L 481.26 316.26 L 480.18 317.74 L 479.03 319.16 L 477.81 320.53 L 476.51 321.82 L 475.16 323.05 L 473.74 324.21 L 472.26 325.29 L 470.73 326.29 L 469.14 327.21 L 467.51 328.05 L 465.84 328.80 L 464.14 329.46 L 462.40 330.04 L 460.63 330.52 L 458.84 330.91 L 457.04 331.21 L 455.22 331.41 L 453.39 331.52 L 451.56 331.53 L 449.73 331.45 L 447.91 331.27 L 446.10 331.00 L 444.30 330.63 L 442.74 330.27 L 441.22 330.91 L 439.46 331.55 L 433.51 333.54 L 431.82 334.05 L 430.10 334.48 L 428.37 334.83 L 426.62 335.08 L 424.86 335.25 L 423.09 335.33 L 421.33 335.33 L 419.56 335.23 L 409.70 334.44 L 409.47 334.46 L 409.41 334.54 L 408.05 335.90 L 406.63 337.20 L 405.14 338.41 L 403.58 339.54 L 399.44 342.37 L 397.86 343.40 L 397.33 343.70 L 395.93 344.88 L 394.42 346.01 L 392.95 347.06 L 391.39 348.11 L 389.79 349.07 L 388.13 349.94 L 386.43 350.73 L 384.70 351.42 L 382.92 352.02 L 381.12 352.53 L 379.29 352.93 L 377.45 353.25 L 375.59 353.46 L 373.72 353.57 L 371.85 353.58 L 369.98 353.50 L 368.12 353.31 L 366.27 353.03 L 364.44 352.65 L 362.63 352.17 L 361.31 351.75 L 359.75 351.44 L 358.02 351.00 L 357.12 350.73 L 351.62 350.12 L 349.72 349.85 L 339.66 348.17 L 337.91 347.83 L 336.17 347.40 L 334.46 346.88 L 331.09 345.77 L 328.06 345.07 L 325.35 344.59 L 322.44 344.45 L 320.16 344.27 L 317.89 343.94 L 315.25 343.47 L 313.86 343.19 L 304.58 341.13 L 299.88 341.02 L 298.39 340.96 L 296.91 340.83 L 286.06 339.66 L 284.59 339.47 L 283.13 339.22 L 261.36 335.00 L 258.95 334.44 L 255.54 333.52 L 252.61 333.27 L 250.63 333.03 L 248.66 332.69 L 241.51 331.23 L 239.77 330.83 L 238.05 330.34 L 236.35 329.76 L 234.69 329.10 L 229.11 326.71 L 227.49 325.97 L 225.90 325.14 L 224.36 324.24 L 222.87 323.25 L 221.43 322.20 L 220.04 321.07 L 218.71 319.87 L 217.45 318.60 L 216.25 317.28 L 212.36 312.75 L 211.33 311.49 L 210.36 310.18 L 208.07 306.95 L 207.44 307.01 L 205.70 307.10 L 201.26 307.21 L 199.60 307.21 L 197.94 307.14 L 196.29 306.98 L 194.64 306.75 L 193.01 306.44 L 192.91 306.42 L 192.10 306.59 L 191.52 306.70 L 191.25 307.10 L 190.14 308.60 L 188.94 310.04 L 187.67 311.42 L 186.33 312.73 L 184.62 314.31 L 183.20 315.55 L 181.71 316.72 L 180.16 317.81 L 178.56 318.81 L 176.91 319.72 L 175.21 320.54 L 173.46 321.27 L 171.68 321.91 L 169.87 322.45 L 168.04 322.89 L 166.18 323.24 L 162.38 323.83 L 160.33 324.09 L 158.28 324.23 L 156.22 324.25 L 154.16 324.15 L 148.36 323.69 L 146.60 323.51 L 144.85 323.24 L 143.12 322.88 L 141.40 322.43 L 139.71 321.90 L 135.53 320.47 L 133.80 319.82 L 132.11 319.09 L 130.45 318.27 L 129.00 317.45 L 127.55 317.38 L 125.68 317.19 L 123.82 316.91 L 121.98 316.52 L 120.48 316.12 L 119.06 316.55 L 117.26 316.98 L 115.44 317.32 L 113.61 317.56 L 111.76 317.71 L 109.91 317.76 L 108.06 317.71 L 106.22 317.56 L 104.39 317.32 L 102.57 316.98 L 100.77 316.55 L 99.00 316.02 L 90.78 313.34 L 89.12 312.76 L 87.49 312.09 L 85.90 311.34 L 84.34 310.51 L 77.03 306.36 L 75.45 305.42 L 73.93 304.39 L 72.47 303.29 L 71.06 302.11 L 69.72 300.86 L 69.71 300.85 L 68.94 300.71 L 67.13 300.27 L 65.34 299.75 L 63.58 299.12 L 61.86 298.41 L 60.18 297.60 L 58.55 296.71 L 56.96 295.74 L 55.43 294.68 L 53.96 293.54 L 52.54 292.32 L 51.20 291.03 L 49.92 289.67 L 48.72 288.25 L 47.60 286.76 L 46.55 285.22 L 45.59 283.63 L 44.72 281.98 L 43.93 280.29 L 43.23 278.57 L 42.63 276.80 L 42.12 275.01 L 41.70 273.20 L 41.38 271.36 L 41.16 269.51 L 41.12 268.86 L 41.11 268.82 L 40.48 267.06 L 39.95 265.27 L 39.63 263.98 L 39.39 263.29 L 39.37 263.21 L 38.82 261.88 L 38.20 260.09 L 37.67 258.27 L 37.24 256.42 L 36.91 254.56 L 36.69 252.68 L 36.56 250.79 L 36.54 248.90 L 36.62 247.00 L 36.80 245.12 L 37.08 243.25 L 37.22 242.57 Z' style='fill-rule: evenodd; stroke-width: 1.12; stroke: #4682B4; stroke-dasharray: 6.00,6.00;' />
<path d='M 72.39 250.68 L 71.74 249.40 L 75.68 239.85 L 76.15 233.92 L 71.71 230.44 L 69.86 229.41 L 71.24 228.63 L 77.19 229.28 L 80.76 227.31 L 82.55 225.36 L 87.94 227.20 L 95.95 230.90 L 99.79 233.40 L 101.46 235.33 L 102.44 236.95 L 102.22 239.73 L 104.07 240.81 L 107.73 241.23 L 110.22 242.09 L 109.70 245.74 L 109.81 248.77 L 113.12 248.35 L 117.11 246.03 L 120.01 241.88 L 121.66 237.86 L 122.30 228.08 L 122.75 227.25 L 125.33 228.02 L 135.49 227.60 L 140.47 229.42 L 148.12 229.72 L 148.12 231.26 L 149.71 233.65 L 153.42 237.10 L 155.30 239.35 L 158.89 239.75 L 164.23 238.50 L 167.31 237.22 L 168.60 238.13 L 173.51 237.24 L 177.65 234.45 L 178.53 232.33 L 182.84 230.84 L 188.52 227.40 L 196.53 224.74 L 223.39 221.90 L 224.21 219.76 L 223.28 214.85 L 223.92 214.12 L 227.47 215.35 L 233.08 216.49 L 237.47 218.23 L 240.46 220.50 L 242.99 220.59 L 246.74 219.00 L 251.92 217.98 L 257.14 220.33 L 258.87 222.88 L 258.14 224.19 L 258.47 226.26 L 260.21 227.99 L 264.56 230.81 L 270.01 233.23 L 272.67 233.05 L 273.40 230.69 L 273.71 225.08 L 273.37 219.09 L 271.79 215.66 L 268.91 214.82 L 265.56 214.55 L 263.71 213.84 L 264.11 211.96 L 266.20 207.08 L 265.41 200.57 L 258.58 193.16 L 252.58 186.01 L 252.32 183.57 L 254.93 179.35 L 259.33 175.98 L 269.29 170.38 L 272.50 169.22 L 276.69 168.28 L 282.59 165.98 L 285.28 163.62 L 286.96 161.06 L 288.22 147.72 L 288.83 147.15 L 289.59 146.37 L 300.96 150.96 L 301.84 150.20 L 303.56 149.45 L 306.63 145.93 L 307.07 143.25 L 306.35 138.19 L 306.06 133.41 L 306.54 131.90 L 308.24 132.45 L 313.19 134.94 L 317.23 137.72 L 321.58 144.75 L 329.88 146.62 L 340.07 146.80 L 343.30 143.67 L 346.50 142.95 L 350.36 143.90 L 358.37 145.01 L 358.48 139.32 L 362.21 133.43 L 363.98 131.34 L 369.76 131.55 L 370.57 127.15 L 370.31 114.96 L 371.33 113.62 L 375.55 113.87 L 380.01 116.10 L 381.51 117.90 L 383.65 117.75 L 386.51 116.53 L 389.71 115.73 L 395.14 117.03 L 407.13 122.57 L 413.20 124.59 L 416.81 124.21 L 420.25 124.28 L 434.75 132.85 L 444.19 134.05 L 452.65 134.08 L 454.97 131.50 L 458.24 129.31 L 462.04 129.61 L 465.49 130.73 L 472.44 134.45 L 475.54 135.41 L 479.56 136.01 L 482.57 136.84 L 486.13 143.31 L 487.81 145.04 L 487.69 145.84 L 487.83 148.78 L 486.18 152.49 L 484.53 157.36 L 485.34 161.62 L 493.76 176.42 L 500.62 185.43 L 502.19 188.87 L 506.14 191.50 L 503.28 194.83 L 503.38 199.76 L 501.54 201.96 L 501.40 204.77 L 502.70 207.34 L 503.17 210.54 L 505.05 214.97 L 499.81 215.93 L 493.38 215.78 L 491.12 216.03 L 489.15 217.24 L 486.84 216.64 L 480.44 212.49 L 477.03 211.58 L 474.76 211.83 L 473.29 213.64 L 470.66 215.95 L 468.10 217.57 L 468.93 219.00 L 481.50 222.74 L 484.48 228.48 L 482.85 233.16 L 482.40 235.45 L 479.84 237.26 L 476.61 238.84 L 472.49 239.24 L 472.36 241.77 L 475.08 249.21 L 473.98 250.83 L 472.98 253.14 L 475.11 259.27 L 477.77 259.70 L 478.54 261.10 L 478.44 263.58 L 478.36 266.22 L 477.84 269.02 L 477.57 270.26 L 475.96 271.04 L 470.52 270.63 L 466.24 273.02 L 458.13 281.62 L 455.06 283.08 L 452.01 286.52 L 453.27 294.09 L 452.88 294.78 L 452.23 296.33 L 440.70 293.66 L 440.32 293.71 L 432.98 294.68 L 428.33 298.15 L 422.38 300.14 L 409.22 299.08 L 396.71 300.43 L 393.84 301.44 L 390.62 302.02 L 387.79 304.04 L 386.39 306.88 L 383.69 310.49 L 379.55 313.32 L 374.94 315.50 L 374.00 317.33 L 372.53 318.39 L 369.64 317.01 L 367.44 317.08 L 364.62 316.14 L 355.53 315.13 L 345.47 313.45 L 340.59 311.84 L 335.11 310.56 L 329.26 309.53 L 324.11 309.29 L 321.47 308.81 L 308.83 306.01 L 300.69 305.83 L 289.83 304.66 L 268.07 300.43 L 261.68 298.72 L 255.70 298.20 L 248.55 296.74 L 242.97 294.35 L 239.08 289.82 L 234.80 283.79 L 227.32 275.92 L 225.54 272.01 L 227.21 268.57 L 229.02 265.98 L 228.66 264.87 L 226.99 264.31 L 215.68 267.66 L 204.81 271.90 L 200.37 272.01 L 195.96 271.07 L 190.24 271.01 L 184.85 272.14 L 173.89 272.72 L 167.74 275.85 L 164.21 281.95 L 162.44 286.87 L 160.72 288.45 L 156.92 289.05 L 151.12 288.59 L 146.94 287.16 L 142.43 282.96 L 135.98 282.38 L 130.10 282.27 L 128.48 281.49 L 128.33 278.76 L 125.55 273.62 L 121.58 272.01 L 112.54 281.69 L 109.91 282.55 L 101.69 279.87 L 94.38 275.73 L 93.35 272.70 L 92.01 270.22 L 85.96 267.87 L 78.53 266.26 L 76.22 266.26 L 77.00 264.80 L 77.65 262.33 L 76.94 260.36 L 75.07 258.32 L 73.95 256.14 L 73.50 254.02 L 72.83 252.29 L 72.39 250.68 Z' style='fill-rule: evenodd; stroke-width: 1.50;' />
<rect class='legend-bg' x='429.62' y='22.46' width='121.04' height='43.20' style='stroke-width: 0.75; fill: #F5F6F8;' />
<line x1='440.42' y1='36.86' x2='462.02' y2='36.86' style='stroke-width: 1.50;' />
<line x1='440.42' y1='51.26' x2='462.02' y2='51.26' style='stroke-width: 1.12; stroke: #4682B4; stroke-dasharray: 6.00,6.00;' />
<text x='472.82' y='41.16' style='font-size: 12.00px; font-family: "Roboto", -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif;' textLength='72.02px' lengthAdjust='spacingAndGlyphs'>Austria (core)</text>
<text x='472.82' y='55.56' style='font-size: 12.00px; font-family: "Roboto", -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif;' textLength='72.44px' lengthAdjust='spacingAndGlyphs'>Area of Effect</text>
</g>
</g>
</svg></div><p class="caption">
Austria (dark) with its area of effect (blue dashed). The halo has equal
area to the core.
</p>
</div>
</div>
<div class="section level2">
<h2 id="basic-usage-with-custom-polygons">Basic Usage with Custom Polygons<a class="anchor" aria-label="anchor" href="#basic-usage-with-custom-polygons"></a>
</h2>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">support</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>  geometry <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html" class="external-link">st_sfc</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_polygon</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">100</span>, <span class="fl">100</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">100</span>, <span class="fl">100</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  crs <span class="op">=</span> <span class="fl">32631</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Create observation points:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pts</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">5</span>,</span>
<span>    value <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">20</span>, <span class="fl">15</span>, <span class="fl">25</span>, <span class="fl">30</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  geometry <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html" class="external-link">st_sfc</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">50</span>, <span class="fl">50</span><span class="op">)</span><span class="op">)</span>,   <span class="co"># center</span></span>
<span>    <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">10</span><span class="op">)</span><span class="op">)</span>,   <span class="co"># near corner</span></span>
<span>    <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">95</span>, <span class="fl">50</span><span class="op">)</span><span class="op">)</span>,   <span class="co"># near edge</span></span>
<span>    <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">120</span>, <span class="fl">50</span><span class="op">)</span><span class="op">)</span>,  <span class="co"># outside, in halo</span></span>
<span>    <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">250</span>, <span class="fl">250</span><span class="op">)</span><span class="op">)</span>  <span class="co"># far outside</span></span>
<span>  <span class="op">)</span>,</span>
<span>  crs <span class="op">=</span> <span class="fl">32631</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Apply the area of effect:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe.html">aoe</a></span><span class="op">(</span><span class="va">pts</span>, <span class="va">support</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">result</span><span class="op">)</span></span>
<span><span class="co">#&gt; Area of Effect Result</span></span>
<span><span class="co">#&gt; ─────────────────────</span></span>
<span><span class="co">#&gt; Points:   4 (3 core, 1 halo)</span></span>
<span><span class="co">#&gt; Supports: 1</span></span>
<span><span class="co">#&gt; Scale:    0.414 (multiplier 1.41, theoretical halo:core 1.00)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Simple feature collection with 4 features and 5 fields</span></span>
<span><span class="co">#&gt; Geometry type: POINT</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: 10 ymin: 10 xmax: 120 ymax: 50</span></span>
<span><span class="co">#&gt; Projected CRS: WGS 84 / UTM zone 31N</span></span>
<span><span class="co">#&gt;   point_id support_id aoe_class id value       geometry</span></span>
<span><span class="co">#&gt; 1        1          1      core  1    10  POINT (50 50)</span></span>
<span><span class="co">#&gt; 2        2          1      core  2    20  POINT (10 10)</span></span>
<span><span class="co">#&gt; 3        3          1      core  3    15  POINT (95 50)</span></span>
<span><span class="co">#&gt; 4        4          1      halo  4    25 POINT (120 50)</span></span></code></pre></div>
<p>The result contains only points inside the AoE, with their
classification:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">result</span><span class="op">$</span><span class="va">aoe_class</span></span>
<span><span class="co">#&gt; [1] "core" "core" "core" "halo"</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="multiple-supports">Multiple Supports<a class="anchor" aria-label="anchor" href="#multiple-supports"></a>
</h2>
<p>Process multiple regions at once:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Two adjacent regions</span></span>
<span><span class="va">supports</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>region <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  geometry <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html" class="external-link">st_sfc</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_polygon</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">50</span>, <span class="fl">50</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">100</span>, <span class="fl">100</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_polygon</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">50</span>, <span class="fl">100</span>, <span class="fl">100</span>, <span class="fl">50</span>, <span class="fl">50</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">100</span>, <span class="fl">100</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  crs <span class="op">=</span> <span class="fl">32631</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Points that may fall in overlapping AoEs</span></span>
<span><span class="va">pts_multi</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span>,</span>
<span>  geometry <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html" class="external-link">st_sfc</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">25</span>, <span class="fl">50</span><span class="op">)</span><span class="op">)</span>,   <span class="co"># inside A</span></span>
<span>    <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">50</span>, <span class="fl">50</span><span class="op">)</span><span class="op">)</span>,   <span class="co"># on boundary</span></span>
<span>    <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">75</span>, <span class="fl">50</span><span class="op">)</span><span class="op">)</span>    <span class="co"># inside B</span></span>
<span>  <span class="op">)</span>,</span>
<span>  crs <span class="op">=</span> <span class="fl">32631</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">result_multi</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe.html">aoe</a></span><span class="op">(</span><span class="va">pts_multi</span>, <span class="va">supports</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">result_multi</span><span class="op">)</span></span>
<span><span class="co">#&gt; Area of Effect Result</span></span>
<span><span class="co">#&gt; ─────────────────────</span></span>
<span><span class="co">#&gt; Points:   4 (4 core, 0 halo)</span></span>
<span><span class="co">#&gt; Supports: 2</span></span>
<span><span class="co">#&gt; Scale:    0.414 (multiplier 1.41, theoretical halo:core 1.00)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Simple feature collection with 4 features and 4 fields</span></span>
<span><span class="co">#&gt; Geometry type: POINT</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: 25 ymin: 50 xmax: 75 ymax: 50</span></span>
<span><span class="co">#&gt; Projected CRS: WGS 84 / UTM zone 31N</span></span>
<span><span class="co">#&gt;   point_id support_id aoe_class id      geometry</span></span>
<span><span class="co">#&gt; 1        1          1      core  1 POINT (25 50)</span></span>
<span><span class="co">#&gt; 2        2          1      core  2 POINT (50 50)</span></span>
<span><span class="co">#&gt; 3        2          2      core  2 POINT (50 50)</span></span>
<span><span class="co">#&gt; 4        3          2      core  3 POINT (75 50)</span></span></code></pre></div>
<p>Points can appear multiple times (once per support whose AoE contains
them).</p>
</div>
<div class="section level2">
<h2 id="using-a-mask-coastlines">Using a Mask (Coastlines)<a class="anchor" aria-label="anchor" href="#using-a-mask-coastlines"></a>
</h2>
<p>For coastal regions, sea is a hard boundary. Provide a mask to
constrain the AoE:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create a coastal support</span></span>
<span><span class="va">support_coast</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>  geometry <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html" class="external-link">st_sfc</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_polygon</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">40</span>, <span class="fl">80</span>, <span class="fl">80</span>, <span class="fl">40</span>, <span class="fl">40</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">20</span>, <span class="fl">20</span>, <span class="fl">60</span>, <span class="fl">60</span>, <span class="fl">20</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  crs <span class="op">=</span> <span class="fl">32631</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create land mask (irregular coastline)</span></span>
<span><span class="va">land_mask</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>  geometry <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html" class="external-link">st_sfc</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_polygon</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">100</span>, <span class="fl">100</span>, <span class="fl">70</span>, <span class="fl">50</span>, <span class="fl">30</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">50</span>, <span class="fl">60</span>, <span class="fl">55</span>, <span class="fl">70</span>, <span class="fl">60</span>, <span class="fl">0</span><span class="op">)</span></span>
<span>  <span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  crs <span class="op">=</span> <span class="fl">32631</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create sea area (inverse of land for visualization)</span></span>
<span><span class="va">sea_area</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span></span>
<span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span> geometry <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html" class="external-link">st_sfc</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_polygon</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span></span>
<span>   <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">20</span>, <span class="fl">120</span>, <span class="fl">120</span>, <span class="op">-</span><span class="fl">20</span>, <span class="op">-</span><span class="fl">20</span><span class="op">)</span>,</span>
<span>   <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">20</span>, <span class="op">-</span><span class="fl">20</span>, <span class="fl">100</span>, <span class="fl">100</span>, <span class="op">-</span><span class="fl">20</span><span class="op">)</span></span>
<span> <span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span> crs <span class="op">=</span> <span class="fl">32631</span></span>
<span><span class="op">)</span></span>
<span><span class="va">sea_area</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_binary_ops.html" class="external-link">st_difference</a></span><span class="op">(</span><span class="va">sea_area</span>, <span class="va">land_mask</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: attribute variables are assumed to be spatially constant throughout</span></span>
<span><span class="co">#&gt; all geometries</span></span>
<span></span>
<span><span class="co"># Create some points</span></span>
<span><span class="va">pts_coast</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">4</span>, class <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"core"</span>, <span class="st">"core"</span>, <span class="st">"halo"</span>, <span class="st">"pruned"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  geometry <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html" class="external-link">st_sfc</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">60</span>, <span class="fl">40</span><span class="op">)</span><span class="op">)</span>,  <span class="co"># core</span></span>
<span>    <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">50</span>, <span class="fl">30</span><span class="op">)</span><span class="op">)</span>,  <span class="co"># core</span></span>
<span>    <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">30</span>, <span class="fl">40</span><span class="op">)</span><span class="op">)</span>,  <span class="co"># halo (on land)</span></span>
<span>    <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">90</span>, <span class="fl">70</span><span class="op">)</span><span class="op">)</span>   <span class="co"># would be halo but in sea</span></span>
<span>  <span class="op">)</span>,</span>
<span>  crs <span class="op">=</span> <span class="fl">32631</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Apply with mask</span></span>
<span><span class="va">result_coast</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe.html">aoe</a></span><span class="op">(</span><span class="va">pts_coast</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, <span class="op">]</span>, <span class="va">support_coast</span>, mask <span class="op">=</span> <span class="va">land_mask</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get geometries for visualization</span></span>
<span><span class="va">aoe_masked</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe_geometry.html">aoe_geometry</a></span><span class="op">(</span><span class="va">result_coast</span>, <span class="st">"aoe"</span><span class="op">)</span></span>
<span><span class="va">support_geom</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe_geometry.html">aoe_geometry</a></span><span class="op">(</span><span class="va">result_coast</span>, <span class="st">"original"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Prepare point data for plotting</span></span>
<span><span class="va">result_coast</span><span class="op">$</span><span class="va">class</span> <span class="op">&lt;-</span> <span class="va">result_coast</span><span class="op">$</span><span class="va">aoe_class</span></span>
<span><span class="va">pruned_pt</span> <span class="op">&lt;-</span> <span class="va">pts_coast</span><span class="op">[</span><span class="fl">4</span>, <span class="op">]</span></span>
<span></span>
<span><span class="co"># Plot with ggplot2</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">sea_area</span>, fill <span class="op">=</span> <span class="va">aoe_colors</span><span class="op">$</span><span class="va">sea</span>, color <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">land_mask</span>, fill <span class="op">=</span> <span class="va">aoe_colors</span><span class="op">$</span><span class="va">land</span>, color <span class="op">=</span> <span class="va">aoe_colors</span><span class="op">$</span><span class="va">mask</span>, linewidth <span class="op">=</span> <span class="fl">0.8</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">aoe_masked</span>, fill <span class="op">=</span> <span class="va">aoe_colors</span><span class="op">$</span><span class="va">aoe_fill</span>, color <span class="op">=</span> <span class="va">aoe_colors</span><span class="op">$</span><span class="va">aoe_border</span>,</span>
<span>          linetype <span class="op">=</span> <span class="st">"dashed"</span>, linewidth <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">support_geom</span>, fill <span class="op">=</span> <span class="cn">NA</span>, color <span class="op">=</span> <span class="va">aoe_colors</span><span class="op">$</span><span class="va">support</span>, linewidth <span class="op">=</span> <span class="fl">1.2</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">result_coast</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="va">class</span><span class="op">)</span>, size <span class="op">=</span> <span class="fl">4</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">pruned_pt</span>, color <span class="op">=</span> <span class="va">aoe_colors</span><span class="op">$</span><span class="va">point_pruned</span>, shape <span class="op">=</span> <span class="fl">4</span>, size <span class="op">=</span> <span class="fl">4</span>, stroke <span class="op">=</span> <span class="fl">1.5</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_color_manual</a></span><span class="op">(</span></span>
<span>    values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"core"</span> <span class="op">=</span> <span class="va">aoe_colors</span><span class="op">$</span><span class="va">point_core</span>, <span class="st">"halo"</span> <span class="op">=</span> <span class="va">aoe_colors</span><span class="op">$</span><span class="va">point_halo</span><span class="op">)</span>,</span>
<span>    labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Core"</span>, <span class="st">"Halo"</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/annotate.html" class="external-link">annotate</a></span><span class="op">(</span><span class="st">"text"</span>, x <span class="op">=</span> <span class="fl">90</span>, y <span class="op">=</span> <span class="fl">80</span>, label <span class="op">=</span> <span class="st">"SEA"</span>, color <span class="op">=</span> <span class="st">"black"</span>,</span>
<span>           fontface <span class="op">=</span> <span class="st">"bold"</span>, size <span class="op">=</span> <span class="fl">5</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">coord_sf</a></span><span class="op">(</span>xlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">10</span>, <span class="fl">110</span><span class="op">)</span>, ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">10</span>, <span class="fl">90</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"Class"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_aoe</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<div class="svg-container"><button type="button" class="btn btn-primary btn-copy-svg" title="Copy SVG to clipboard" aria-label="Copy SVG to clipboard" data-bs-toggle="tooltip" data-bs-placement="left"><i class="fa fa-copy"></i></button>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='576.00pt' height='432.00pt' viewBox='0 0 576.00 432.00' class="r-plt inline-svg" style="max-width:100%;width:100%;height:auto;">
<g class='svglite'>
<defs>
  <style type='text/css'><![CDATA[
    /* theme-aware-processed */
    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite circle {
      fill: none;
      stroke: #3E3F3A;
      stroke-linecap: round;
      stroke-linejoin: round;
      stroke-miterlimit: 10.00;
    }
    .svglite > g > rect {
      fill: none;
      stroke: #3E3F3A;
      stroke-linecap: round;
      stroke-linejoin: round;
      stroke-miterlimit: 10.00;
    }
    .svglite text {
      white-space: pre;
      fill: #3E3F3A;
    }
    .svglite g.glyphgroup path {
      fill: inherit;
      stroke: none;
    }
  ]]></style>
</defs>
<rect width='100%' height='100%' style='stroke: none; fill: #F5F6F8;'/>
<defs>
  <clipPath id='cpMC4wMHw1NzYuMDB8MC4wMHw0MzIuMDA='>
    <rect x='0.00' y='0.00' width='576.00' height='432.00' />
  </clipPath>
</defs>
<g clip-path='url(#cpMC4wMHw1NzYuMDB8MC4wMHw0MzIuMDA=)'>
</g>
<defs>
  <clipPath id='cpNC40MXw1NzEuNTl8MC4wMHw0MzIuMDA='>
    <rect x='4.41' y='0.00' width='567.19' height='432.00' />
  </clipPath>
</defs>
<g clip-path='url(#cpNC40MXw1NzEuNTl8MC4wMHw0MzIuMDA=)'>
<rect x='4.41' y='0.00' width='567.19' height='432.00' style='stroke-width: 0.00; stroke: none;' /> fill: #F5F6F8;' />
</g>
<g clip-path='url(#cpMC4wMHw1NzYuMDB8MC4wMHw0MzIuMDA=)'>
</g>
<defs>
  <clipPath id='cpMTQuMzd8NTA4Ljg2fDkuOTZ8NDIyLjA0'>
    <rect x='14.37' y='9.96' width='494.49' height='412.07' />
  </clipPath>
</defs>
<g clip-path='url(#cpMTQuMzd8NTA4Ljg2fDkuOTZ8NDIyLjA0)'>
<rect x='14.37' y='9.96' width='494.49' height='412.07' style='stroke-width: 0.00; stroke: none;' /> fill: #F5F6F8;' />
<path d='M -0.61 -8.77 L 523.84 -8.77 L 523.84 440.77 L -0.61 440.77 L -0.61 -8.77 ZM 448.92 365.85 L 448.92 178.54 L 336.54 141.08 L 261.61 159.81 L 186.69 103.62 L 74.31 141.08 L 74.31 365.85 L 448.92 365.85 Z' style='fill-rule: evenodd; fill: #BEE3F8; stroke-width: 0.47; stroke: none; stroke-linecap: butt;' />
<path d='M 74.31 365.85 L 448.92 365.85 L 448.92 178.54 L 336.54 141.08 L 261.61 159.81 L 186.69 103.62 L 74.31 141.08 L 74.31 365.85 Z' style='fill-rule: evenodd; fill: #E2E8F0; stroke-width: 1.71; stroke: #A0AEC0; stroke-linecap: butt;' />
<path d='M 222.47 322.95 L 220.80 322.82 L 219.14 322.60 L 217.49 322.29 L 215.85 321.90 L 214.24 321.43 L 212.66 320.86 L 211.11 320.22 L 209.59 319.50 L 208.12 318.70 L 206.69 317.82 L 205.30 316.87 L 203.97 315.85 L 202.69 314.76 L 201.47 313.60 L 200.32 312.38 L 199.23 311.11 L 198.21 309.77 L 197.26 308.39 L 196.38 306.96 L 195.58 305.48 L 194.85 303.97 L 194.21 302.42 L 193.65 300.83 L 193.17 299.22 L 192.78 297.59 L 192.48 295.94 L 192.26 294.28 L 192.12 292.60 L 192.08 290.92 L 192.08 141.08 L 192.12 139.40 L 192.26 137.72 L 192.48 136.06 L 192.78 134.41 L 193.17 132.78 L 193.65 131.17 L 194.21 129.58 L 194.85 128.03 L 195.58 126.52 L 196.38 125.04 L 197.26 123.61 L 198.21 122.23 L 199.23 120.89 L 200.32 119.62 L 201.47 118.40 L 202.69 117.24 L 203.71 116.38 L 261.61 159.81 L 336.54 141.08 L 406.07 164.26 L 406.07 290.92 L 406.03 292.60 L 405.90 294.28 L 405.68 295.94 L 405.37 297.59 L 404.98 299.22 L 404.50 300.83 L 403.94 302.42 L 403.30 303.97 L 402.58 305.48 L 401.77 306.96 L 400.90 308.39 L 399.95 309.77 L 398.92 311.11 L 397.83 312.38 L 396.68 313.60 L 395.46 314.76 L 394.18 315.85 L 392.85 316.87 L 391.47 317.82 L 390.03 318.70 L 388.56 319.50 L 387.04 320.22 L 385.49 320.86 L 383.91 321.43 L 382.30 321.90 L 380.67 322.29 L 379.02 322.60 L 377.35 322.82 L 375.68 322.95 L 374.00 323.00 L 224.15 323.00 L 222.47 322.95 Z' style='fill-rule: evenodd; fill: #5A7BA6; fill-opacity: 0.063; stroke-width: 2.13; stroke: #5A7BA6; stroke-dasharray: 11.38,11.38; stroke-linecap: butt;' />
<path d='M 224.15 290.92 L 224.15 141.08 L 374.00 141.08 L 374.00 290.92 L 224.15 290.92 Z' style='fill-rule: evenodd; stroke-width: 2.56; stroke: #2D3748; stroke-linecap: butt;' />
<circle cx='299.08' cy='216.00' r='4.62' style='stroke-width: 0.71; stroke: #2B6CB0; stroke-linecap: butt; fill: #2B6CB0;' />
<circle cx='261.61' cy='253.46' r='4.62' style='stroke-width: 0.71; stroke: #2B6CB0; stroke-linecap: butt; fill: #2B6CB0;' />
<line x1='406.13' y1='108.95' x2='416.79' y2='98.29' style='stroke-width: 2.13; stroke: #A0AEC0; stroke-linecap: butt;' />
<line x1='406.13' y1='98.29' x2='416.79' y2='108.95' style='stroke-width: 2.13; stroke: #A0AEC0; stroke-linecap: butt;' />
<text x='411.46' y='71.25' text-anchor='middle' style='font-size: 14.23px; font-weight: bold; font-family: "Roboto", -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif;' textLength='29.23px' lengthAdjust='spacingAndGlyphs'>SEA</text>
</g>
<g clip-path='url(#cpMC4wMHw1NzYuMDB8MC4wMHw0MzIuMDA=)'>
<rect x='514.53' y='198.81' width='47.10' height='34.37' style='stroke-width: 0.00; stroke: none;' /> fill: #F5F6F8;' />
<text x='514.53' y='208.67' style='font-size: 12.00px; font-weight: bold;fill: #2D3748; font-family: "Roboto", -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif;' textLength='32.02px' lengthAdjust='spacingAndGlyphs'>Class</text>
<rect x='514.53' y='215.91' width='17.28' height='17.28' style='stroke-width: 0.00; stroke: none;' /> fill: #F5F6F8;' />
<circle cx='523.17' cy='224.55' r='4.62' style='stroke-width: 0.71; stroke: #2B6CB0; fill: #2B6CB0;' />
<text x='537.79' y='228.49' style='font-size: 11.00px;fill: #2D3748; font-family: "Roboto", -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif;' textLength='23.84px' lengthAdjust='spacingAndGlyphs'>Core</text>
</g>
</g>
</svg></div><p class="caption">
AoE with land mask. The AoE is clipped to the land boundary.
</p>
</div>
<div class="section level3">
<h3 id="real-world-example-portugal">Real-World Example: Portugal<a class="anchor" aria-label="anchor" href="#real-world-example-portugal"></a>
</h3>
<p>The package includes bundled country boundaries and a global land
mask. Use <code>mask = "land"</code> to clip AoE to coastlines:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create a point inside Portugal (approximate center of mainland)</span></span>
<span><span class="va">dummy</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>  geometry <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html" class="external-link">st_sfc</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">8</span>, <span class="fl">39.5</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  crs <span class="op">=</span> <span class="fl">4326</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Without mask</span></span>
<span><span class="va">result_no_mask</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe.html">aoe</a></span><span class="op">(</span><span class="va">dummy</span>, <span class="st">"PT"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Using largest polygon (96.8% of total area); 8 smaller polygon(s) dropped. Set largest_polygon = FALSE to include all.</span></span>
<span><span class="va">aoe_no_mask</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe_geometry.html">aoe_geometry</a></span><span class="op">(</span><span class="va">result_no_mask</span>, <span class="st">"aoe"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># With mask + area=1 for equal land area</span></span>
<span><span class="va">result_masked</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe.html">aoe</a></span><span class="op">(</span><span class="va">dummy</span>, <span class="st">"PT"</span>, mask <span class="op">=</span> <span class="st">"land"</span>, area <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">#&gt; Using largest polygon (96.8% of total area); 8 smaller polygon(s) dropped. Set largest_polygon = FALSE to include all.</span></span>
<span><span class="va">aoe_masked</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe_geometry.html">aoe_geometry</a></span><span class="op">(</span><span class="va">result_masked</span>, <span class="st">"aoe"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get support geometry</span></span>
<span><span class="va">support_geom</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe_geometry.html">aoe_geometry</a></span><span class="op">(</span><span class="va">result_masked</span>, <span class="st">"original"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Transform to equal area for plotting</span></span>
<span><span class="va">crs_ea</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_crs.html" class="external-link">st_crs</a></span><span class="op">(</span><span class="st">"+proj=laea +lat_0=39.5 +lon_0=-8 +datum=WGS84"</span><span class="op">)</span></span>
<span><span class="va">aoe_no_mask_ea</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_transform.html" class="external-link">st_transform</a></span><span class="op">(</span><span class="va">aoe_no_mask</span>, <span class="va">crs_ea</span><span class="op">)</span></span>
<span><span class="va">aoe_masked_ea</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_transform.html" class="external-link">st_transform</a></span><span class="op">(</span><span class="va">aoe_masked</span>, <span class="va">crs_ea</span><span class="op">)</span></span>
<span><span class="va">support_ea</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_transform.html" class="external-link">st_transform</a></span><span class="op">(</span><span class="va">support_geom</span>, <span class="va">crs_ea</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Plot with padding to avoid clipping</span></span>
<span><span class="va">bbox</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_bbox.html" class="external-link">st_bbox</a></span><span class="op">(</span><span class="va">aoe_no_mask_ea</span><span class="op">)</span></span>
<span><span class="va">pad</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="va">bbox</span><span class="op">[</span><span class="fl">4</span><span class="op">]</span> <span class="op">-</span> <span class="va">bbox</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">)</span> <span class="op">*</span> <span class="fl">0.05</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>, bty <span class="op">=</span> <span class="st">"n"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_geometry</a></span><span class="op">(</span><span class="va">aoe_no_mask_ea</span><span class="op">)</span>, border <span class="op">=</span> <span class="st">"gray50"</span>, lty <span class="op">=</span> <span class="fl">2</span>, lwd <span class="op">=</span> <span class="fl">1.5</span>,</span>
<span>     xlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">bbox</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">-</span> <span class="va">pad</span>, <span class="va">bbox</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span> <span class="op">+</span> <span class="va">pad</span><span class="op">)</span>,</span>
<span>     ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">bbox</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span> <span class="op">-</span> <span class="va">pad</span>, <span class="va">bbox</span><span class="op">[</span><span class="fl">4</span><span class="op">]</span> <span class="op">+</span> <span class="va">pad</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_geometry</a></span><span class="op">(</span><span class="va">aoe_masked_ea</span><span class="op">)</span>, col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grDevices/rgb.html" class="external-link">rgb</a></span><span class="op">(</span><span class="fl">0.3</span>, <span class="fl">0.5</span>, <span class="fl">0.7</span>, <span class="fl">0.3</span><span class="op">)</span>,</span>
<span>     border <span class="op">=</span> <span class="st">"steelblue"</span>, lty <span class="op">=</span> <span class="fl">2</span>, lwd <span class="op">=</span> <span class="fl">1.5</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_geometry</a></span><span class="op">(</span><span class="va">support_ea</span><span class="op">)</span>, border <span class="op">=</span> <span class="st">"black"</span>, lwd <span class="op">=</span> <span class="fl">2</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/legend.html" class="external-link">legend</a></span><span class="op">(</span><span class="st">"topright"</span>,</span>
<span>       legend <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Portugal"</span>, <span class="st">"AoE (unmasked)"</span>, <span class="st">"AoE (land only)"</span><span class="op">)</span>,</span>
<span>       col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"black"</span>, <span class="st">"gray50"</span>, <span class="st">"steelblue"</span><span class="op">)</span>,</span>
<span>       lty <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>       lwd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">1.5</span>, <span class="fl">1.5</span><span class="op">)</span>,</span>
<span>       bty <span class="op">=</span> <span class="st">"n"</span>,</span>
<span>       inset <span class="op">=</span> <span class="fl">0.05</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<div class="svg-container"><button type="button" class="btn btn-primary btn-copy-svg" title="Copy SVG to clipboard" aria-label="Copy SVG to clipboard" data-bs-toggle="tooltip" data-bs-placement="left"><i class="fa fa-copy"></i></button>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='576.00pt' height='432.00pt' viewBox='0 0 576.00 432.00' class="r-plt inline-svg" style="max-width:100%;width:100%;height:auto;">
<g class='svglite'>
<defs>
  <style type='text/css'><![CDATA[
    /* theme-aware-processed */
    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite circle {
      fill: none;
      stroke: #3E3F3A;
      stroke-linecap: round;
      stroke-linejoin: round;
      stroke-miterlimit: 10.00;
    }
    .svglite > g > rect {
      fill: none;
      stroke: #3E3F3A;
      stroke-linecap: round;
      stroke-linejoin: round;
      stroke-miterlimit: 10.00;
    }
    .svglite text {
      white-space: pre;
      fill: #3E3F3A;
    }
    .svglite g.glyphgroup path {
      fill: inherit;
      stroke: none;
    }
  ]]></style>
</defs>
<rect width='100%' height='100%' style='stroke: none; fill: #F5F6F8;'/>
<defs>
  <clipPath id='cpMC4wMHw1NzYuMDB8MC4wMHw0MzIuMDA='>
    <rect x='0.00' y='0.00' width='576.00' height='432.00' />
  </clipPath>
</defs>
<g clip-path='url(#cpMC4wMHw1NzYuMDB8MC4wMHw0MzIuMDA=)'>
</g>
<defs>
  <clipPath id='cpMTQuNDB8NTYxLjYwfDE0LjQwfDQxNy42MA=='>
    <rect x='14.40' y='14.40' width='547.20' height='403.20' />
  </clipPath>
</defs>
<g clip-path='url(#cpMTQuNDB8NTYxLjYwfDE0LjQwfDQxNy42MA==)'>
<rect class='legend-bg' x='14.40' y='14.40' width='547.20' height='403.20' style='stroke-width: 0.75; stroke: #F5F6F8; fill: #F5F6F8;' />
<path d='M 370.79 127.02 L 371.69 126.94 L 373.48 126.78 L 373.43 124.52 L 375.22 124.36 L 375.16 122.10 L 376.95 121.94 L 376.89 119.68 L 378.68 119.52 L 378.62 117.27 L 380.41 117.10 L 380.35 114.85 L 380.32 113.73 L 381.21 113.65 L 381.18 112.52 L 382.07 112.44 L 381.95 107.95 L 381.89 105.70 L 383.66 105.54 L 383.60 103.29 L 383.54 101.05 L 381.77 101.22 L 381.71 98.98 L 381.65 96.74 L 380.76 96.82 L 380.73 95.70 L 380.70 94.58 L 380.26 94.62 L 380.24 94.06 L 379.80 94.10 L 379.75 92.43 L 379.69 90.20 L 378.37 90.32 L 378.35 89.76 L 377.91 89.80 L 377.81 85.90 L 376.04 86.06 L 375.98 83.83 L 374.21 84.00 L 374.15 81.77 L 372.38 81.93 L 372.33 79.71 L 370.55 79.87 L 369.00 80.01 L 369.00 79.74 L 368.78 79.76 L 368.73 77.81 L 366.96 77.97 L 366.90 75.75 L 365.13 75.92 L 365.08 73.70 L 365.03 71.48 L 363.26 71.64 L 363.21 69.43 L 361.88 69.55 L 361.87 69.00 L 361.42 69.04 L 361.39 67.37 L 360.50 67.46 L 360.48 66.35 L 359.59 66.43 L 359.57 65.33 L 358.24 65.45 L 358.23 64.90 L 357.78 64.94 L 357.75 63.28 L 355.97 63.44 L 355.93 61.23 L 353.27 61.48 L 353.25 60.38 L 352.36 60.46 L 352.34 59.36 L 350.56 59.52 L 349.67 59.60 L 349.65 58.50 L 348.76 58.58 L 348.74 57.48 L 343.41 57.98 L 343.37 55.77 L 341.59 55.94 L 339.81 56.11 L 338.03 56.27 L 336.24 56.44 L 334.46 56.61 L 332.67 56.77 L 332.64 54.57 L 330.86 54.74 L 327.28 55.07 L 323.70 55.41 L 320.11 55.74 L 318.31 55.91 L 318.29 53.71 L 316.49 53.88 L 314.70 54.05 L 314.71 55.15 L 313.81 55.23 L 313.82 56.34 L 312.92 56.42 L 309.31 56.76 L 307.51 56.93 L 307.52 58.03 L 306.61 58.11 L 305.71 58.20 L 305.72 59.03 L 305.49 59.05 L 305.49 59.32 L 303.91 59.47 L 302.10 59.64 L 300.29 59.81 L 298.48 59.98 L 296.67 60.15 L 294.85 60.32 L 294.85 58.12 L 293.48 58.25 L 293.48 57.70 L 293.03 57.74 L 293.02 56.09 L 292.12 56.17 L 292.11 55.07 L 291.21 55.16 L 291.20 54.06 L 290.30 54.14 L 290.30 53.04 L 289.39 53.13 L 289.39 52.03 L 287.57 52.20 L 287.57 50.00 L 284.85 50.26 L 284.84 49.16 L 283.94 49.25 L 283.94 48.15 L 282.12 48.32 L 280.30 48.50 L 280.30 46.30 L 276.67 46.65 L 262.07 48.03 L 258.41 48.38 L 258.39 50.30 L 258.17 50.32 L 258.16 50.59 L 256.56 50.75 L 254.72 50.92 L 252.89 51.10 L 251.05 51.27 L 249.21 51.44 L 249.20 52.54 L 248.28 52.63 L 248.27 53.73 L 247.35 53.81 L 243.66 54.16 L 243.64 56.36 L 241.79 56.54 L 239.95 56.71 L 239.93 58.36 L 239.46 58.40 L 239.46 58.95 L 236.22 59.26 L 236.19 61.46 L 234.34 61.64 L 234.32 63.29 L 233.85 63.33 L 233.84 63.88 L 232.45 64.01 L 232.44 65.11 L 231.51 65.20 L 231.49 66.30 L 230.56 66.39 L 230.55 67.49 L 229.62 67.58 L 229.60 68.68 L 228.67 68.77 L 228.66 69.87 L 227.73 69.96 L 227.71 71.07 L 226.78 71.15 L 226.75 72.81 L 226.29 72.85 L 226.28 73.41 L 224.88 73.54 L 224.85 75.61 L 224.73 75.62 L 224.73 75.76 L 222.98 75.92 L 222.94 78.13 L 222.92 79.24 L 221.99 79.33 L 221.97 80.43 L 221.03 80.52 L 221.00 82.74 L 220.92 87.17 L 220.89 89.39 L 219.01 89.56 L 218.97 91.78 L 218.93 94.01 L 220.81 93.83 L 220.77 96.05 L 220.70 100.50 L 221.64 100.42 L 221.62 101.53 L 222.56 101.44 L 222.54 102.56 L 222.51 104.79 L 222.47 107.02 L 224.24 106.85 L 224.24 106.99 L 224.35 106.98 L 224.25 113.55 L 224.18 118.02 L 226.07 117.85 L 226.03 120.09 L 226.00 122.33 L 225.97 124.58 L 225.93 126.82 L 227.82 126.65 L 227.76 131.14 L 229.41 130.99 L 229.41 131.27 L 229.65 131.25 L 229.62 133.22 L 229.59 135.47 L 229.56 137.16 L 229.09 137.21 L 229.08 137.77 L 227.66 137.90 L 227.63 140.16 L 227.56 144.67 L 227.53 146.79 L 227.41 146.80 L 227.41 146.94 L 225.63 147.11 L 225.59 149.37 L 225.56 151.63 L 223.66 151.81 L 223.62 154.07 L 223.55 158.61 L 223.52 160.88 L 221.61 161.05 L 221.57 163.32 L 221.53 165.59 L 221.50 167.87 L 221.46 170.14 L 219.55 170.32 L 219.51 172.59 L 219.43 177.15 L 219.36 181.72 L 219.29 185.72 L 218.81 185.76 L 218.80 186.33 L 217.36 186.46 L 217.32 188.75 L 217.30 189.90 L 216.34 189.98 L 216.32 191.13 L 215.35 191.22 L 215.29 194.65 L 214.33 194.74 L 214.31 195.89 L 213.34 195.97 L 213.30 198.27 L 213.27 199.99 L 212.79 200.03 L 212.78 200.61 L 211.32 200.74 L 211.25 204.76 L 210.77 204.80 L 210.76 205.38 L 207.36 205.68 L 207.32 207.98 L 205.37 208.15 L 205.33 210.46 L 203.38 210.63 L 203.34 212.93 L 201.39 213.11 L 201.34 215.41 L 199.39 215.59 L 199.29 220.20 L 197.34 220.37 L 197.29 222.68 L 197.24 224.99 L 197.19 227.30 L 197.14 229.62 L 197.09 231.93 L 197.04 234.25 L 195.08 234.42 L 194.98 239.06 L 194.88 243.70 L 194.80 247.18 L 193.82 247.27 L 193.79 248.43 L 192.81 248.52 L 192.75 250.85 L 192.70 253.17 L 192.65 255.50 L 192.60 257.83 L 192.55 260.16 L 192.49 262.50 L 192.44 264.83 L 192.39 267.17 L 192.34 269.51 L 194.07 269.36 L 194.06 269.65 L 194.31 269.63 L 194.27 271.67 L 194.22 274.01 L 195.95 273.86 L 195.94 274.16 L 196.19 274.13 L 196.15 276.18 L 197.14 276.10 L 197.11 277.27 L 198.10 277.18 L 198.08 278.36 L 199.07 278.27 L 199.05 279.44 L 200.04 279.36 L 200.01 280.53 L 201.00 280.44 L 200.98 281.62 L 201.97 281.53 L 201.95 282.70 L 203.93 282.53 L 203.88 284.88 L 203.84 287.23 L 205.82 287.06 L 205.77 289.41 L 205.73 291.76 L 207.71 291.59 L 207.67 293.95 L 209.65 293.77 L 209.61 296.13 L 211.59 295.96 L 211.55 298.32 L 213.53 298.15 L 214.53 298.06 L 214.51 299.24 L 215.50 299.15 L 215.48 300.33 L 217.46 300.16 L 217.42 302.52 L 217.35 307.25 L 217.31 309.61 L 219.05 309.47 L 219.04 309.76 L 219.29 309.74 L 219.26 311.81 L 219.22 314.18 L 219.19 316.55 L 221.17 316.38 L 221.03 325.87 L 220.93 333.00 L 218.93 333.17 L 218.90 335.55 L 218.86 337.93 L 218.83 340.02 L 218.58 340.04 L 218.58 340.34 L 216.83 340.48 L 216.75 345.26 L 214.75 345.42 L 214.71 347.81 L 214.68 350.05 L 214.55 350.06 L 214.55 350.21 L 212.67 350.37 L 212.59 355.15 L 212.43 364.73 L 212.39 367.13 L 214.40 366.96 L 214.37 369.36 L 215.37 369.27 L 215.35 370.47 L 216.36 370.39 L 216.31 373.99 L 218.32 373.82 L 218.29 376.23 L 220.30 376.06 L 220.26 378.46 L 223.29 378.21 L 223.27 379.42 L 224.28 379.33 L 224.26 380.54 L 226.27 380.37 L 227.28 380.29 L 227.26 381.49 L 228.27 381.41 L 228.25 382.61 L 232.28 382.28 L 232.25 384.69 L 234.26 384.52 L 236.27 384.35 L 238.27 384.19 L 240.28 384.02 L 242.29 383.85 L 244.29 383.69 L 246.29 383.52 L 248.29 383.36 L 250.29 383.19 L 250.31 381.38 L 250.81 381.34 L 250.81 380.74 L 260.28 379.95 L 267.25 379.37 L 267.24 380.57 L 268.24 380.49 L 268.23 381.70 L 270.22 381.53 L 272.20 381.37 L 273.20 381.28 L 273.19 382.49 L 274.18 382.41 L 274.18 383.61 L 276.17 383.45 L 278.15 383.28 L 278.15 385.70 L 280.13 385.53 L 282.11 385.37 L 284.09 385.20 L 286.07 385.04 L 288.04 384.87 L 290.02 384.71 L 291.99 384.54 L 293.96 384.38 L 295.94 384.21 L 297.91 384.05 L 299.87 383.89 L 299.87 382.68 L 300.85 382.60 L 300.85 381.39 L 303.80 381.14 L 305.76 380.98 L 305.75 378.56 L 307.71 378.40 L 309.67 378.23 L 309.65 376.43 L 310.14 376.38 L 310.14 375.78 L 315.52 375.33 L 317.47 375.17 L 317.45 372.75 L 319.40 372.59 L 321.35 372.43 L 323.30 372.26 L 323.27 369.85 L 325.22 369.69 L 325.21 368.48 L 326.18 368.40 L 326.16 367.20 L 327.14 367.12 L 329.08 366.95 L 329.05 364.54 L 330.99 364.38 L 330.94 360.17 L 331.42 360.13 L 331.42 359.53 L 332.87 359.40 L 332.84 357.00 L 332.81 354.60 L 334.74 354.43 L 334.68 349.63 L 334.65 347.23 L 333.69 347.32 L 333.67 346.12 L 332.71 346.20 L 332.70 345.00 L 332.67 342.61 L 332.64 340.21 L 332.61 337.82 L 332.58 335.43 L 330.66 335.59 L 330.57 328.43 L 332.49 328.26 L 332.47 325.88 L 334.38 325.71 L 336.30 325.55 L 336.27 323.16 L 338.18 323.00 L 340.10 322.83 L 340.07 320.75 L 340.31 320.73 L 340.30 320.43 L 341.97 320.29 L 343.88 320.12 L 343.85 317.74 L 345.75 317.58 L 345.72 315.20 L 347.62 315.03 L 347.58 312.65 L 347.57 311.46 L 348.52 311.38 L 348.50 310.19 L 349.45 310.11 L 349.41 307.74 L 351.31 307.57 L 351.27 305.20 L 351.23 302.82 L 351.21 301.64 L 352.15 301.56 L 352.13 300.37 L 353.08 300.29 L 353.00 295.55 L 352.83 286.09 L 352.79 283.72 L 350.91 283.89 L 350.87 281.53 L 349.93 281.61 L 349.91 280.43 L 348.96 280.51 L 348.91 276.98 L 347.02 277.14 L 346.98 274.78 L 345.10 274.95 L 344.15 275.03 L 344.14 273.85 L 343.19 273.94 L 343.18 272.76 L 341.29 272.92 L 341.25 270.57 L 343.14 270.41 L 343.10 268.05 L 344.99 267.89 L 344.95 265.54 L 346.83 265.37 L 346.79 263.03 L 346.77 261.27 L 347.24 261.22 L 347.23 260.64 L 348.63 260.51 L 348.60 258.17 L 348.57 256.41 L 349.03 256.37 L 349.02 255.78 L 350.43 255.66 L 350.39 253.32 L 350.35 250.98 L 350.31 248.64 L 350.27 246.30 L 350.24 244.55 L 350.71 244.50 L 350.70 243.92 L 350.46 243.94 L 350.46 243.65 L 350.23 243.67 L 350.19 241.63 L 350.15 239.29 L 350.11 236.96 L 350.07 234.63 L 348.21 234.79 L 348.13 230.14 L 346.27 230.30 L 346.23 227.98 L 344.37 228.14 L 344.33 225.82 L 342.47 225.98 L 342.43 223.66 L 344.29 223.49 L 344.26 221.17 L 346.12 221.01 L 346.08 218.69 L 346.06 217.53 L 346.99 217.45 L 346.97 216.29 L 347.90 216.20 L 347.86 214.18 L 348.10 214.16 L 348.09 213.87 L 349.71 213.72 L 349.67 211.41 L 349.65 210.25 L 350.58 210.17 L 350.56 209.01 L 351.48 208.93 L 351.44 206.62 L 351.41 204.88 L 351.87 204.84 L 351.86 204.26 L 353.25 204.14 L 353.21 201.83 L 353.16 199.52 L 355.01 199.36 L 354.96 197.05 L 354.88 192.44 L 354.79 187.84 L 354.71 183.25 L 356.54 183.08 L 356.50 180.78 L 356.46 179.06 L 356.92 179.02 L 356.91 178.45 L 358.28 178.33 L 358.19 173.74 L 358.01 164.60 L 357.83 155.47 L 357.65 146.38 L 357.60 144.11 L 356.69 144.19 L 356.67 143.05 L 355.77 143.14 L 355.74 142.00 L 355.70 140.02 L 355.93 140.00 L 355.93 139.71 L 357.51 139.57 L 357.47 137.30 L 361.08 136.97 L 361.05 135.28 L 361.50 135.23 L 361.49 134.67 L 362.84 134.55 L 364.65 134.38 L 364.62 133.25 L 365.52 133.17 L 365.50 132.04 L 368.20 131.79 L 368.15 129.53 L 369.94 129.37 L 369.92 128.24 L 370.82 128.15 L 370.79 127.02 Z' style='fill-rule: evenodd; stroke-width: 1.12; stroke: #7F7F7F; stroke-dasharray: 6.00,6.00;' />
<path d='M 354.24 368.43 L 354.22 367.24 L 356.15 367.08 L 356.10 364.67 L 356.06 362.26 L 356.03 360.45 L 356.51 360.41 L 356.50 359.81 L 357.94 359.69 L 357.90 357.28 L 357.81 352.48 L 357.72 347.67 L 357.64 342.88 L 357.55 338.09 L 359.46 337.92 L 359.42 335.68 L 359.54 335.67 L 359.53 335.52 L 361.32 335.37 L 361.29 334.17 L 362.25 334.09 L 362.22 332.89 L 363.17 332.81 L 363.15 331.62 L 364.10 331.54 L 364.08 330.34 L 365.03 330.26 L 365.00 329.06 L 365.95 328.98 L 365.93 327.79 L 366.88 327.71 L 366.85 326.51 L 367.80 326.43 L 367.77 325.24 L 368.72 325.16 L 368.68 323.07 L 368.91 323.05 L 368.91 322.75 L 370.56 322.61 L 370.51 320.22 L 370.49 319.03 L 371.43 318.95 L 371.40 317.76 L 372.35 317.67 L 372.30 315.29 L 374.18 315.13 L 374.13 312.75 L 374.08 310.37 L 375.96 310.21 L 375.90 307.83 L 375.80 303.08 L 377.67 302.91 L 377.62 300.54 L 377.56 298.17 L 377.51 295.80 L 377.45 293.43 L 377.40 291.06 L 377.34 288.69 L 377.29 286.33 L 377.23 283.96 L 377.18 281.60 L 375.31 281.76 L 375.15 274.69 L 373.28 274.85 L 373.23 272.49 L 373.18 270.14 L 371.31 270.30 L 371.21 265.59 L 373.07 265.43 L 373.02 263.08 L 372.96 260.73 L 372.92 258.68 L 373.15 258.66 L 373.14 258.36 L 374.77 258.22 L 374.71 255.88 L 374.50 246.51 L 374.28 237.16 L 374.17 232.50 L 374.12 230.17 L 372.28 230.33 L 372.22 228.00 L 372.17 225.68 L 370.79 225.80 L 370.77 225.22 L 370.31 225.26 L 370.27 223.52 L 372.12 223.35 L 372.06 221.03 L 372.01 218.85 L 372.13 218.84 L 372.13 218.70 L 373.85 218.54 L 373.74 213.90 L 375.58 213.74 L 375.52 211.42 L 375.47 209.11 L 377.30 208.94 L 377.19 204.32 L 377.13 202.01 L 378.96 201.84 L 378.90 199.53 L 378.84 197.23 L 378.78 194.92 L 378.73 192.61 L 378.67 190.31 L 378.63 188.58 L 379.08 188.54 L 379.07 187.97 L 380.43 187.85 L 380.37 185.55 L 380.32 183.25 L 382.13 183.08 L 382.07 180.79 L 382.01 178.49 L 381.95 176.20 L 381.89 173.90 L 381.83 171.61 L 381.77 169.32 L 381.71 167.04 L 381.65 164.75 L 381.60 162.46 L 381.54 160.18 L 381.48 157.90 L 381.42 155.62 L 381.36 153.34 L 381.30 151.06 L 383.10 150.90 L 383.04 148.63 L 384.83 148.46 L 384.80 147.33 L 385.70 147.25 L 385.67 146.11 L 386.57 146.03 L 388.36 145.86 L 388.29 143.59 L 390.08 143.43 L 390.04 141.73 L 390.48 141.69 L 390.47 141.12 L 391.81 141.00 L 391.77 139.86 L 392.67 139.78 L 392.63 138.65 L 393.53 138.57 L 393.49 137.43 L 394.39 137.35 L 394.35 136.22 L 395.24 136.14 L 395.21 135.00 L 396.10 134.92 L 396.07 133.79 L 396.96 133.71 L 398.73 133.55 L 398.66 131.28 L 398.63 130.15 L 399.52 130.07 L 399.48 128.94 L 400.37 128.86 L 400.33 127.73 L 401.22 127.65 L 401.18 126.52 L 402.07 126.44 L 402.00 124.18 L 403.77 124.02 L 403.62 119.50 L 405.39 119.34 L 405.31 117.09 L 405.24 114.83 L 405.20 113.71 L 406.08 113.63 L 406.05 112.50 L 406.93 112.42 L 406.85 110.17 L 406.70 105.68 L 406.40 96.71 L 406.25 92.23 L 404.49 92.39 L 404.42 90.16 L 404.35 87.93 L 404.27 85.69 L 402.52 85.86 L 402.45 83.63 L 402.37 81.40 L 400.62 81.56 L 400.55 79.33 L 400.48 77.11 L 398.73 77.27 L 398.66 75.04 L 397.35 75.17 L 397.33 74.61 L 396.89 74.65 L 396.84 72.98 L 395.97 73.06 L 395.93 71.95 L 395.06 72.04 L 395.02 70.93 L 394.95 68.71 L 393.20 68.87 L 393.14 66.65 L 391.39 66.81 L 391.32 64.60 L 389.57 64.76 L 388.69 64.84 L 388.66 63.73 L 387.79 63.82 L 387.75 62.71 L 386.03 62.87 L 386.03 62.83 L 386.00 62.84 L 385.94 60.66 L 385.06 60.74 L 385.03 59.63 L 384.16 59.72 L 384.12 58.61 L 384.06 56.40 L 382.31 56.56 L 382.25 54.36 L 380.55 54.52 L 380.55 54.45 L 380.50 54.45 L 380.44 52.31 L 378.91 52.46 L 378.90 52.18 L 378.68 52.20 L 378.63 50.27 L 377.09 50.42 L 377.09 50.14 L 376.87 50.16 L 376.82 48.24 L 375.07 48.40 L 375.01 46.20 L 373.26 46.36 L 373.20 44.16 L 371.45 44.33 L 370.57 44.41 L 370.54 43.31 L 369.67 43.39 L 369.64 42.29 L 367.89 42.46 L 367.83 40.26 L 366.08 40.43 L 365.20 40.51 L 365.18 39.41 L 364.30 39.49 L 364.27 38.40 L 362.52 38.56 L 361.64 38.64 L 361.61 37.55 L 360.73 37.63 L 360.71 36.53 L 358.95 36.70 L 357.19 36.86 L 357.15 34.67 L 355.39 34.84 L 351.87 35.17 L 351.82 32.98 L 350.06 33.14 L 348.30 33.31 L 346.53 33.48 L 344.77 33.64 L 343.00 33.81 L 342.96 31.62 L 341.19 31.79 L 334.11 32.45 L 330.56 32.79 L 330.53 30.60 L 328.75 30.77 L 326.97 30.94 L 325.20 31.11 L 323.42 31.28 L 321.64 31.44 L 319.85 31.61 L 318.07 31.78 L 316.28 31.95 L 314.50 32.12 L 314.48 29.93 L 312.69 30.10 L 312.71 32.29 L 310.92 32.46 L 309.13 32.63 L 307.34 32.80 L 305.55 32.97 L 303.75 33.14 L 302.40 33.26 L 302.40 32.72 L 301.95 32.76 L 301.94 31.12 L 300.15 31.29 L 300.14 29.11 L 298.34 29.28 L 296.54 29.45 L 296.53 27.27 L 294.74 27.44 L 292.94 27.61 L 292.93 25.43 L 291.13 25.60 L 289.33 25.78 L 288.43 25.86 L 288.43 24.77 L 287.53 24.86 L 287.53 23.77 L 283.92 24.11 L 282.12 24.29 L 282.12 22.11 L 280.32 22.28 L 278.51 22.46 L 276.70 22.63 L 274.90 22.80 L 273.09 22.97 L 271.28 23.15 L 269.46 23.32 L 268.56 23.41 L 268.56 22.32 L 267.66 22.41 L 267.66 21.32 L 265.85 21.49 L 264.03 21.67 L 264.02 23.84 L 262.20 24.01 L 260.39 24.19 L 258.57 24.36 L 256.75 24.54 L 254.93 24.71 L 253.10 24.89 L 253.09 25.97 L 252.18 26.06 L 252.17 27.15 L 251.26 27.24 L 247.60 27.59 L 243.95 27.94 L 242.11 28.11 L 242.09 30.29 L 240.26 30.46 L 238.42 30.64 L 236.58 30.82 L 236.58 30.90 L 239.03 32.95 L 243.77 33.87 L 243.34 35.66 L 239.20 41.49 L 239.24 45.34 L 241.12 45.83 L 248.49 42.82 L 248.95 45.10 L 248.37 52.41 L 251.77 55.72 L 250.10 58.72 L 248.39 60.04 L 248.12 62.81 L 253.34 63.48 L 245.03 72.91 L 245.31 81.83 L 246.39 82.97 L 249.56 82.20 L 245.25 88.29 L 244.82 92.09 L 246.52 95.45 L 250.36 95.87 L 247.99 98.46 L 248.16 103.64 L 250.88 119.16 L 253.53 126.51 L 254.13 130.35 L 252.93 149.13 L 250.87 154.84 L 249.10 157.37 L 244.61 176.84 L 243.96 181.31 L 245.47 182.88 L 246.03 184.92 L 232.20 217.03 L 227.62 223.53 L 224.61 225.45 L 222.16 228.39 L 223.04 233.48 L 220.23 241.09 L 219.35 249.62 L 217.35 255.64 L 217.08 258.68 L 217.26 262.51 L 222.41 264.44 L 232.18 262.05 L 234.22 256.90 L 240.34 246.76 L 244.18 243.99 L 247.52 243.33 L 241.04 247.78 L 238.25 253.10 L 239.22 258.75 L 237.22 261.88 L 234.02 264.67 L 230.29 265.12 L 227.07 266.82 L 229.05 273.48 L 228.55 278.59 L 229.72 279.16 L 241.79 275.14 L 246.92 274.85 L 252.65 280.17 L 243.25 278.84 L 246.28 287.13 L 246.61 293.66 L 243.08 306.29 L 245.55 311.20 L 246.85 319.04 L 245.59 326.92 L 245.71 336.02 L 237.23 358.36 L 240.04 359.30 L 243.99 355.98 L 248.92 356.08 L 255.31 353.50 L 260.41 354.73 L 276.07 356.08 L 284.96 360.11 L 289.73 360.09 L 305.04 350.89 L 319.37 348.50 L 328.39 348.99 L 330.41 348.04 L 333.33 344.41 L 333.55 346.08 L 332.45 349.18 L 350.32 362.41 L 354.24 368.43 Z' style='fill-rule: evenodd; fill: #4D80B3; fill-opacity: 0.30; stroke-width: 1.12; stroke: #4682B4; stroke-dasharray: 6.00,6.00;' />
<path d='M 245.25 88.29 L 244.82 92.09 L 246.52 95.45 L 250.36 95.87 L 247.99 98.46 L 248.16 103.64 L 250.88 119.16 L 253.53 126.51 L 254.13 130.35 L 254.29 133.55 L 253.46 139.91 L 252.93 149.13 L 250.87 154.84 L 249.10 157.37 L 244.61 176.84 L 243.96 181.31 L 245.47 182.88 L 246.03 184.92 L 238.66 201.46 L 232.20 217.03 L 227.62 223.53 L 224.61 225.45 L 222.16 228.39 L 222.88 231.44 L 223.04 233.48 L 220.23 241.09 L 219.35 249.62 L 217.35 255.64 L 217.08 258.68 L 217.26 262.51 L 220.06 263.86 L 222.41 264.44 L 227.03 263.67 L 232.18 262.05 L 234.22 256.90 L 240.34 246.76 L 244.18 243.99 L 247.52 243.33 L 241.04 247.78 L 238.25 253.10 L 239.22 258.75 L 237.22 261.88 L 234.02 264.67 L 230.29 265.12 L 227.07 266.82 L 229.05 273.48 L 228.55 278.59 L 229.72 279.16 L 233.74 278.25 L 241.79 275.14 L 244.14 275.28 L 246.92 274.85 L 249.77 276.88 L 252.65 280.17 L 243.25 278.84 L 246.28 287.13 L 246.61 293.66 L 243.08 306.29 L 245.55 311.20 L 246.85 319.04 L 245.59 326.92 L 245.71 336.02 L 240.53 350.86 L 237.23 358.36 L 240.04 359.30 L 243.99 355.98 L 248.92 356.08 L 255.31 353.50 L 260.41 354.73 L 276.07 356.08 L 284.96 360.11 L 289.73 360.09 L 305.04 350.89 L 308.98 350.24 L 306.15 336.27 L 304.83 330.90 L 304.47 327.42 L 307.09 319.37 L 309.98 316.08 L 313.80 309.30 L 318.51 303.64 L 323.52 302.26 L 325.72 301.41 L 327.53 297.04 L 328.54 293.32 L 327.77 292.96 L 321.93 293.78 L 311.31 278.31 L 311.61 275.83 L 312.90 272.15 L 313.73 267.49 L 313.92 263.82 L 316.61 260.65 L 320.74 257.44 L 324.19 252.90 L 325.89 248.48 L 326.21 244.47 L 324.20 241.64 L 318.51 240.11 L 312.58 228.74 L 311.23 221.60 L 310.04 220.87 L 306.42 217.64 L 302.94 211.55 L 302.44 210.60 L 305.98 209.51 L 320.61 209.33 L 323.65 207.96 L 324.11 207.48 L 326.72 202.70 L 329.42 194.86 L 330.01 190.08 L 329.11 188.12 L 324.24 183.35 L 324.02 181.93 L 324.76 179.64 L 327.59 177.18 L 331.42 174.36 L 333.49 171.95 L 332.96 170.09 L 331.81 168.15 L 331.61 166.34 L 332.29 164.08 L 332.44 156.43 L 332.90 154.45 L 332.06 147.52 L 331.05 141.85 L 327.94 134.53 L 328.47 132.89 L 329.85 131.50 L 334.37 128.89 L 337.93 122.83 L 343.13 117.73 L 349.97 113.58 L 354.70 109.01 L 356.54 105.54 L 357.87 104.61 L 357.45 103.02 L 356.50 100.71 L 353.71 98.49 L 350.15 97.25 L 346.23 97.37 L 343.79 96.96 L 343.05 95.19 L 343.24 90.37 L 342.96 85.62 L 342.17 83.44 L 340.34 81.82 L 336.76 82.31 L 333.64 81.01 L 331.29 80.72 L 329.94 81.80 L 323.00 81.58 L 320.11 80.85 L 318.08 79.91 L 316.79 80.46 L 316.07 81.39 L 315.96 82.85 L 315.50 84.77 L 313.03 86.53 L 307.36 88.30 L 302.77 88.20 L 298.55 86.98 L 297.20 86.09 L 295.16 85.28 L 286.60 86.31 L 285.57 85.57 L 282.62 87.36 L 278.26 89.48 L 275.82 89.60 L 274.93 89.15 L 274.61 88.19 L 272.78 84.87 L 273.27 83.11 L 276.78 78.00 L 276.39 76.77 L 274.96 75.11 L 273.68 72.72 L 273.31 71.49 L 271.09 71.27 L 268.71 72.52 L 259.66 75.05 L 257.49 75.97 L 253.55 78.43 L 249.56 82.20 L 245.25 88.29 Z' style='fill-rule: evenodd; stroke-width: 1.50;' />
<line x1='407.08' y1='48.96' x2='428.68' y2='48.96' style='stroke-width: 1.50;' />
<line x1='407.08' y1='63.36' x2='428.68' y2='63.36' style='stroke-width: 1.12; stroke: #7F7F7F; stroke-dasharray: 6.00,6.00;' />
<line x1='407.08' y1='77.76' x2='428.68' y2='77.76' style='stroke-width: 1.12; stroke: #4682B4; stroke-dasharray: 6.00,6.00;' />
<text x='439.48' y='53.26' style='font-size: 12.00px; font-family: "Roboto", -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif;' textLength='44.69px' lengthAdjust='spacingAndGlyphs'>Portugal</text>
<text x='439.48' y='67.66' style='font-size: 12.00px; font-family: "Roboto", -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif;' textLength='89.36px' lengthAdjust='spacingAndGlyphs'>AoE (unmasked)</text>
<text x='439.48' y='82.06' style='font-size: 12.00px; font-family: "Roboto", -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif;' textLength='82.03px' lengthAdjust='spacingAndGlyphs'>AoE (land only)</text>
</g>
</g>
</svg></div><p class="caption">
Portugal with land-masked AoE. The halo extends into Spain but not into
the Atlantic.
</p>
</div>
<p>The <code>area = 1</code> parameter ensures the halo has equal land
area to the core, even after the ocean is masked out. Without this,
coastline clipping would reduce the effective halo area.</p>
</div>
</div>
<div class="section level2">
<h2 id="scale-parameter">Scale Parameter<a class="anchor" aria-label="anchor" href="#scale-parameter"></a>
</h2>
<p>The <code>scale</code> parameter controls halo size as a proportion
of core area.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Default: equal core/halo areas (scale = sqrt(2) - 1)</span></span>
<span><span class="va">result_default</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe.html">aoe</a></span><span class="op">(</span><span class="va">pts</span>, <span class="va">support</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Scale = 1: larger halo (3:1 area ratio)</span></span>
<span><span class="va">result_large</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe.html">aoe</a></span><span class="op">(</span><span class="va">pts</span>, <span class="va">support</span>, scale <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th>Scale</th>
<th>Halo:Core Area</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>
<code>sqrt(2) - 1</code> (default)</td>
<td>1:1</td>
</tr>
<tr class="even">
<td><code>1</code></td>
<td>3:1</td>
</tr>
<tr class="odd">
<td><code>0.5</code></td>
<td>1.25:1</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="area-parameter-target-halo-area">Area Parameter (Target Halo Area)<a class="anchor" aria-label="anchor" href="#area-parameter-target-halo-area"></a>
</h2>
<p>Sometimes you need a specific halo area regardless of masking. The
<code>area</code> parameter specifies the target halo area as a
proportion of the original support:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Halo area = original area (same as scale = sqrt(2) - 1 without mask)</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe.html">aoe</a></span><span class="op">(</span><span class="va">pts</span>, <span class="va">support</span>, area <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Halo area = half of original</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe.html">aoe</a></span><span class="op">(</span><span class="va">pts</span>, <span class="va">support</span>, area <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span></span></code></pre></div>
<p>Unlike <code>scale</code>, <code>area</code> accounts for masking:
the function finds the scale that produces the target halo area
<em>after</em> mask intersection. This is useful for coastal regions
where scale alone would produce inconsistent effective areas.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Target area = 1 means halo = original, even after coastline clipping</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe.html">aoe</a></span><span class="op">(</span><span class="va">pts</span>, <span class="va">support</span>, area <span class="op">=</span> <span class="fl">1</span>, mask <span class="op">=</span> <span class="st">"land"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="adaptive-expansion-with-aoe_expand">Adaptive Expansion with <code>aoe_expand()</code><a class="anchor" aria-label="anchor" href="#adaptive-expansion-with-aoe_expand"></a>
</h2>
<p>When some supports have too few points at baseline AoE,
<code><a href="../reference/aoe_expand.html">aoe_expand()</a></code> finds the minimum scale needed to capture a
target number of points:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create sparse data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">42</span><span class="op">)</span></span>
<span><span class="va">pts_sparse</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">15</span><span class="op">)</span>,</span>
<span>  geometry <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html" class="external-link">st_sfc</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, <span class="kw">function</span><span class="op">(</span><span class="va">i</span><span class="op">)</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">20</span>, <span class="fl">80</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">20</span>, <span class="fl">80</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="kw">function</span><span class="op">(</span><span class="va">i</span><span class="op">)</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span>, <span class="op">-</span><span class="fl">50</span>, <span class="fl">150</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span>, <span class="op">-</span><span class="fl">50</span>, <span class="fl">150</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span><span class="op">)</span>,</span>
<span>  crs <span class="op">=</span> <span class="fl">32631</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Expand until at least 10 points are captured</span></span>
<span><span class="va">result_expand</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe_expand.html">aoe_expand</a></span><span class="op">(</span><span class="va">pts_sparse</span>, <span class="va">support</span>, min_points <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<p>Two safety caps prevent unreasonable expansion:</p>
<ul>
<li><p><code>max_area = 2</code> (default): halo area cannot exceed 2×
the original</p></li>
<li><p><code>max_dist</code>: maximum expansion distance in CRS
units</p></li>
</ul>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Strict caps</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe_expand.html">aoe_expand</a></span><span class="op">(</span><span class="va">pts</span>, <span class="va">support</span>,</span>
<span>                     min_points <span class="op">=</span> <span class="fl">50</span>,</span>
<span>                     max_area <span class="op">=</span> <span class="fl">1.5</span>,    <span class="co"># halo ≤ 1.5× original</span></span>
<span>                     max_dist <span class="op">=</span> <span class="fl">500</span><span class="op">)</span>    <span class="co"># max 500m expansion</span></span></code></pre></div>
<p>Check expansion details:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">info</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">result_expand</span>, <span class="st">"expansion_info"</span><span class="op">)</span></span>
<span><span class="va">info</span></span>
<span><span class="co">#&gt;   support_id scale_used points_captured target_reached cap_hit</span></span>
<span><span class="co">#&gt; 1          1  0.6412593              10           TRUE    none</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="balanced-sampling-with-aoe_sample">Balanced Sampling with <code>aoe_sample()</code><a class="anchor" aria-label="anchor" href="#balanced-sampling-with-aoe_sample"></a>
</h2>
<p>Core regions often dominate due to point density.
<code><a href="../reference/aoe_sample.html">aoe_sample()</a></code> provides stratified sampling to balance
core/halo representation:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create imbalanced data (many core, few halo)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">42</span><span class="op">)</span></span>
<span><span class="va">pts_imbal</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">60</span><span class="op">)</span>,</span>
<span>  geometry <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html" class="external-link">st_sfc</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">50</span>, <span class="kw">function</span><span class="op">(</span><span class="va">i</span><span class="op">)</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span>, <span class="fl">90</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span>, <span class="fl">90</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="kw">function</span><span class="op">(</span><span class="va">i</span><span class="op">)</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">110</span>, <span class="fl">140</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span>, <span class="fl">90</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span><span class="op">)</span>,</span>
<span>  crs <span class="op">=</span> <span class="fl">32631</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">result_imbal</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe.html">aoe</a></span><span class="op">(</span><span class="va">pts_imbal</span>, <span class="va">support</span>, scale <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Default: balance core/halo (downsamples core to match halo)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span></span>
<span><span class="va">balanced</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe_sample.html">aoe_sample</a></span><span class="op">(</span><span class="va">result_imbal</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">balanced</span><span class="op">$</span><span class="va">aoe_class</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; core halo </span></span>
<span><span class="co">#&gt;   10   10</span></span></code></pre></div>
<p>Custom ratios and fixed sample sizes:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Fixed n with 70/30 split</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span></span>
<span><span class="va">sampled</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe_sample.html">aoe_sample</a></span><span class="op">(</span><span class="va">result_imbal</span>, n <span class="op">=</span> <span class="fl">20</span>, ratio <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>core <span class="op">=</span> <span class="fl">0.7</span>, halo <span class="op">=</span> <span class="fl">0.3</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">sampled</span><span class="op">$</span><span class="va">aoe_class</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; core halo </span></span>
<span><span class="co">#&gt;   14    6</span></span></code></pre></div>
<p>For multiple supports, use <code>by = "support"</code> to sample
within each:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sampled</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe_sample.html">aoe_sample</a></span><span class="op">(</span><span class="va">result_multi</span>, by <span class="op">=</span> <span class="st">"support"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="border-classification-with-aoe_border">Border Classification with <code>aoe_border()</code><a class="anchor" aria-label="anchor" href="#border-classification-with-aoe_border"></a>
</h2>
<p>When your study involves a boundary <em>line</em> rather than a
polygon (e.g., a river, mountain range, or political border), use
<code><a href="../reference/aoe_border.html">aoe_border()</a></code> to classify points by their distance from and
side of the border.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create a diagonal border line</span></span>
<span><span class="va">border_line</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>  geometry <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html" class="external-link">st_sfc</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_linestring</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>,</span>
<span>      <span class="fl">100</span>, <span class="fl">100</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="fl">2</span>, byrow <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  crs <span class="op">=</span> <span class="fl">32631</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create points on both sides</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">42</span><span class="op">)</span></span>
<span><span class="va">pts_border</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">30</span><span class="op">)</span>,</span>
<span>  geometry <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html" class="external-link">st_sfc</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="co"># Points on side 1 (above the line)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">15</span>, <span class="kw">function</span><span class="op">(</span><span class="va">i</span><span class="op">)</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span>, <span class="fl">90</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span>, <span class="fl">90</span><span class="op">)</span> <span class="op">+</span> <span class="fl">20</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    <span class="co"># Points on side 2 (below the line)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">15</span>, <span class="kw">function</span><span class="op">(</span><span class="va">i</span><span class="op">)</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span>, <span class="fl">90</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span>, <span class="fl">90</span><span class="op">)</span> <span class="op">-</span> <span class="fl">20</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span><span class="op">)</span>,</span>
<span>  crs <span class="op">=</span> <span class="fl">32631</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Classify by distance from border</span></span>
<span><span class="va">result_border</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe_border.html">aoe_border</a></span><span class="op">(</span></span>
<span>  <span class="va">pts_border</span>, <span class="va">border_line</span>,</span>
<span>  width <span class="op">=</span> <span class="fl">30</span>,</span>
<span>  side_names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"north"</span>, <span class="st">"south"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Extract geometries for ggplot2</span></span>
<span><span class="va">geoms</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">result_border</span>, <span class="st">"border_geometries"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Plot with ggplot2</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co"># Halo zones (background)</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">geoms</span><span class="op">$</span><span class="va">side1_halo</span>, fill <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">aoe_colors</span><span class="op">$</span><span class="va">side_a</span>, <span class="st">"20"</span><span class="op">)</span>, color <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">geoms</span><span class="op">$</span><span class="va">side2_halo</span>, fill <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">aoe_colors</span><span class="op">$</span><span class="va">side_b</span>, <span class="st">"20"</span><span class="op">)</span>, color <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co"># Core zones</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">geoms</span><span class="op">$</span><span class="va">side1_core</span>, fill <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">aoe_colors</span><span class="op">$</span><span class="va">side_a</span>, <span class="st">"40"</span><span class="op">)</span>, color <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">geoms</span><span class="op">$</span><span class="va">side2_core</span>, fill <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">aoe_colors</span><span class="op">$</span><span class="va">side_b</span>, <span class="st">"40"</span><span class="op">)</span>, color <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co"># Border line</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">geoms</span><span class="op">$</span><span class="va">border</span>, color <span class="op">=</span> <span class="va">aoe_colors</span><span class="op">$</span><span class="va">support</span>, linewidth <span class="op">=</span> <span class="fl">1.5</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co"># Points</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">result_border</span>,</span>
<span>          <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="va">side</span>, shape <span class="op">=</span> <span class="va">aoe_class</span><span class="op">)</span>, size <span class="op">=</span> <span class="fl">3</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_color_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"north"</span> <span class="op">=</span> <span class="va">aoe_colors</span><span class="op">$</span><span class="va">side_a</span>, <span class="st">"south"</span> <span class="op">=</span> <span class="va">aoe_colors</span><span class="op">$</span><span class="va">side_b</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_shape_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"core"</span> <span class="op">=</span> <span class="fl">16</span>, <span class="st">"halo"</span> <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>                     labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Core"</span>, <span class="st">"Halo"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"Side"</span>, shape <span class="op">=</span> <span class="st">"Class"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_aoe</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<div class="svg-container"><button type="button" class="btn btn-primary btn-copy-svg" title="Copy SVG to clipboard" aria-label="Copy SVG to clipboard" data-bs-toggle="tooltip" data-bs-placement="left"><i class="fa fa-copy"></i></button>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='576.00pt' height='432.00pt' viewBox='0 0 576.00 432.00' class="r-plt inline-svg" style="max-width:100%;width:100%;height:auto;">
<g class='svglite'>
<defs>
  <style type='text/css'><![CDATA[
    /* theme-aware-processed */
    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite circle {
      fill: none;
      stroke: #3E3F3A;
      stroke-linecap: round;
      stroke-linejoin: round;
      stroke-miterlimit: 10.00;
    }
    .svglite > g > rect {
      fill: none;
      stroke: #3E3F3A;
      stroke-linecap: round;
      stroke-linejoin: round;
      stroke-miterlimit: 10.00;
    }
    .svglite text {
      white-space: pre;
      fill: #3E3F3A;
    }
    .svglite g.glyphgroup path {
      fill: inherit;
      stroke: none;
    }
  ]]></style>
</defs>
<rect width='100%' height='100%' style='stroke: none; fill: #F5F6F8;'/>
<defs>
  <clipPath id='cpMC4wMHw1NzYuMDB8MC4wMHw0MzIuMDA='>
    <rect x='0.00' y='0.00' width='576.00' height='432.00' />
  </clipPath>
</defs>
<g clip-path='url(#cpMC4wMHw1NzYuMDB8MC4wMHw0MzIuMDA=)'>
</g>
<defs>
  <clipPath id='cpNDQuMDd8NTMxLjkzfDAuMDB8NDMyLjAw'>
    <rect x='44.07' y='0.00' width='487.86' height='432.00' />
  </clipPath>
</defs>
<g clip-path='url(#cpNDQuMDd8NTMxLjkzfDAuMDB8NDMyLjAw)'>
<rect x='44.07' y='0.00' width='487.86' height='432.00' style='stroke-width: 0.00; stroke: none;' /> fill: #F5F6F8;' />
</g>
<g clip-path='url(#cpMC4wMHw1NzYuMDB8MC4wMHw0MzIuMDA=)'>
</g>
<defs>
  <clipPath id='cpNTQuMDN8NDY2LjExfDkuOTZ8NDIyLjA0'>
    <rect x='54.03' y='9.96' width='412.07' height='412.07' />
  </clipPath>
</defs>
<g clip-path='url(#cpNTQuMDN8NDY2LjExfDkuOTZ8NDIyLjA0)'>
<rect x='54.03' y='9.96' width='412.07' height='412.07' style='stroke-width: 0.00; stroke: none;' /> fill: #F5F6F8;' />
<path d='M 280.91 51.46 L 285.15 48.21 L 289.56 45.18 L 294.12 42.38 L 298.82 39.83 L 303.65 37.53 L 308.59 35.48 L 313.64 33.69 L 318.76 32.17 L 323.97 30.93 L 329.22 29.95 L 334.53 29.25 L 339.86 28.83 L 345.21 28.69 L 350.55 28.83 L 355.89 29.25 L 361.19 29.95 L 366.45 30.93 L 371.65 32.17 L 376.78 33.69 L 381.82 35.48 L 386.76 37.53 L 391.59 39.83 L 396.29 42.38 L 400.85 45.18 L 405.26 48.21 L 409.50 51.46 L 413.57 54.94 L 417.45 58.62 L 381.33 94.74 L 379.39 92.90 L 377.36 91.16 L 375.23 89.53 L 373.03 88.02 L 370.75 86.62 L 368.40 85.34 L 365.98 84.19 L 363.51 83.17 L 360.99 82.28 L 358.43 81.52 L 355.83 80.89 L 353.20 80.41 L 350.55 80.06 L 347.88 79.85 L 345.21 79.78 L 342.53 79.85 L 339.87 80.06 L 337.22 80.41 L 334.59 80.89 L 331.99 81.52 L 329.42 82.28 L 326.90 83.17 L 324.43 84.19 L 322.02 85.34 L 319.67 86.62 L 317.39 88.02 L 315.18 89.53 L 313.06 91.16 L 311.03 92.90 L 309.09 94.74 L 138.81 265.02 L 136.97 266.96 L 135.23 268.99 L 133.60 271.11 L 132.09 273.32 L 130.69 275.60 L 129.41 277.95 L 128.26 280.36 L 127.24 282.83 L 126.34 285.35 L 125.59 287.92 L 124.96 290.52 L 124.47 293.15 L 124.12 295.80 L 123.91 298.47 L 123.84 301.14 L 123.91 303.81 L 124.12 306.48 L 124.47 309.13 L 124.96 311.76 L 125.59 314.36 L 126.34 316.93 L 127.24 319.45 L 128.26 321.92 L 129.41 324.33 L 130.69 326.68 L 132.09 328.96 L 133.60 331.17 L 135.23 333.29 L 136.97 335.32 L 138.81 337.26 L 102.69 373.38 L 99.00 369.50 L 95.53 365.44 L 92.27 361.19 L 89.24 356.78 L 86.45 352.22 L 83.90 347.52 L 81.59 342.69 L 79.55 337.75 L 77.76 332.71 L 76.24 327.58 L 74.99 322.38 L 74.02 317.12 L 73.32 311.82 L 72.90 306.49 L 72.76 301.14 L 72.90 295.79 L 73.32 290.46 L 74.02 285.16 L 74.99 279.90 L 76.24 274.70 L 77.76 269.57 L 79.55 264.53 L 81.59 259.58 L 83.90 254.76 L 86.45 250.06 L 89.24 245.50 L 92.27 241.09 L 95.53 236.84 L 99.00 232.78 L 102.69 228.90 L 272.96 58.62 L 276.84 54.94 L 280.91 51.46 Z' style='fill-rule: evenodd; fill: #2B6CB0; fill-opacity: 0.13; stroke-width: 0.47; stroke: none; stroke-linecap: butt;' />
<path d='M 424.61 66.56 L 427.86 70.81 L 430.89 75.22 L 433.69 79.78 L 436.24 84.48 L 438.54 89.31 L 440.59 94.25 L 442.37 99.29 L 443.89 104.42 L 445.14 109.62 L 446.12 114.88 L 446.81 120.18 L 447.23 125.51 L 447.37 130.86 L 447.23 136.21 L 446.81 141.54 L 446.12 146.84 L 445.14 152.10 L 443.89 157.30 L 442.37 162.43 L 440.59 167.47 L 438.54 172.42 L 436.24 177.24 L 433.69 181.94 L 430.89 186.50 L 427.86 190.91 L 424.61 195.16 L 421.13 199.22 L 417.45 203.10 L 247.17 373.38 L 243.29 377.06 L 239.22 380.54 L 234.98 383.79 L 230.57 386.82 L 226.01 389.62 L 221.31 392.17 L 216.48 394.47 L 211.54 396.52 L 206.50 398.31 L 201.37 399.83 L 196.17 401.07 L 190.91 402.05 L 185.61 402.75 L 180.28 403.17 L 174.93 403.31 L 169.58 403.17 L 164.25 402.75 L 158.95 402.05 L 153.69 401.07 L 148.49 399.83 L 143.36 398.31 L 138.31 396.52 L 133.37 394.47 L 128.55 392.17 L 123.84 389.62 L 119.28 386.82 L 114.88 383.79 L 110.63 380.54 L 106.57 377.06 L 102.69 373.38 L 102.69 373.38 L 138.81 337.26 L 138.81 337.26 L 140.75 339.10 L 142.78 340.84 L 144.90 342.47 L 147.11 343.98 L 149.39 345.38 L 151.74 346.66 L 154.15 347.81 L 156.62 348.83 L 159.14 349.72 L 161.71 350.48 L 164.31 351.11 L 166.94 351.59 L 169.59 351.94 L 172.25 352.15 L 174.93 352.22 L 177.60 352.15 L 180.27 351.94 L 182.92 351.59 L 185.55 351.11 L 188.15 350.48 L 190.71 349.72 L 193.24 348.83 L 195.71 347.81 L 198.12 346.66 L 200.47 345.38 L 202.75 343.98 L 204.95 342.47 L 207.08 340.84 L 209.11 339.10 L 211.05 337.26 L 381.33 166.98 L 383.17 165.04 L 384.91 163.01 L 386.53 160.89 L 388.05 158.68 L 389.45 156.40 L 390.72 154.05 L 391.87 151.64 L 392.90 149.17 L 393.79 146.65 L 394.55 144.08 L 395.17 141.48 L 395.66 138.85 L 396.01 136.20 L 396.22 133.53 L 396.29 130.86 L 396.22 128.19 L 396.01 125.52 L 395.66 122.87 L 395.17 120.24 L 394.55 117.64 L 393.79 115.07 L 392.90 112.55 L 391.87 110.08 L 390.72 107.67 L 389.45 105.32 L 388.05 103.04 L 386.53 100.83 L 384.91 98.71 L 383.17 96.68 L 381.33 94.74 L 417.45 58.62 L 421.13 62.50 L 424.61 66.56 Z' style='fill-rule: evenodd; fill: #C05621; fill-opacity: 0.13; stroke-width: 0.47; stroke: none; stroke-linecap: butt;' />
<path d='M 311.03 92.90 L 313.06 91.16 L 315.18 89.53 L 317.39 88.02 L 319.67 86.62 L 322.02 85.34 L 324.43 84.19 L 326.90 83.17 L 329.42 82.28 L 331.99 81.52 L 334.59 80.89 L 337.22 80.41 L 339.87 80.06 L 342.53 79.85 L 345.21 79.78 L 347.88 79.85 L 350.55 80.06 L 353.20 80.41 L 355.83 80.89 L 358.43 81.52 L 360.99 82.28 L 363.51 83.17 L 365.98 84.19 L 368.40 85.34 L 370.75 86.62 L 373.03 88.02 L 375.23 89.53 L 377.36 91.16 L 379.39 92.90 L 381.33 94.74 L 138.81 337.26 L 136.97 335.32 L 135.23 333.29 L 133.60 331.17 L 132.09 328.96 L 130.69 326.68 L 129.41 324.33 L 128.26 321.92 L 127.24 319.45 L 126.34 316.93 L 125.59 314.36 L 124.96 311.76 L 124.47 309.13 L 124.12 306.48 L 123.91 303.81 L 123.84 301.14 L 123.91 298.47 L 124.12 295.80 L 124.47 293.15 L 124.96 290.52 L 125.59 287.92 L 126.34 285.35 L 127.24 282.83 L 128.26 280.36 L 129.41 277.95 L 130.69 275.60 L 132.09 273.32 L 133.60 271.11 L 135.23 268.99 L 136.97 266.96 L 138.81 265.02 L 309.09 94.74 L 311.03 92.90 Z' style='fill-rule: evenodd; fill: #2B6CB0; fill-opacity: 0.25; stroke-width: 0.47; stroke: none; stroke-linecap: butt;' />
<path d='M 383.17 96.68 L 384.91 98.71 L 386.53 100.83 L 388.05 103.04 L 389.45 105.32 L 390.72 107.67 L 391.87 110.08 L 392.90 112.55 L 393.79 115.07 L 394.55 117.64 L 395.17 120.24 L 395.66 122.87 L 396.01 125.52 L 396.22 128.19 L 396.29 130.86 L 396.22 133.53 L 396.01 136.20 L 395.66 138.85 L 395.17 141.48 L 394.55 144.08 L 393.79 146.65 L 392.90 149.17 L 391.87 151.64 L 390.72 154.05 L 389.45 156.40 L 388.05 158.68 L 386.53 160.89 L 384.91 163.01 L 383.17 165.04 L 381.33 166.98 L 211.05 337.26 L 209.11 339.10 L 207.08 340.84 L 204.95 342.47 L 202.75 343.98 L 200.47 345.38 L 198.12 346.66 L 195.71 347.81 L 193.24 348.83 L 190.71 349.72 L 188.15 350.48 L 185.55 351.11 L 182.92 351.59 L 180.27 351.94 L 177.60 352.15 L 174.93 352.22 L 172.25 352.15 L 169.59 351.94 L 166.94 351.59 L 164.31 351.11 L 161.71 350.48 L 159.14 349.72 L 156.62 348.83 L 154.15 347.81 L 151.74 346.66 L 149.39 345.38 L 147.11 343.98 L 144.90 342.47 L 142.78 340.84 L 140.75 339.10 L 138.81 337.26 L 138.81 337.26 L 381.33 94.74 L 383.17 96.68 Z' style='fill-rule: evenodd; fill: #C05621; fill-opacity: 0.25; stroke-width: 0.47; stroke: none; stroke-linecap: butt;' />
<polyline points='174.93,301.14 345.21,130.86 ' style='stroke-width: 3.20; stroke: #2D3748; stroke-linecap: butt;' />
<circle cx='316.57' cy='122.40' r='3.56' style='stroke-width: 0.71; stroke: none; stroke-linecap: butt; fill: #2B6CB0;' />
<circle cx='230.94' cy='136.93' r='3.56' style='stroke-width: 0.71; stroke: #2B6CB0; stroke-linecap: butt;' />
<circle cx='279.38' cy='179.34' r='3.56' style='stroke-width: 0.71; stroke: none; stroke-linecap: butt; fill: #2B6CB0;' />
<circle cx='292.30' cy='231.71' r='3.56' style='stroke-width: 0.71; stroke: none; stroke-linecap: butt; fill: #C05621;' />
<circle cx='281.45' cy='154.01' r='3.56' style='stroke-width: 0.71; stroke: none; stroke-linecap: butt; fill: #2B6CB0;' />
<circle cx='254.31' cy='152.10' r='3.56' style='stroke-width: 0.71; stroke: none; stroke-linecap: butt; fill: #2B6CB0;' />
<circle cx='319.28' cy='215.26' r='3.56' style='stroke-width: 0.71; stroke: none; stroke-linecap: butt; fill: #C05621;' />
<circle cx='254.93' cy='122.00' r='3.56' style='stroke-width: 0.71; stroke: #2B6CB0; stroke-linecap: butt;' />
<circle cx='325.21' cy='234.05' r='3.56' style='stroke-width: 0.71; stroke: #C05621; stroke-linecap: butt;' />
<circle cx='256.66' cy='173.73' r='3.56' style='stroke-width: 0.71; stroke: none; stroke-linecap: butt; fill: #2B6CB0;' />
<circle cx='315.11' cy='231.16' r='3.56' style='stroke-width: 0.71; stroke: none; stroke-linecap: butt; fill: #C05621;' />
<circle cx='326.67' cy='121.10' r='3.56' style='stroke-width: 0.71; stroke: none; stroke-linecap: butt; fill: #2B6CB0;' />
<circle cx='203.19' cy='180.01' r='3.56' style='stroke-width: 0.71; stroke: #2B6CB0; stroke-linecap: butt;' />
<circle cx='245.11' cy='126.67' r='3.56' style='stroke-width: 0.71; stroke: #2B6CB0; stroke-linecap: butt;' />
<circle cx='252.84' cy='136.17' r='3.56' style='stroke-width: 0.71; stroke: #2B6CB0; stroke-linecap: butt;' />
<circle cx='292.43' cy='207.68' r='3.56' style='stroke-width: 0.71; stroke: none; stroke-linecap: butt; fill: #C05621;' />
<circle cx='244.83' cy='224.83' r='3.56' style='stroke-width: 0.71; stroke: none; stroke-linecap: butt; fill: #2B6CB0;' />
<circle cx='192.49' cy='204.70' r='3.56' style='stroke-width: 0.71; stroke: #2B6CB0; stroke-linecap: butt;' />
<circle cx='192.96' cy='289.88' r='3.56' style='stroke-width: 0.71; stroke: none; stroke-linecap: butt; fill: #C05621;' />
<circle cx='315.46' cy='234.83' r='3.56' style='stroke-width: 0.71; stroke: #C05621; stroke-linecap: butt;' />
<circle cx='243.66' cy='258.81' r='3.56' style='stroke-width: 0.71; stroke: none; stroke-linecap: butt; fill: #C05621;' />
<circle cx='197.06' cy='185.55' r='3.56' style='stroke-width: 0.71; stroke: #2B6CB0; stroke-linecap: butt;' />
<circle cx='250.77' cy='187.72' r='3.56' style='stroke-width: 0.71; stroke: none; stroke-linecap: butt; fill: #2B6CB0;' />
<circle cx='312.89' cy='230.99' r='3.56' style='stroke-width: 0.71; stroke: none; stroke-linecap: butt; fill: #C05621;' />
<circle cx='324.22' cy='233.87' r='3.56' style='stroke-width: 0.71; stroke: #C05621; stroke-linecap: butt;' />
<circle cx='237.38' cy='270.93' r='3.56' style='stroke-width: 0.71; stroke: none; stroke-linecap: butt; fill: #C05621;' />
<circle cx='246.24' cy='211.27' r='3.56' style='stroke-width: 0.71; stroke: none; stroke-linecap: butt; fill: #2B6CB0;' />
<circle cx='197.26' cy='216.16' r='3.56' style='stroke-width: 0.71; stroke: none; stroke-linecap: butt; fill: #2B6CB0;' />
<circle cx='284.22' cy='294.84' r='3.56' style='stroke-width: 0.71; stroke: #C05621; stroke-linecap: butt;' />
<circle cx='227.52' cy='248.09' r='3.56' style='stroke-width: 0.71; stroke: none; stroke-linecap: butt; fill: #2B6CB0;' />
</g>
<g clip-path='url(#cpMC4wMHw1NzYuMDB8MC4wMHw0MzIuMDA=)'>
<rect x='471.77' y='160.75' width='50.20' height='51.65' style='stroke-width: 0.00; stroke: none;' /> fill: #F5F6F8;' />
<text x='471.77' y='170.60' style='font-size: 12.00px; font-weight: bold;fill: #2D3748; font-family: "Roboto", -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif;' textLength='25.33px' lengthAdjust='spacingAndGlyphs'>Side</text>
<rect x='471.77' y='177.84' width='17.28' height='17.28' style='stroke-width: 0.00; stroke: none;' /> fill: #F5F6F8;' />
<circle cx='480.41' cy='186.48' r='3.56' style='stroke-width: 0.71; stroke: #2B6CB0; fill: #2B6CB0;' />
<rect x='471.77' y='195.12' width='17.28' height='17.28' style='stroke-width: 0.00; stroke: none;' /> fill: #F5F6F8;' />
<circle cx='480.41' cy='203.76' r='3.56' style='stroke-width: 0.71; stroke: #C05621; fill: #C05621;' />
<text x='495.03' y='190.42' style='font-size: 11.00px;fill: #2D3748; font-family: "Roboto", -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif;' textLength='25.09px' lengthAdjust='spacingAndGlyphs'>north</text>
<text x='495.03' y='207.70' style='font-size: 11.00px;fill: #2D3748; font-family: "Roboto", -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif;' textLength='26.94px' lengthAdjust='spacingAndGlyphs'>south</text>
<rect x='471.77' y='219.60' width='47.10' height='51.65' style='stroke-width: 0.00; stroke: none;' /> fill: #F5F6F8;' />
<text x='471.77' y='229.46' style='font-size: 12.00px; font-weight: bold;fill: #2D3748; font-family: "Roboto", -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif;' textLength='32.02px' lengthAdjust='spacingAndGlyphs'>Class</text>
<rect x='471.77' y='236.69' width='17.28' height='17.28' style='stroke-width: 0.00; stroke: none;' /> fill: #F5F6F8;' />
<circle cx='480.41' cy='245.33' r='3.56' style='stroke-width: 0.71; stroke: none; fill: #000000;' />
<rect x='471.77' y='253.97' width='17.28' height='17.28' style='stroke-width: 0.00; stroke: none;' /> fill: #F5F6F8;' />
<circle cx='480.41' cy='262.61' r='3.56' style='stroke-width: 0.71;' />
<text x='495.03' y='249.27' style='font-size: 11.00px;fill: #2D3748; font-family: "Roboto", -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif;' textLength='23.84px' lengthAdjust='spacingAndGlyphs'>Core</text>
<text x='495.03' y='266.55' style='font-size: 11.00px;fill: #2D3748; font-family: "Roboto", -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif;' textLength='22.62px' lengthAdjust='spacingAndGlyphs'>Halo</text>
</g>
</g>
</svg></div><p class="caption">
Border classification. Points are classified by side (blue vs orange)
and distance (core vs halo) from the border line.
</p>
</div>
<p>The <code><a href="../reference/aoe_border.html">aoe_border()</a></code> function:</p>
<ul>
<li><p>Creates symmetric buffer zones on both sides of the
border</p></li>
<li><p>Classifies points as “core” (near border) or “halo” (farther
away)</p></li>
<li><p>Assigns each point to a side based on position relative to the
line</p></li>
</ul>
<div class="section level3">
<h3 id="area-based-border-zones">Area-Based Border Zones<a class="anchor" aria-label="anchor" href="#area-based-border-zones"></a>
</h3>
<p>Use the <code>area</code> parameter to specify target zone areas
instead of fixed widths:</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Each side's core zone has area 5000 (in CRS units²)</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe_border.html">aoe_border</a></span><span class="op">(</span><span class="va">pts</span>, <span class="va">border</span>, area <span class="op">=</span> <span class="fl">5000</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="sampling-from-border-results">Sampling from Border Results<a class="anchor" aria-label="anchor" href="#sampling-from-border-results"></a>
</h3>
<p><code><a href="../reference/aoe_sample.html">aoe_sample()</a></code> also works with border results, allowing
stratification by side or class:</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Balance by side (equal north/south)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span></span>
<span><span class="va">balanced_side</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe_sample.html">aoe_sample</a></span><span class="op">(</span><span class="va">result_border</span>, ratio <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>north <span class="op">=</span> <span class="fl">0.5</span>, south <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">balanced_side</span><span class="op">$</span><span class="va">side</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; north south </span></span>
<span><span class="co">#&gt;    12    12</span></span>
<span></span>
<span><span class="co"># Balance by distance class</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span></span>
<span><span class="va">balanced_class</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe_sample.html">aoe_sample</a></span><span class="op">(</span><span class="va">result_border</span>, by <span class="op">=</span> <span class="st">"class"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">balanced_class</span><span class="op">$</span><span class="va">aoe_class</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; core halo </span></span>
<span><span class="co">#&gt;   11   11</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="diagnostics">Diagnostics<a class="anchor" aria-label="anchor" href="#diagnostics"></a>
</h2>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/aoe_summary.html">aoe_summary</a></span><span class="op">(</span><span class="va">result</span><span class="op">)</span></span>
<span><span class="co">#&gt;   support_id n_total n_core n_halo prop_core prop_halo</span></span>
<span><span class="co">#&gt; 1          1       4      3      1      0.75      0.25</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="summary">Summary<a class="anchor" aria-label="anchor" href="#summary"></a>
</h2>
<ul>
<li><p><code><a href="../reference/aoe.html">aoe()</a></code> classifies points as “core” or “halo”</p></li>
<li><p>Works with dataframes or sf objects</p></li>
<li><p>Pass country codes directly: <code>aoe(df, "AT")</code></p></li>
<li><p>Area-based halos enable consistent cross-country
comparisons</p></li>
<li><p>Use <code>mask</code> for coastlines and hard boundaries</p></li>
<li><p>Use <code>area</code> parameter for target halo area (accounts
for masking)</p></li>
<li><p>Use <code><a href="../reference/aoe_expand.html">aoe_expand()</a></code> for adaptive expansion to capture
minimum points</p></li>
<li><p>Use <code><a href="../reference/aoe_sample.html">aoe_sample()</a></code> for balanced core/halo
sampling</p></li>
<li><p>Use <code><a href="../reference/aoe_border.html">aoe_border()</a></code> for border/line-based
classification</p></li>
<li><p>Use <code><a href="../reference/aoe_summary.html">aoe_summary()</a></code> for diagnostics</p></li>
</ul>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Gilles Colling.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  
<script>
/* SVG Copy Button Functionality */
(function() {
  "use strict";

  // Initialize SVG copy buttons after DOM is ready
  document.addEventListener("DOMContentLoaded", function() {
    if (typeof ClipboardJS === "undefined") {
      console.warn("ClipboardJS not loaded - SVG copy buttons disabled");
      return;
    }

    // Initialize clipboard for SVG copy buttons
    var svgClipboard = new ClipboardJS(".btn-copy-svg", {
      text: function(trigger) {
        var container = trigger.closest(".svg-container");
        if (!container) return "";

        var svg = container.querySelector("svg");
        if (!svg) return "";

        // Clone SVG to avoid modifying the original
        var clone = svg.cloneNode(true);

        // Remove inline-svg class (not needed in copied version)
        clone.classList.remove("inline-svg");

        // Add XML declaration and serialize
        var serializer = new XMLSerializer();
        var svgString = serializer.serializeToString(clone);

        // Add XML declaration if not present
        if (!svgString.startsWith("<?xml")) {
          svgString = '<?xml version="1.0" encoding="UTF-8"?>\n' + svgString;
        }

        return svgString;
      }
    });

    // Handle success
    svgClipboard.on("success", function(e) {
      var btn = e.trigger;
      var originalTitle = btn.getAttribute("data-bs-original-title") || btn.getAttribute("title");

      // Update tooltip to show "Copied!"
      btn.setAttribute("data-bs-original-title", "Copied!");
      var tooltip = bootstrap.Tooltip.getInstance(btn);
      if (tooltip) {
        tooltip.show();
      }

      // Reset after delay
      setTimeout(function() {
        btn.setAttribute("data-bs-original-title", originalTitle);
      }, 1500);

      e.clearSelection();
    });

    // Handle error
    svgClipboard.on("error", function(e) {
      var btn = e.trigger;
      btn.setAttribute("data-bs-original-title", "Press Ctrl+C to copy");
      var tooltip = bootstrap.Tooltip.getInstance(btn);
      if (tooltip) {
        tooltip.show();
      }
    });

    // Initialize tooltips for SVG copy buttons
    var svgCopyButtons = document.querySelectorAll(".btn-copy-svg");
    svgCopyButtons.forEach(function(btn) {
      new bootstrap.Tooltip(btn, { container: "body" });
    });
  });
})();
</script>
</body>
</html>
