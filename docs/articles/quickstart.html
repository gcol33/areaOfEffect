<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Quick Start • areaOfEffect</title>
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Quick Start">
</head>
<body>
<p>








  pkgdown/mathjax-config.html

  

  </p>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">areaOfEffect</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.5</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/quickstart.html">Get Started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/quickstart.html">Quick Start</a></li>
    <li><a class="dropdown-item" href="../articles/theory.html">Theory</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/gcol33/areaOfEffect" aria-label="GitHub"><span class="fa fab fa-github"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Quick Start</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/gcol33/areaOfEffect/blob/HEAD/vignettes/quickstart.Rmd" class="external-link"><code>vignettes/quickstart.Rmd</code></a></small>
      <div class="d-none name"><code>quickstart.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>The <code>areaOfEffect</code> package classifies spatial points by
their position relative to a region’s boundary—without requiring sf
expertise.</p>
<p><strong>Dataframe in → dataframe out.</strong></p>
<p>Points are classified as:</p>
<ul>
<li><p><strong>Core</strong>: inside the original support</p></li>
<li><p><strong>Halo</strong>: outside the original but inside the area
of effect</p></li>
<li><p><strong>Pruned</strong>: outside the AoE entirely
(removed)</p></li>
</ul>
<p>By default, halos are defined as <strong>equal area to the
core</strong>—a proportion-based definition that enables consistent
cross-region comparisons.</p>
</div>
<div class="section level2">
<h2 id="getting-started">Getting Started<a class="anchor" aria-label="anchor" href="#getting-started"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://gillescolling.com/areaOfEffect/" class="external-link">areaOfEffect</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="from-a-dataframe">From a Dataframe<a class="anchor" aria-label="anchor" href="#from-a-dataframe"></a>
</h3>
<p>The simplest usage: pass a dataframe with coordinates and a country
name.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Your occurrence data</span></span>
<span><span class="va">observations</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  species <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Oak"</span>, <span class="st">"Beech"</span>, <span class="st">"Pine"</span>, <span class="st">"Spruce"</span><span class="op">)</span>,</span>
<span>  lon <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">14.5</span>, <span class="fl">15.2</span>, <span class="fl">16.8</span>, <span class="fl">20.0</span><span class="op">)</span>,</span>
<span>  lat <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">47.5</span>, <span class="fl">48.1</span>, <span class="fl">47.2</span>, <span class="fl">48.5</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Classify relative to Austria</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe.html">aoe</a></span><span class="op">(</span><span class="va">observations</span>, <span class="st">"Austria"</span><span class="op">)</span></span>
<span><span class="va">result</span><span class="op">$</span><span class="va">aoe_class</span></span>
<span><span class="co">#&gt; [1] "core" "core" "halo"</span></span></code></pre></div>
<p>The package auto-detects coordinate columns (lon/lat, x/y,
longitude/latitude, etc.).</p>
</div>
<div class="section level3">
<h3 id="from-sf-objects">From sf Objects<a class="anchor" aria-label="anchor" href="#from-sf-objects"></a>
</h3>
<p>sf objects work directly:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe.html">aoe</a></span><span class="op">(</span><span class="va">pts_sf</span>, <span class="st">"AT"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="austria-example">Austria Example<a class="anchor" aria-label="anchor" href="#austria-example"></a>
</h2>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get Austria and transform to equal-area projection</span></span>
<span><span class="va">austria</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_country.html">get_country</a></span><span class="op">(</span><span class="st">"AT"</span><span class="op">)</span></span>
<span><span class="va">austria_ea</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_transform.html" class="external-link">st_transform</a></span><span class="op">(</span><span class="va">austria</span>, <span class="st">"ESRI:54009"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create a point inside Austria</span></span>
<span><span class="va">dummy_pt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_unary.html" class="external-link">st_centroid</a></span><span class="op">(</span><span class="va">austria_ea</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: st_centroid assumes attributes are constant over geometries</span></span>
<span></span>
<span><span class="co"># Run aoe() to get geometries (uses buffer method by default)</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe.html">aoe</a></span><span class="op">(</span><span class="va">dummy_pt</span>, <span class="va">austria_ea</span><span class="op">)</span></span>
<span><span class="va">geoms</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe_geometry.html">aoe_geometry</a></span><span class="op">(</span><span class="va">result</span>, <span class="st">"both"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Extract geometries</span></span>
<span><span class="va">austria_geom</span> <span class="op">&lt;-</span> <span class="va">geoms</span><span class="op">[</span><span class="va">geoms</span><span class="op">$</span><span class="va">type</span> <span class="op">==</span> <span class="st">"original"</span>, <span class="op">]</span></span>
<span><span class="va">aoe_geom</span> <span class="op">&lt;-</span> <span class="va">geoms</span><span class="op">[</span><span class="va">geoms</span><span class="op">$</span><span class="va">type</span> <span class="op">==</span> <span class="st">"aoe"</span>, <span class="op">]</span></span>
<span></span>
<span><span class="co"># Plot</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>, bty <span class="op">=</span> <span class="st">"n"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_geometry</a></span><span class="op">(</span><span class="va">aoe_geom</span><span class="op">)</span>, border <span class="op">=</span> <span class="st">"steelblue"</span>, lty <span class="op">=</span> <span class="fl">2</span>, lwd <span class="op">=</span> <span class="fl">1.5</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_geometry</a></span><span class="op">(</span><span class="va">austria_geom</span><span class="op">)</span>, border <span class="op">=</span> <span class="st">"black"</span>, lwd <span class="op">=</span> <span class="fl">2</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/legend.html" class="external-link">legend</a></span><span class="op">(</span><span class="st">"topright"</span>,</span>
<span>       legend <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Austria (core)"</span>, <span class="st">"Area of Effect"</span><span class="op">)</span>,</span>
<span>       col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"black"</span>, <span class="st">"steelblue"</span><span class="op">)</span>,</span>
<span>       lty <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>       lwd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">1.5</span><span class="op">)</span>,</span>
<span>       inset <span class="op">=</span> <span class="fl">0.02</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<div class="svg-container"><button type="button" class="btn btn-primary btn-copy-svg" title="Copy SVG to clipboard" aria-label="Copy SVG to clipboard" data-bs-toggle="tooltip" data-bs-placement="left"><i class="fa fa-copy"></i></button>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='576.00pt' height='432.00pt' viewBox='0 0 576.00 432.00' class="r-plt inline-svg" style="max-width:100%;width:100%;height:auto;">
<g class='svglite'>
<defs>
  <style type='text/css'><![CDATA[
    /* theme-aware-processed */
    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite circle {
      fill: none;
      stroke: #3E3F3A;
      stroke-linecap: round;
      stroke-linejoin: round;
      stroke-miterlimit: 10.00;
    }
    .svglite > g > rect {
      fill: none;
      stroke: #3E3F3A;
      stroke-linecap: round;
      stroke-linejoin: round;
      stroke-miterlimit: 10.00;
    }
    .svglite text {
      white-space: pre;
      fill: #3E3F3A;
    }
    .svglite g.glyphgroup path {
      fill: inherit;
      stroke: none;
    }
  ]]></style>
</defs>
<rect width='100%' height='100%' style='stroke: none; fill: #F5F6F8;'/>
<defs>
  <clipPath id='cpMC4wMHw1NzYuMDB8MC4wMHw0MzIuMDA='>
    <rect x='0.00' y='0.00' width='576.00' height='432.00' />
  </clipPath>
</defs>
<g clip-path='url(#cpMC4wMHw1NzYuMDB8MC4wMHw0MzIuMDA=)'>
</g>
<defs>
  <clipPath id='cpMTQuNDB8NTYxLjYwfDE0LjQwfDQxNy42MA=='>
    <rect x='14.40' y='14.40' width='547.20' height='403.20' />
  </clipPath>
</defs>
<g clip-path='url(#cpMTQuNDB8NTYxLjYwfDE0LjQwfDQxNy42MA==)'>
<rect class='legend-bg' x='14.40' y='14.40' width='547.20' height='403.20' style='stroke-width: 0.75; stroke: #F5F6F8; fill: #F5F6F8;' />
<path d='M 37.22 242.57 L 36.64 241.06 L 36.08 239.33 L 35.61 237.57 L 35.24 235.79 L 34.96 233.99 L 34.76 232.18 L 34.67 230.36 L 34.67 228.54 L 34.76 226.72 L 34.94 224.91 L 35.22 223.11 L 35.60 221.32 L 36.06 219.56 L 36.62 217.83 L 37.26 216.12 L 37.99 214.45 L 38.81 212.83 L 39.70 211.24 L 40.68 209.71 L 41.74 208.22 L 42.88 206.80 L 44.08 205.43 L 45.36 204.13 L 46.69 202.90 L 48.10 201.74 L 49.56 200.65 L 51.07 199.64 L 52.64 198.70 L 54.02 197.93 L 55.62 197.08 L 57.27 196.32 L 58.95 195.64 L 60.67 195.05 L 62.41 194.55 L 64.18 194.14 L 65.97 193.83 L 67.26 193.66 L 68.59 193.05 L 70.31 192.36 L 72.06 191.76 L 73.84 191.26 L 75.64 190.84 L 77.46 190.53 L 79.30 190.31 L 81.14 190.19 L 82.99 190.16 L 84.84 190.23 L 86.68 190.40 L 88.51 190.67 L 90.32 191.03 L 92.12 191.48 L 93.88 192.03 L 99.27 193.86 L 101.02 194.51 L 102.73 195.24 L 105.54 196.55 L 105.98 196.29 L 107.63 195.46 L 109.31 194.71 L 111.03 194.05 L 112.79 193.48 L 114.57 193.01 L 116.37 192.63 L 118.20 192.34 L 120.03 192.15 L 121.87 192.06 L 123.71 192.06 L 125.55 192.16 L 127.39 192.35 L 129.10 192.63 L 134.01 192.42 L 135.98 192.39 L 137.95 192.48 L 139.92 192.67 L 141.87 192.97 L 143.80 193.38 L 145.70 193.90 L 147.36 194.46 L 149.53 194.55 L 151.38 194.67 L 153.22 194.89 L 155.05 195.21 L 156.86 195.62 L 158.64 196.13 L 160.39 196.73 L 162.11 197.42 L 163.79 198.20 L 165.43 199.07 L 166.03 199.43 L 167.01 199.06 L 167.80 198.79 L 170.29 197.28 L 172.00 196.31 L 173.77 195.43 L 175.58 194.66 L 177.43 193.98 L 185.44 191.32 L 187.25 190.78 L 189.09 190.33 L 190.95 189.98 L 192.83 189.73 L 199.22 189.05 L 200.20 188.11 L 201.62 186.88 L 203.11 185.73 L 204.66 184.65 L 206.27 183.66 L 207.92 182.76 L 209.62 181.95 L 211.37 181.23 L 213.14 180.61 L 214.95 180.08 L 216.79 179.65 L 217.35 179.55 L 217.49 178.41 L 217.80 176.64 L 218.20 174.90 L 218.68 173.17 L 219.25 171.48 L 219.91 169.81 L 220.65 168.18 L 221.48 166.59 L 222.38 165.04 L 225.00 160.81 L 226.00 159.29 L 227.08 157.81 L 228.24 156.39 L 229.46 155.04 L 230.76 153.75 L 232.12 152.53 L 233.54 151.38 L 237.94 148.02 L 239.28 147.05 L 240.66 146.14 L 242.08 145.29 L 252.04 139.69 L 253.75 138.80 L 254.24 138.57 L 254.60 137.28 L 255.18 135.56 L 255.86 133.87 L 256.61 132.22 L 257.46 130.61 L 258.38 129.04 L 259.38 127.53 L 260.46 126.07 L 261.62 124.66 L 262.84 123.32 L 264.13 122.05 L 264.31 121.86 L 265.61 120.59 L 266.97 119.39 L 268.39 118.26 L 269.86 117.21 L 271.39 116.23 L 272.97 115.33 L 274.59 114.52 L 276.25 113.78 L 276.40 113.73 L 276.92 112.87 L 277.96 111.34 L 279.08 109.86 L 280.28 108.45 L 281.55 107.10 L 282.89 105.82 L 284.29 104.61 L 285.76 103.48 L 287.28 102.43 L 288.86 101.45 L 290.48 100.57 L 292.15 99.77 L 293.86 99.05 L 295.61 98.43 L 297.39 97.90 L 299.19 97.47 L 301.01 97.13 L 302.84 96.89 L 304.69 96.74 L 306.54 96.69 L 308.39 96.74 L 310.24 96.89 L 312.08 97.13 L 313.90 97.47 L 315.70 97.90 L 317.47 98.43 L 319.17 98.98 L 320.82 99.57 L 322.45 100.24 L 324.04 100.99 L 328.99 103.48 L 330.42 104.23 L 331.81 105.06 L 333.16 105.94 L 335.85 107.80 L 336.09 106.66 L 336.57 104.89 L 337.14 103.16 L 337.80 101.45 L 338.54 99.78 L 339.38 98.15 L 340.29 96.57 L 341.29 95.03 L 342.36 93.55 L 343.39 92.21 L 344.53 90.80 L 345.73 89.45 L 347.01 88.17 L 348.35 86.95 L 349.75 85.80 L 351.21 84.73 L 352.73 83.73 L 354.29 82.82 L 355.89 81.98 L 357.54 81.23 L 359.23 80.56 L 360.94 79.98 L 362.69 79.49 L 364.45 79.09 L 366.24 78.79 L 368.04 78.57 L 369.84 78.45 L 371.65 78.42 L 373.46 78.48 L 377.67 78.73 L 379.44 78.88 L 381.19 79.12 L 382.92 79.45 L 384.64 79.86 L 386.34 80.36 L 387.10 80.63 L 388.65 80.54 L 390.51 80.54 L 392.38 80.63 L 394.24 80.82 L 396.08 81.11 L 397.91 81.50 L 403.33 82.79 L 405.02 83.24 L 406.67 83.77 L 408.30 84.38 L 409.90 85.07 L 418.47 89.03 L 421.03 89.09 L 422.83 89.17 L 424.62 89.35 L 426.40 89.62 L 428.16 89.98 L 429.91 90.43 L 431.63 90.96 L 433.31 91.59 L 434.97 92.30 L 436.58 93.09 L 438.16 93.97 L 443.71 97.25 L 445.06 96.66 L 446.76 96.03 L 448.48 95.48 L 450.24 95.02 L 452.01 94.66 L 453.80 94.38 L 455.60 94.20 L 457.41 94.11 L 459.22 94.11 L 461.03 94.21 L 464.82 94.51 L 466.88 94.74 L 468.92 95.08 L 470.93 95.55 L 472.92 96.13 L 476.37 97.25 L 478.33 97.95 L 480.25 98.77 L 482.11 99.70 L 484.97 101.23 L 486.85 101.57 L 488.89 102.06 L 491.90 102.89 L 493.70 103.44 L 495.47 104.08 L 497.20 104.81 L 498.88 105.64 L 500.52 106.55 L 502.11 107.55 L 503.65 108.64 L 505.12 109.80 L 506.53 111.04 L 507.88 112.36 L 509.15 113.74 L 510.34 115.19 L 511.46 116.71 L 512.49 118.28 L 513.44 119.90 L 514.90 122.57 L 515.38 123.14 L 516.47 124.59 L 517.48 126.09 L 518.42 127.64 L 519.27 129.23 L 520.04 130.87 L 520.73 132.54 L 521.32 134.25 L 521.83 135.98 L 522.25 137.74 L 522.58 139.52 L 522.82 141.31 L 522.97 143.11 L 523.02 144.92 L 522.98 146.69 L 523.00 147.09 L 523.04 148.92 L 522.98 150.74 L 522.83 152.57 L 522.59 154.38 L 522.38 155.52 L 523.20 156.97 L 528.64 164.11 L 529.25 164.96 L 530.08 165.69 L 531.41 166.99 L 532.67 168.36 L 533.85 169.80 L 534.96 171.29 L 535.99 172.84 L 536.93 174.44 L 537.79 176.09 L 538.56 177.78 L 539.24 179.51 L 539.82 181.28 L 540.32 183.07 L 540.71 184.89 L 541.02 186.72 L 541.22 188.57 L 541.33 190.43 L 541.33 192.29 L 541.24 194.14 L 541.05 195.99 L 540.77 197.83 L 540.39 199.65 L 539.91 201.45 L 539.34 203.22 L 538.74 204.76 L 539.21 206.44 L 539.61 208.25 L 539.92 210.08 L 540.13 211.92 L 540.24 213.77 L 540.25 215.63 L 540.17 217.48 L 539.99 219.33 L 539.71 221.16 L 539.34 222.98 L 538.87 224.77 L 538.30 226.54 L 537.65 228.27 L 536.90 229.97 L 536.07 231.63 L 535.14 233.24 L 534.14 234.80 L 533.06 236.30 L 531.89 237.75 L 530.66 239.13 L 529.35 240.45 L 527.97 241.69 L 526.53 242.86 L 525.03 243.95 L 523.48 244.97 L 521.87 245.89 L 520.22 246.74 L 518.53 247.49 L 516.79 248.16 L 515.03 248.73 L 514.99 248.74 L 514.86 249.09 L 514.12 250.72 L 513.31 252.31 L 512.83 253.13 L 513.20 254.90 L 513.48 256.80 L 513.67 258.72 L 513.74 260.65 L 513.72 262.58 L 513.62 264.83 L 513.55 267.24 L 513.45 269.04 L 513.26 270.83 L 512.98 272.61 L 512.47 275.40 L 512.19 276.74 L 511.92 277.98 L 511.46 279.79 L 510.91 281.57 L 510.26 283.32 L 509.53 285.03 L 508.70 286.70 L 507.78 288.33 L 506.79 289.90 L 505.71 291.42 L 504.55 292.88 L 503.31 294.28 L 502.00 295.61 L 500.63 296.87 L 499.19 298.05 L 497.68 299.16 L 496.13 300.18 L 494.52 301.12 L 492.86 301.97 L 491.25 302.75 L 489.56 303.51 L 487.84 304.18 L 486.90 304.49 L 486.85 304.66 L 486.25 306.39 L 485.57 308.09 L 484.79 309.76 L 484.71 309.91 L 484.00 311.50 L 483.17 313.14 L 482.25 314.72 L 481.26 316.26 L 480.18 317.74 L 479.03 319.16 L 477.81 320.53 L 476.51 321.82 L 475.16 323.05 L 473.74 324.21 L 472.26 325.29 L 470.73 326.29 L 469.14 327.21 L 467.51 328.05 L 465.84 328.80 L 464.14 329.46 L 462.40 330.04 L 460.63 330.52 L 458.84 330.91 L 457.04 331.21 L 455.22 331.41 L 453.39 331.52 L 451.56 331.53 L 449.73 331.45 L 447.91 331.27 L 446.10 331.00 L 444.30 330.63 L 442.74 330.27 L 441.22 330.91 L 439.46 331.55 L 433.51 333.54 L 431.82 334.05 L 430.10 334.48 L 428.37 334.83 L 426.62 335.08 L 424.86 335.25 L 423.09 335.33 L 421.33 335.33 L 419.56 335.23 L 409.70 334.44 L 409.47 334.46 L 409.41 334.54 L 408.05 335.90 L 406.63 337.20 L 405.14 338.41 L 403.58 339.54 L 399.44 342.37 L 397.86 343.40 L 397.33 343.70 L 395.93 344.88 L 394.42 346.01 L 392.95 347.06 L 391.39 348.11 L 389.79 349.07 L 388.13 349.94 L 386.43 350.73 L 384.70 351.42 L 382.92 352.02 L 381.12 352.53 L 379.29 352.93 L 377.45 353.25 L 375.59 353.46 L 373.72 353.57 L 371.85 353.58 L 369.98 353.50 L 368.12 353.31 L 366.27 353.03 L 364.44 352.65 L 362.63 352.17 L 361.31 351.75 L 359.75 351.44 L 358.02 351.00 L 357.12 350.73 L 351.62 350.12 L 349.72 349.85 L 339.66 348.17 L 337.91 347.83 L 336.17 347.40 L 334.46 346.88 L 331.09 345.77 L 328.06 345.07 L 325.35 344.59 L 322.44 344.45 L 320.16 344.27 L 317.89 343.94 L 315.25 343.47 L 313.86 343.19 L 304.58 341.13 L 299.88 341.02 L 298.39 340.96 L 296.91 340.83 L 286.06 339.66 L 284.59 339.47 L 283.13 339.22 L 261.36 335.00 L 258.95 334.44 L 255.54 333.52 L 252.61 333.27 L 250.63 333.03 L 248.66 332.69 L 241.51 331.23 L 239.77 330.83 L 238.05 330.34 L 236.35 329.76 L 234.69 329.10 L 229.11 326.71 L 227.49 325.97 L 225.90 325.14 L 224.36 324.24 L 222.87 323.25 L 221.43 322.20 L 220.04 321.07 L 218.71 319.87 L 217.45 318.60 L 216.25 317.28 L 212.36 312.75 L 211.33 311.49 L 210.36 310.18 L 208.07 306.95 L 207.44 307.01 L 205.70 307.10 L 201.26 307.21 L 199.60 307.21 L 197.94 307.14 L 196.29 306.98 L 194.64 306.75 L 193.01 306.44 L 192.91 306.42 L 192.10 306.59 L 191.52 306.70 L 191.25 307.10 L 190.14 308.60 L 188.94 310.04 L 187.67 311.42 L 186.33 312.73 L 184.62 314.31 L 183.20 315.55 L 181.71 316.72 L 180.16 317.81 L 178.56 318.81 L 176.91 319.72 L 175.21 320.54 L 173.46 321.27 L 171.68 321.91 L 169.87 322.45 L 168.04 322.89 L 166.18 323.24 L 162.38 323.83 L 160.33 324.09 L 158.28 324.23 L 156.22 324.25 L 154.16 324.15 L 148.36 323.69 L 146.60 323.51 L 144.85 323.24 L 143.12 322.88 L 141.40 322.43 L 139.71 321.90 L 135.53 320.47 L 133.80 319.82 L 132.11 319.09 L 130.45 318.27 L 129.00 317.45 L 127.55 317.38 L 125.68 317.19 L 123.82 316.91 L 121.98 316.52 L 120.48 316.12 L 119.06 316.55 L 117.26 316.98 L 115.44 317.32 L 113.61 317.56 L 111.76 317.71 L 109.91 317.76 L 108.06 317.71 L 106.22 317.56 L 104.39 317.32 L 102.57 316.98 L 100.77 316.55 L 99.00 316.02 L 90.78 313.34 L 89.12 312.76 L 87.49 312.09 L 85.90 311.34 L 84.34 310.51 L 77.03 306.36 L 75.45 305.42 L 73.93 304.39 L 72.47 303.29 L 71.06 302.11 L 69.72 300.86 L 69.71 300.85 L 68.94 300.71 L 67.13 300.27 L 65.34 299.75 L 63.58 299.12 L 61.86 298.41 L 60.18 297.60 L 58.55 296.71 L 56.96 295.74 L 55.43 294.68 L 53.96 293.54 L 52.54 292.32 L 51.20 291.03 L 49.92 289.67 L 48.72 288.25 L 47.60 286.76 L 46.55 285.22 L 45.59 283.63 L 44.72 281.98 L 43.93 280.29 L 43.23 278.57 L 42.63 276.80 L 42.12 275.01 L 41.70 273.20 L 41.38 271.36 L 41.16 269.51 L 41.12 268.86 L 41.11 268.82 L 40.48 267.06 L 39.95 265.27 L 39.63 263.98 L 39.39 263.29 L 39.37 263.21 L 38.82 261.88 L 38.20 260.09 L 37.67 258.27 L 37.24 256.42 L 36.91 254.56 L 36.69 252.68 L 36.56 250.79 L 36.54 248.90 L 36.62 247.00 L 36.80 245.12 L 37.08 243.25 L 37.22 242.57 Z' style='fill-rule: evenodd; stroke-width: 1.12; stroke: #4682B4; stroke-dasharray: 6.00,6.00;' />
<path d='M 72.39 250.68 L 71.74 249.40 L 75.68 239.85 L 76.15 233.92 L 71.71 230.44 L 69.86 229.41 L 71.24 228.63 L 77.19 229.28 L 80.76 227.31 L 82.55 225.36 L 87.94 227.20 L 95.95 230.90 L 99.79 233.40 L 101.46 235.33 L 102.44 236.95 L 102.22 239.73 L 104.07 240.81 L 107.73 241.23 L 110.22 242.09 L 109.70 245.74 L 109.81 248.77 L 113.12 248.35 L 117.11 246.03 L 120.01 241.88 L 121.66 237.86 L 122.30 228.08 L 122.75 227.25 L 125.33 228.02 L 135.49 227.60 L 140.47 229.42 L 148.12 229.72 L 148.12 231.26 L 149.71 233.65 L 153.42 237.10 L 155.30 239.35 L 158.89 239.75 L 164.23 238.50 L 167.31 237.22 L 168.60 238.13 L 173.51 237.24 L 177.65 234.45 L 178.53 232.33 L 182.84 230.84 L 188.52 227.40 L 196.53 224.74 L 223.39 221.90 L 224.21 219.76 L 223.28 214.85 L 223.92 214.12 L 227.47 215.35 L 233.08 216.49 L 237.47 218.23 L 240.46 220.50 L 242.99 220.59 L 246.74 219.00 L 251.92 217.98 L 257.14 220.33 L 258.87 222.88 L 258.14 224.19 L 258.47 226.26 L 260.21 227.99 L 264.56 230.81 L 270.01 233.23 L 272.67 233.05 L 273.40 230.69 L 273.71 225.08 L 273.37 219.09 L 271.79 215.66 L 268.91 214.82 L 265.56 214.55 L 263.71 213.84 L 264.11 211.96 L 266.20 207.08 L 265.41 200.57 L 258.58 193.16 L 252.58 186.01 L 252.32 183.57 L 254.93 179.35 L 259.33 175.98 L 269.29 170.38 L 272.50 169.22 L 276.69 168.28 L 282.59 165.98 L 285.28 163.62 L 286.96 161.06 L 288.22 147.72 L 288.83 147.15 L 289.59 146.37 L 300.96 150.96 L 301.84 150.20 L 303.56 149.45 L 306.63 145.93 L 307.07 143.25 L 306.35 138.19 L 306.06 133.41 L 306.54 131.90 L 308.24 132.45 L 313.19 134.94 L 317.23 137.72 L 321.58 144.75 L 329.88 146.62 L 340.07 146.80 L 343.30 143.67 L 346.50 142.95 L 350.36 143.90 L 358.37 145.01 L 358.48 139.32 L 362.21 133.43 L 363.98 131.34 L 369.76 131.55 L 370.57 127.15 L 370.31 114.96 L 371.33 113.62 L 375.55 113.87 L 380.01 116.10 L 381.51 117.90 L 383.65 117.75 L 386.51 116.53 L 389.71 115.73 L 395.14 117.03 L 407.13 122.57 L 413.20 124.59 L 416.81 124.21 L 420.25 124.28 L 434.75 132.85 L 444.19 134.05 L 452.65 134.08 L 454.97 131.50 L 458.24 129.31 L 462.04 129.61 L 465.49 130.73 L 472.44 134.45 L 475.54 135.41 L 479.56 136.01 L 482.57 136.84 L 486.13 143.31 L 487.81 145.04 L 487.69 145.84 L 487.83 148.78 L 486.18 152.49 L 484.53 157.36 L 485.34 161.62 L 493.76 176.42 L 500.62 185.43 L 502.19 188.87 L 506.14 191.50 L 503.28 194.83 L 503.38 199.76 L 501.54 201.96 L 501.40 204.77 L 502.70 207.34 L 503.17 210.54 L 505.05 214.97 L 499.81 215.93 L 493.38 215.78 L 491.12 216.03 L 489.15 217.24 L 486.84 216.64 L 480.44 212.49 L 477.03 211.58 L 474.76 211.83 L 473.29 213.64 L 470.66 215.95 L 468.10 217.57 L 468.93 219.00 L 481.50 222.74 L 484.48 228.48 L 482.85 233.16 L 482.40 235.45 L 479.84 237.26 L 476.61 238.84 L 472.49 239.24 L 472.36 241.77 L 475.08 249.21 L 473.98 250.83 L 472.98 253.14 L 475.11 259.27 L 477.77 259.70 L 478.54 261.10 L 478.44 263.58 L 478.36 266.22 L 477.84 269.02 L 477.57 270.26 L 475.96 271.04 L 470.52 270.63 L 466.24 273.02 L 458.13 281.62 L 455.06 283.08 L 452.01 286.52 L 453.27 294.09 L 452.88 294.78 L 452.23 296.33 L 440.70 293.66 L 440.32 293.71 L 432.98 294.68 L 428.33 298.15 L 422.38 300.14 L 409.22 299.08 L 396.71 300.43 L 393.84 301.44 L 390.62 302.02 L 387.79 304.04 L 386.39 306.88 L 383.69 310.49 L 379.55 313.32 L 374.94 315.50 L 374.00 317.33 L 372.53 318.39 L 369.64 317.01 L 367.44 317.08 L 364.62 316.14 L 355.53 315.13 L 345.47 313.45 L 340.59 311.84 L 335.11 310.56 L 329.26 309.53 L 324.11 309.29 L 321.47 308.81 L 308.83 306.01 L 300.69 305.83 L 289.83 304.66 L 268.07 300.43 L 261.68 298.72 L 255.70 298.20 L 248.55 296.74 L 242.97 294.35 L 239.08 289.82 L 234.80 283.79 L 227.32 275.92 L 225.54 272.01 L 227.21 268.57 L 229.02 265.98 L 228.66 264.87 L 226.99 264.31 L 215.68 267.66 L 204.81 271.90 L 200.37 272.01 L 195.96 271.07 L 190.24 271.01 L 184.85 272.14 L 173.89 272.72 L 167.74 275.85 L 164.21 281.95 L 162.44 286.87 L 160.72 288.45 L 156.92 289.05 L 151.12 288.59 L 146.94 287.16 L 142.43 282.96 L 135.98 282.38 L 130.10 282.27 L 128.48 281.49 L 128.33 278.76 L 125.55 273.62 L 121.58 272.01 L 112.54 281.69 L 109.91 282.55 L 101.69 279.87 L 94.38 275.73 L 93.35 272.70 L 92.01 270.22 L 85.96 267.87 L 78.53 266.26 L 76.22 266.26 L 77.00 264.80 L 77.65 262.33 L 76.94 260.36 L 75.07 258.32 L 73.95 256.14 L 73.50 254.02 L 72.83 252.29 L 72.39 250.68 Z' style='fill-rule: evenodd; stroke-width: 1.50;' />
<rect class='legend-bg' x='429.62' y='22.46' width='121.04' height='43.20' style='stroke-width: 0.75; fill: #F5F6F8;' />
<line x1='440.42' y1='36.86' x2='462.02' y2='36.86' style='stroke-width: 1.50;' />
<line x1='440.42' y1='51.26' x2='462.02' y2='51.26' style='stroke-width: 1.12; stroke: #4682B4; stroke-dasharray: 6.00,6.00;' />
<text x='472.82' y='41.16' style='font-size: 12.00px; font-family: "Roboto", -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif;' textLength='72.02px' lengthAdjust='spacingAndGlyphs'>Austria (core)</text>
<text x='472.82' y='55.56' style='font-size: 12.00px; font-family: "Roboto", -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif;' textLength='72.44px' lengthAdjust='spacingAndGlyphs'>Area of Effect</text>
</g>
</g>
</svg></div><p class="caption">
Austria (dark) with its area of effect (blue dashed). The halo has equal
area to the core.
</p>
</div>
</div>
<div class="section level2">
<h2 id="basic-usage-with-custom-polygons">Basic Usage with Custom Polygons<a class="anchor" aria-label="anchor" href="#basic-usage-with-custom-polygons"></a>
</h2>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">support</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>  geometry <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html" class="external-link">st_sfc</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_polygon</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">100</span>, <span class="fl">100</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">100</span>, <span class="fl">100</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  crs <span class="op">=</span> <span class="fl">32631</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Create observation points:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pts</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">5</span>,</span>
<span>    value <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">20</span>, <span class="fl">15</span>, <span class="fl">25</span>, <span class="fl">30</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  geometry <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html" class="external-link">st_sfc</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">50</span>, <span class="fl">50</span><span class="op">)</span><span class="op">)</span>,   <span class="co"># center</span></span>
<span>    <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">10</span><span class="op">)</span><span class="op">)</span>,   <span class="co"># near corner</span></span>
<span>    <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">95</span>, <span class="fl">50</span><span class="op">)</span><span class="op">)</span>,   <span class="co"># near edge</span></span>
<span>    <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">120</span>, <span class="fl">50</span><span class="op">)</span><span class="op">)</span>,  <span class="co"># outside, in halo</span></span>
<span>    <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">250</span>, <span class="fl">250</span><span class="op">)</span><span class="op">)</span>  <span class="co"># far outside</span></span>
<span>  <span class="op">)</span>,</span>
<span>  crs <span class="op">=</span> <span class="fl">32631</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Apply the area of effect:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe.html">aoe</a></span><span class="op">(</span><span class="va">pts</span>, <span class="va">support</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">result</span><span class="op">)</span></span>
<span><span class="co">#&gt; Area of Effect Result</span></span>
<span><span class="co">#&gt; ─────────────────────</span></span>
<span><span class="co">#&gt; Points:   4 (3 core, 1 halo)</span></span>
<span><span class="co">#&gt; Supports: 1</span></span>
<span><span class="co">#&gt; Scale:    0.414 (multiplier 1.41, theoretical halo:core 1.00)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Simple feature collection with 4 features and 5 fields</span></span>
<span><span class="co">#&gt; Geometry type: POINT</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: 10 ymin: 10 xmax: 120 ymax: 50</span></span>
<span><span class="co">#&gt; Projected CRS: WGS 84 / UTM zone 31N</span></span>
<span><span class="co">#&gt;   point_id support_id aoe_class id value       geometry</span></span>
<span><span class="co">#&gt; 1        1          1      core  1    10  POINT (50 50)</span></span>
<span><span class="co">#&gt; 2        2          1      core  2    20  POINT (10 10)</span></span>
<span><span class="co">#&gt; 3        3          1      core  3    15  POINT (95 50)</span></span>
<span><span class="co">#&gt; 4        4          1      halo  4    25 POINT (120 50)</span></span></code></pre></div>
<p>The result contains only points inside the AoE, with their
classification:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">result</span><span class="op">$</span><span class="va">aoe_class</span></span>
<span><span class="co">#&gt; [1] "core" "core" "core" "halo"</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="multiple-supports">Multiple Supports<a class="anchor" aria-label="anchor" href="#multiple-supports"></a>
</h2>
<p>Process multiple regions at once:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Two adjacent regions</span></span>
<span><span class="va">supports</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>region <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  geometry <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html" class="external-link">st_sfc</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_polygon</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">50</span>, <span class="fl">50</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">100</span>, <span class="fl">100</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_polygon</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">50</span>, <span class="fl">100</span>, <span class="fl">100</span>, <span class="fl">50</span>, <span class="fl">50</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">100</span>, <span class="fl">100</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  crs <span class="op">=</span> <span class="fl">32631</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Points that may fall in overlapping AoEs</span></span>
<span><span class="va">pts_multi</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span>,</span>
<span>  geometry <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html" class="external-link">st_sfc</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">25</span>, <span class="fl">50</span><span class="op">)</span><span class="op">)</span>,   <span class="co"># inside A</span></span>
<span>    <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">50</span>, <span class="fl">50</span><span class="op">)</span><span class="op">)</span>,   <span class="co"># on boundary</span></span>
<span>    <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">75</span>, <span class="fl">50</span><span class="op">)</span><span class="op">)</span>    <span class="co"># inside B</span></span>
<span>  <span class="op">)</span>,</span>
<span>  crs <span class="op">=</span> <span class="fl">32631</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">result_multi</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe.html">aoe</a></span><span class="op">(</span><span class="va">pts_multi</span>, <span class="va">supports</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">result_multi</span><span class="op">)</span></span>
<span><span class="co">#&gt; Area of Effect Result</span></span>
<span><span class="co">#&gt; ─────────────────────</span></span>
<span><span class="co">#&gt; Points:   4 (4 core, 0 halo)</span></span>
<span><span class="co">#&gt; Supports: 2</span></span>
<span><span class="co">#&gt; Scale:    0.414 (multiplier 1.41, theoretical halo:core 1.00)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Simple feature collection with 4 features and 4 fields</span></span>
<span><span class="co">#&gt; Geometry type: POINT</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: 25 ymin: 50 xmax: 75 ymax: 50</span></span>
<span><span class="co">#&gt; Projected CRS: WGS 84 / UTM zone 31N</span></span>
<span><span class="co">#&gt;   point_id support_id aoe_class id      geometry</span></span>
<span><span class="co">#&gt; 1        1          1      core  1 POINT (25 50)</span></span>
<span><span class="co">#&gt; 2        2          1      core  2 POINT (50 50)</span></span>
<span><span class="co">#&gt; 3        2          2      core  2 POINT (50 50)</span></span>
<span><span class="co">#&gt; 4        3          2      core  3 POINT (75 50)</span></span></code></pre></div>
<p>Points can appear multiple times (once per support whose AoE contains
them).</p>
</div>
<div class="section level2">
<h2 id="using-a-mask-coastlines">Using a Mask (Coastlines)<a class="anchor" aria-label="anchor" href="#using-a-mask-coastlines"></a>
</h2>
<p>For coastal regions, sea is a hard boundary. Provide a mask to
constrain the AoE:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create a coastal support</span></span>
<span><span class="va">support_coast</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>  geometry <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html" class="external-link">st_sfc</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_polygon</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">40</span>, <span class="fl">80</span>, <span class="fl">80</span>, <span class="fl">40</span>, <span class="fl">40</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">20</span>, <span class="fl">20</span>, <span class="fl">60</span>, <span class="fl">60</span>, <span class="fl">20</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  crs <span class="op">=</span> <span class="fl">32631</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create land mask (irregular coastline)</span></span>
<span><span class="va">land_mask</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>  geometry <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html" class="external-link">st_sfc</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_polygon</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">100</span>, <span class="fl">100</span>, <span class="fl">70</span>, <span class="fl">50</span>, <span class="fl">30</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">50</span>, <span class="fl">60</span>, <span class="fl">55</span>, <span class="fl">70</span>, <span class="fl">60</span>, <span class="fl">0</span><span class="op">)</span></span>
<span>  <span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  crs <span class="op">=</span> <span class="fl">32631</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create sea area (inverse of land for visualization)</span></span>
<span><span class="va">sea_area</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span></span>
<span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span> geometry <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html" class="external-link">st_sfc</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_polygon</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span></span>
<span>   <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">20</span>, <span class="fl">120</span>, <span class="fl">120</span>, <span class="op">-</span><span class="fl">20</span>, <span class="op">-</span><span class="fl">20</span><span class="op">)</span>,</span>
<span>   <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">20</span>, <span class="op">-</span><span class="fl">20</span>, <span class="fl">100</span>, <span class="fl">100</span>, <span class="op">-</span><span class="fl">20</span><span class="op">)</span></span>
<span> <span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span> crs <span class="op">=</span> <span class="fl">32631</span></span>
<span><span class="op">)</span></span>
<span><span class="va">sea_area</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_binary_ops.html" class="external-link">st_difference</a></span><span class="op">(</span><span class="va">sea_area</span>, <span class="va">land_mask</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: attribute variables are assumed to be spatially constant throughout</span></span>
<span><span class="co">#&gt; all geometries</span></span>
<span></span>
<span><span class="co"># Create some points</span></span>
<span><span class="va">pts_coast</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">4</span>, class <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"core"</span>, <span class="st">"core"</span>, <span class="st">"halo"</span>, <span class="st">"pruned"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  geometry <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html" class="external-link">st_sfc</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">60</span>, <span class="fl">40</span><span class="op">)</span><span class="op">)</span>,  <span class="co"># core</span></span>
<span>    <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">50</span>, <span class="fl">30</span><span class="op">)</span><span class="op">)</span>,  <span class="co"># core</span></span>
<span>    <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">30</span>, <span class="fl">40</span><span class="op">)</span><span class="op">)</span>,  <span class="co"># halo (on land)</span></span>
<span>    <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">90</span>, <span class="fl">70</span><span class="op">)</span><span class="op">)</span>   <span class="co"># would be halo but in sea</span></span>
<span>  <span class="op">)</span>,</span>
<span>  crs <span class="op">=</span> <span class="fl">32631</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Apply with mask</span></span>
<span><span class="va">result_coast</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe.html">aoe</a></span><span class="op">(</span><span class="va">pts_coast</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, <span class="op">]</span>, <span class="va">support_coast</span>, mask <span class="op">=</span> <span class="va">land_mask</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get geometries for visualization</span></span>
<span><span class="va">aoe_masked</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe_geometry.html">aoe_geometry</a></span><span class="op">(</span><span class="va">result_coast</span>, <span class="st">"aoe"</span><span class="op">)</span></span>
<span><span class="va">support_geom</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe_geometry.html">aoe_geometry</a></span><span class="op">(</span><span class="va">result_coast</span>, <span class="st">"original"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Prepare point data for plotting</span></span>
<span><span class="va">result_coast</span><span class="op">$</span><span class="va">class</span> <span class="op">&lt;-</span> <span class="va">result_coast</span><span class="op">$</span><span class="va">aoe_class</span></span>
<span><span class="va">pruned_pt</span> <span class="op">&lt;-</span> <span class="va">pts_coast</span><span class="op">[</span><span class="fl">4</span>, <span class="op">]</span></span>
<span></span>
<span><span class="co"># Plot with ggplot2</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">sea_area</span>, fill <span class="op">=</span> <span class="va">aoe_colors</span><span class="op">$</span><span class="va">sea</span>, color <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">land_mask</span>, fill <span class="op">=</span> <span class="va">aoe_colors</span><span class="op">$</span><span class="va">land</span>, color <span class="op">=</span> <span class="va">aoe_colors</span><span class="op">$</span><span class="va">mask</span>, linewidth <span class="op">=</span> <span class="fl">0.8</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">aoe_masked</span>, fill <span class="op">=</span> <span class="va">aoe_colors</span><span class="op">$</span><span class="va">aoe_fill</span>, color <span class="op">=</span> <span class="va">aoe_colors</span><span class="op">$</span><span class="va">aoe_border</span>,</span>
<span>          linetype <span class="op">=</span> <span class="st">"dashed"</span>, linewidth <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">support_geom</span>, fill <span class="op">=</span> <span class="cn">NA</span>, color <span class="op">=</span> <span class="va">aoe_colors</span><span class="op">$</span><span class="va">support</span>, linewidth <span class="op">=</span> <span class="fl">1.2</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">result_coast</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="va">class</span><span class="op">)</span>, size <span class="op">=</span> <span class="fl">4</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">pruned_pt</span>, color <span class="op">=</span> <span class="va">aoe_colors</span><span class="op">$</span><span class="va">point_pruned</span>, shape <span class="op">=</span> <span class="fl">4</span>, size <span class="op">=</span> <span class="fl">4</span>, stroke <span class="op">=</span> <span class="fl">1.5</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_color_manual</a></span><span class="op">(</span></span>
<span>    values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"core"</span> <span class="op">=</span> <span class="va">aoe_colors</span><span class="op">$</span><span class="va">point_core</span>, <span class="st">"halo"</span> <span class="op">=</span> <span class="va">aoe_colors</span><span class="op">$</span><span class="va">point_halo</span><span class="op">)</span>,</span>
<span>    labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Core"</span>, <span class="st">"Halo"</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/annotate.html" class="external-link">annotate</a></span><span class="op">(</span><span class="st">"text"</span>, x <span class="op">=</span> <span class="fl">90</span>, y <span class="op">=</span> <span class="fl">80</span>, label <span class="op">=</span> <span class="st">"SEA"</span>, color <span class="op">=</span> <span class="st">"black"</span>,</span>
<span>           fontface <span class="op">=</span> <span class="st">"bold"</span>, size <span class="op">=</span> <span class="fl">5</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">coord_sf</a></span><span class="op">(</span>xlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">10</span>, <span class="fl">110</span><span class="op">)</span>, ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">10</span>, <span class="fl">90</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"Class"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_aoe</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<div class="svg-container"><button type="button" class="btn btn-primary btn-copy-svg" title="Copy SVG to clipboard" aria-label="Copy SVG to clipboard" data-bs-toggle="tooltip" data-bs-placement="left"><i class="fa fa-copy"></i></button>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='576.00pt' height='432.00pt' viewBox='0 0 576.00 432.00' class="r-plt inline-svg" style="max-width:100%;width:100%;height:auto;">
<g class='svglite'>
<defs>
  <style type='text/css'><![CDATA[
    /* theme-aware-processed */
    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite circle {
      fill: none;
      stroke: #3E3F3A;
      stroke-linecap: round;
      stroke-linejoin: round;
      stroke-miterlimit: 10.00;
    }
    .svglite > g > rect {
      fill: none;
      stroke: #3E3F3A;
      stroke-linecap: round;
      stroke-linejoin: round;
      stroke-miterlimit: 10.00;
    }
    .svglite text {
      white-space: pre;
      fill: #3E3F3A;
    }
    .svglite g.glyphgroup path {
      fill: inherit;
      stroke: none;
    }
  ]]></style>
</defs>
<rect width='100%' height='100%' style='stroke: none; fill: #F5F6F8;'/>
<defs>
  <clipPath id='cpMC4wMHw1NzYuMDB8MC4wMHw0MzIuMDA='>
    <rect x='0.00' y='0.00' width='576.00' height='432.00' />
  </clipPath>
</defs>
<g clip-path='url(#cpMC4wMHw1NzYuMDB8MC4wMHw0MzIuMDA=)'>
</g>
<defs>
  <clipPath id='cpNC40MXw1NzEuNTl8MC4wMHw0MzIuMDA='>
    <rect x='4.41' y='0.00' width='567.19' height='432.00' />
  </clipPath>
</defs>
<g clip-path='url(#cpNC40MXw1NzEuNTl8MC4wMHw0MzIuMDA=)'>
<rect x='4.41' y='0.00' width='567.19' height='432.00' style='stroke-width: 0.00; stroke: none;' /> fill: #F5F6F8;' />
</g>
<g clip-path='url(#cpMC4wMHw1NzYuMDB8MC4wMHw0MzIuMDA=)'>
</g>
<defs>
  <clipPath id='cpMTQuMzd8NTA4Ljg2fDkuOTZ8NDIyLjA0'>
    <rect x='14.37' y='9.96' width='494.49' height='412.07' />
  </clipPath>
</defs>
<g clip-path='url(#cpMTQuMzd8NTA4Ljg2fDkuOTZ8NDIyLjA0)'>
<rect x='14.37' y='9.96' width='494.49' height='412.07' style='stroke-width: 0.00; stroke: none;' /> fill: #F5F6F8;' />
<path d='M -0.61 -8.77 L 523.84 -8.77 L 523.84 440.77 L -0.61 440.77 L -0.61 -8.77 ZM 448.92 365.85 L 448.92 178.54 L 336.54 141.08 L 261.61 159.81 L 186.69 103.62 L 74.31 141.08 L 74.31 365.85 L 448.92 365.85 Z' style='fill-rule: evenodd; fill: #BEE3F8; stroke-width: 0.47; stroke: none; stroke-linecap: butt;' />
<path d='M 74.31 365.85 L 448.92 365.85 L 448.92 178.54 L 336.54 141.08 L 261.61 159.81 L 186.69 103.62 L 74.31 141.08 L 74.31 365.85 Z' style='fill-rule: evenodd; fill: #E2E8F0; stroke-width: 1.71; stroke: #A0AEC0; stroke-linecap: butt;' />
<path d='M 222.47 322.95 L 220.80 322.82 L 219.14 322.60 L 217.49 322.29 L 215.85 321.90 L 214.24 321.43 L 212.66 320.86 L 211.11 320.22 L 209.59 319.50 L 208.12 318.70 L 206.69 317.82 L 205.30 316.87 L 203.97 315.85 L 202.69 314.76 L 201.47 313.60 L 200.32 312.38 L 199.23 311.11 L 198.21 309.77 L 197.26 308.39 L 196.38 306.96 L 195.58 305.48 L 194.85 303.97 L 194.21 302.42 L 193.65 300.83 L 193.17 299.22 L 192.78 297.59 L 192.48 295.94 L 192.26 294.28 L 192.12 292.60 L 192.08 290.92 L 192.08 141.08 L 192.12 139.40 L 192.26 137.72 L 192.48 136.06 L 192.78 134.41 L 193.17 132.78 L 193.65 131.17 L 194.21 129.58 L 194.85 128.03 L 195.58 126.52 L 196.38 125.04 L 197.26 123.61 L 198.21 122.23 L 199.23 120.89 L 200.32 119.62 L 201.47 118.40 L 202.69 117.24 L 203.71 116.38 L 261.61 159.81 L 336.54 141.08 L 406.07 164.26 L 406.07 290.92 L 406.03 292.60 L 405.90 294.28 L 405.68 295.94 L 405.37 297.59 L 404.98 299.22 L 404.50 300.83 L 403.94 302.42 L 403.30 303.97 L 402.58 305.48 L 401.77 306.96 L 400.90 308.39 L 399.95 309.77 L 398.92 311.11 L 397.83 312.38 L 396.68 313.60 L 395.46 314.76 L 394.18 315.85 L 392.85 316.87 L 391.47 317.82 L 390.03 318.70 L 388.56 319.50 L 387.04 320.22 L 385.49 320.86 L 383.91 321.43 L 382.30 321.90 L 380.67 322.29 L 379.02 322.60 L 377.35 322.82 L 375.68 322.95 L 374.00 323.00 L 224.15 323.00 L 222.47 322.95 Z' style='fill-rule: evenodd; fill: #5A7BA6; fill-opacity: 0.063; stroke-width: 2.13; stroke: #5A7BA6; stroke-dasharray: 11.38,11.38; stroke-linecap: butt;' />
<path d='M 224.15 290.92 L 224.15 141.08 L 374.00 141.08 L 374.00 290.92 L 224.15 290.92 Z' style='fill-rule: evenodd; stroke-width: 2.56; stroke: #2D3748; stroke-linecap: butt;' />
<circle cx='299.08' cy='216.00' r='4.62' style='stroke-width: 0.71; stroke: #2B6CB0; stroke-linecap: butt; fill: #2B6CB0;' />
<circle cx='261.61' cy='253.46' r='4.62' style='stroke-width: 0.71; stroke: #2B6CB0; stroke-linecap: butt; fill: #2B6CB0;' />
<line x1='406.13' y1='108.95' x2='416.79' y2='98.29' style='stroke-width: 2.13; stroke: #A0AEC0; stroke-linecap: butt;' />
<line x1='406.13' y1='98.29' x2='416.79' y2='108.95' style='stroke-width: 2.13; stroke: #A0AEC0; stroke-linecap: butt;' />
<text x='411.46' y='71.25' text-anchor='middle' style='font-size: 14.23px; font-weight: bold; font-family: "Roboto", -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif;' textLength='29.23px' lengthAdjust='spacingAndGlyphs'>SEA</text>
</g>
<g clip-path='url(#cpMC4wMHw1NzYuMDB8MC4wMHw0MzIuMDA=)'>
<rect x='514.53' y='198.81' width='47.10' height='34.37' style='stroke-width: 0.00; stroke: none;' /> fill: #F5F6F8;' />
<text x='514.53' y='208.67' style='font-size: 12.00px; font-weight: bold;fill: #2D3748; font-family: "Roboto", -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif;' textLength='32.02px' lengthAdjust='spacingAndGlyphs'>Class</text>
<rect x='514.53' y='215.91' width='17.28' height='17.28' style='stroke-width: 0.00; stroke: none;' /> fill: #F5F6F8;' />
<circle cx='523.17' cy='224.55' r='4.62' style='stroke-width: 0.71; stroke: #2B6CB0; fill: #2B6CB0;' />
<text x='537.79' y='228.49' style='font-size: 11.00px;fill: #2D3748; font-family: "Roboto", -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif;' textLength='23.84px' lengthAdjust='spacingAndGlyphs'>Core</text>
</g>
</g>
</svg></div><p class="caption">
AoE with land mask. The AoE is clipped to the land boundary.
</p>
</div>
<div class="section level3">
<h3 id="real-world-example-portugal">Real-World Example: Portugal<a class="anchor" aria-label="anchor" href="#real-world-example-portugal"></a>
</h3>
<p>The package includes bundled country boundaries and a global land
mask. Use <code>mask = "land"</code> to clip AoE to coastlines:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create a point inside Portugal (approximate center of mainland)</span></span>
<span><span class="va">dummy</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>  geometry <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html" class="external-link">st_sfc</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">8</span>, <span class="fl">39.5</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  crs <span class="op">=</span> <span class="fl">4326</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Without mask</span></span>
<span><span class="va">result_no_mask</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe.html">aoe</a></span><span class="op">(</span><span class="va">dummy</span>, <span class="st">"PT"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Using largest polygon (96.8% of total area); 8 smaller polygon(s) dropped. Set largest_polygon = FALSE to include all.</span></span>
<span><span class="va">aoe_no_mask</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe_geometry.html">aoe_geometry</a></span><span class="op">(</span><span class="va">result_no_mask</span>, <span class="st">"aoe"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># With mask + area=1 for equal land area</span></span>
<span><span class="va">result_masked</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe.html">aoe</a></span><span class="op">(</span><span class="va">dummy</span>, <span class="st">"PT"</span>, mask <span class="op">=</span> <span class="st">"land"</span>, area <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">#&gt; Using largest polygon (96.8% of total area); 8 smaller polygon(s) dropped. Set largest_polygon = FALSE to include all.</span></span>
<span><span class="va">aoe_masked</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe_geometry.html">aoe_geometry</a></span><span class="op">(</span><span class="va">result_masked</span>, <span class="st">"aoe"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get support geometry</span></span>
<span><span class="va">support_geom</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe_geometry.html">aoe_geometry</a></span><span class="op">(</span><span class="va">result_masked</span>, <span class="st">"original"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Transform to equal area for plotting</span></span>
<span><span class="va">crs_ea</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_crs.html" class="external-link">st_crs</a></span><span class="op">(</span><span class="st">"+proj=laea +lat_0=39.5 +lon_0=-8 +datum=WGS84"</span><span class="op">)</span></span>
<span><span class="va">aoe_no_mask_ea</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_transform.html" class="external-link">st_transform</a></span><span class="op">(</span><span class="va">aoe_no_mask</span>, <span class="va">crs_ea</span><span class="op">)</span></span>
<span><span class="va">aoe_masked_ea</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_transform.html" class="external-link">st_transform</a></span><span class="op">(</span><span class="va">aoe_masked</span>, <span class="va">crs_ea</span><span class="op">)</span></span>
<span><span class="va">support_ea</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_transform.html" class="external-link">st_transform</a></span><span class="op">(</span><span class="va">support_geom</span>, <span class="va">crs_ea</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Plot - expand xlim for legend, crop bottom margin</span></span>
<span><span class="va">bbox</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_bbox.html" class="external-link">st_bbox</a></span><span class="op">(</span><span class="va">aoe_no_mask_ea</span><span class="op">)</span></span>
<span><span class="va">x_range</span> <span class="op">&lt;-</span> <span class="va">bbox</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span> <span class="op">-</span> <span class="va">bbox</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span>
<span><span class="va">y_range</span> <span class="op">&lt;-</span> <span class="va">bbox</span><span class="op">[</span><span class="fl">4</span><span class="op">]</span> <span class="op">-</span> <span class="va">bbox</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>, bty <span class="op">=</span> <span class="st">"n"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_geometry</a></span><span class="op">(</span><span class="va">aoe_no_mask_ea</span><span class="op">)</span>, border <span class="op">=</span> <span class="st">"gray50"</span>, lty <span class="op">=</span> <span class="fl">2</span>, lwd <span class="op">=</span> <span class="fl">1.5</span>,</span>
<span>     xlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">bbox</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, <span class="va">bbox</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span><span class="op">)</span>,</span>
<span>     ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">bbox</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span> <span class="op">+</span> <span class="va">y_range</span> <span class="op">*</span> <span class="fl">0.25</span>, <span class="va">bbox</span><span class="op">[</span><span class="fl">4</span><span class="op">]</span><span class="op">)</span>,</span>
<span>     axes <span class="op">=</span> <span class="cn">FALSE</span>, xaxt <span class="op">=</span> <span class="st">"n"</span>, yaxt <span class="op">=</span> <span class="st">"n"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_geometry</a></span><span class="op">(</span><span class="va">aoe_masked_ea</span><span class="op">)</span>, col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grDevices/rgb.html" class="external-link">rgb</a></span><span class="op">(</span><span class="fl">0.3</span>, <span class="fl">0.5</span>, <span class="fl">0.7</span>, <span class="fl">0.3</span><span class="op">)</span>,</span>
<span>     border <span class="op">=</span> <span class="st">"steelblue"</span>, lty <span class="op">=</span> <span class="fl">2</span>, lwd <span class="op">=</span> <span class="fl">1.5</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_geometry</a></span><span class="op">(</span><span class="va">support_ea</span><span class="op">)</span>, border <span class="op">=</span> <span class="st">"black"</span>, lwd <span class="op">=</span> <span class="fl">2</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/legend.html" class="external-link">legend</a></span><span class="op">(</span><span class="st">"topright"</span>,</span>
<span>       legend <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Portugal"</span>, <span class="st">"AoE (unmasked)"</span>, <span class="st">"AoE (land only)"</span><span class="op">)</span>,</span>
<span>       col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"black"</span>, <span class="st">"gray50"</span>, <span class="st">"steelblue"</span><span class="op">)</span>,</span>
<span>       lty <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>       lwd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">1.5</span>, <span class="fl">1.5</span><span class="op">)</span>,</span>
<span>       bty <span class="op">=</span> <span class="st">"n"</span>,</span>
<span>       inset <span class="op">=</span> <span class="fl">0.05</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<div class="svg-container"><button type="button" class="btn btn-primary btn-copy-svg" title="Copy SVG to clipboard" aria-label="Copy SVG to clipboard" data-bs-toggle="tooltip" data-bs-placement="left"><i class="fa fa-copy"></i></button>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='576.00pt' height='432.00pt' viewBox='0 0 576.00 432.00' class="r-plt inline-svg" style="max-width:100%;width:100%;height:auto;">
<g class='svglite'>
<defs>
  <style type='text/css'><![CDATA[
    /* theme-aware-processed */
    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite circle {
      fill: none;
      stroke: #3E3F3A;
      stroke-linecap: round;
      stroke-linejoin: round;
      stroke-miterlimit: 10.00;
    }
    .svglite > g > rect {
      fill: none;
      stroke: #3E3F3A;
      stroke-linecap: round;
      stroke-linejoin: round;
      stroke-miterlimit: 10.00;
    }
    .svglite text {
      white-space: pre;
      fill: #3E3F3A;
    }
    .svglite g.glyphgroup path {
      fill: inherit;
      stroke: none;
    }
  ]]></style>
</defs>
<rect width='100%' height='100%' style='stroke: none; fill: #F5F6F8;'/>
<defs>
  <clipPath id='cpMC4wMHw1NzYuMDB8MC4wMHw0MzIuMDA='>
    <rect x='0.00' y='0.00' width='576.00' height='432.00' />
  </clipPath>
</defs>
<g clip-path='url(#cpMC4wMHw1NzYuMDB8MC4wMHw0MzIuMDA=)'>
</g>
<defs>
  <clipPath id='cpMTQuNDB8NTYxLjYwfDE0LjQwfDQxNy42MA=='>
    <rect x='14.40' y='14.40' width='547.20' height='403.20' />
  </clipPath>
</defs>
<g clip-path='url(#cpMTQuNDB8NTYxLjYwfDE0LjQwfDQxNy42MA==)'>
<rect class='legend-bg' x='14.40' y='14.40' width='547.20' height='403.20' style='stroke-width: 0.75; stroke: #F5F6F8; fill: #F5F6F8;' />
<path d='M 409.42 147.72 L 410.74 147.60 L 413.37 147.36 L 413.29 144.05 L 415.92 143.81 L 415.84 140.50 L 418.46 140.26 L 418.38 136.96 L 421.00 136.72 L 420.91 133.41 L 423.53 133.17 L 423.44 129.87 L 423.40 128.22 L 424.71 128.10 L 424.66 126.45 L 425.97 126.33 L 425.79 119.74 L 425.70 116.45 L 428.31 116.21 L 428.22 112.92 L 428.13 109.63 L 425.52 109.87 L 425.43 106.59 L 425.35 103.30 L 424.05 103.42 L 424.00 101.78 L 423.96 100.14 L 423.31 100.20 L 423.29 99.38 L 422.64 99.44 L 422.57 96.98 L 422.48 93.71 L 420.54 93.89 L 420.52 93.07 L 419.87 93.13 L 419.72 87.40 L 417.12 87.64 L 417.04 84.38 L 414.44 84.61 L 414.36 81.35 L 411.76 81.59 L 411.68 78.33 L 409.08 78.57 L 406.81 78.78 L 406.80 78.37 L 406.47 78.40 L 406.40 75.54 L 403.80 75.79 L 403.73 72.53 L 401.13 72.77 L 401.05 69.51 L 400.98 66.26 L 398.38 66.50 L 398.31 63.25 L 396.36 63.43 L 396.34 62.62 L 395.69 62.68 L 395.63 60.24 L 394.33 60.36 L 394.30 58.74 L 393.00 58.86 L 392.96 57.23 L 391.01 57.42 L 391.00 56.60 L 390.35 56.66 L 390.30 54.23 L 387.70 54.47 L 387.63 51.23 L 383.73 51.60 L 383.69 49.97 L 382.39 50.10 L 382.36 48.48 L 379.76 48.72 L 378.45 48.84 L 378.42 47.22 L 377.12 47.34 L 377.09 45.73 L 369.27 46.46 L 369.21 43.22 L 366.60 43.47 L 363.99 43.71 L 361.38 43.95 L 358.76 44.20 L 356.14 44.44 L 353.52 44.69 L 353.48 41.46 L 350.85 41.70 L 345.61 42.19 L 340.35 42.69 L 335.09 43.18 L 332.46 43.43 L 332.42 40.20 L 329.79 40.45 L 327.15 40.69 L 327.17 42.31 L 325.85 42.43 L 325.86 44.05 L 324.54 44.17 L 319.26 44.67 L 316.61 44.92 L 316.62 46.53 L 315.30 46.66 L 313.98 46.78 L 313.98 47.99 L 313.65 48.02 L 313.65 48.43 L 311.33 48.65 L 308.68 48.90 L 306.03 49.14 L 303.37 49.39 L 300.71 49.64 L 298.05 49.89 L 298.04 46.66 L 296.04 46.85 L 296.04 46.04 L 295.38 46.11 L 295.37 43.68 L 294.04 43.81 L 294.03 42.20 L 292.70 42.32 L 292.70 40.71 L 291.37 40.83 L 291.37 39.22 L 290.04 39.35 L 290.03 37.73 L 287.37 37.98 L 287.37 34.76 L 283.37 35.14 L 283.37 33.53 L 282.04 33.66 L 282.04 32.05 L 279.38 32.30 L 276.71 32.55 L 276.71 29.33 L 271.38 29.84 L 249.97 31.87 L 244.60 32.38 L 244.58 35.19 L 244.24 35.23 L 244.24 35.63 L 241.89 35.85 L 239.19 36.11 L 236.50 36.36 L 233.81 36.62 L 231.11 36.87 L 231.09 38.48 L 229.74 38.61 L 229.73 40.22 L 228.38 40.35 L 222.97 40.86 L 222.94 44.08 L 220.23 44.34 L 217.52 44.60 L 217.49 47.02 L 216.81 47.08 L 216.80 47.89 L 212.05 48.34 L 212.01 51.56 L 209.30 51.82 L 209.26 54.24 L 208.58 54.31 L 208.57 55.11 L 206.53 55.31 L 206.51 56.92 L 205.15 57.05 L 205.12 58.67 L 203.76 58.80 L 203.74 60.41 L 202.37 60.54 L 202.35 62.16 L 200.99 62.29 L 200.96 63.91 L 199.60 64.03 L 199.57 65.65 L 198.21 65.78 L 198.17 68.21 L 197.49 68.27 L 197.47 69.08 L 195.42 69.28 L 195.37 72.32 L 195.20 72.33 L 195.20 72.53 L 192.63 72.78 L 192.58 76.02 L 192.55 77.64 L 191.18 77.77 L 191.15 79.39 L 189.78 79.52 L 189.73 82.77 L 189.62 89.27 L 189.56 92.52 L 186.81 92.78 L 186.76 96.04 L 186.70 99.30 L 189.46 99.04 L 189.40 102.30 L 189.29 108.83 L 190.67 108.70 L 190.65 110.33 L 192.02 110.20 L 192.00 111.84 L 191.95 115.11 L 191.89 118.38 L 194.48 118.14 L 194.48 118.35 L 194.65 118.33 L 194.50 127.96 L 194.40 134.52 L 197.17 134.27 L 197.12 137.55 L 197.07 140.84 L 197.02 144.13 L 196.97 147.43 L 199.74 147.17 L 199.65 153.77 L 202.07 153.54 L 202.07 153.95 L 202.42 153.92 L 202.37 156.81 L 202.33 160.11 L 202.29 162.59 L 201.60 162.66 L 201.59 163.48 L 199.50 163.68 L 199.45 166.98 L 199.36 173.61 L 199.31 176.72 L 199.14 176.73 L 199.14 176.94 L 196.52 177.18 L 196.47 180.50 L 196.42 183.82 L 193.63 184.07 L 193.58 187.39 L 193.48 194.04 L 193.42 197.37 L 190.62 197.63 L 190.57 200.96 L 190.52 204.29 L 190.46 207.63 L 190.41 210.97 L 187.60 211.22 L 187.55 214.56 L 187.44 221.25 L 187.33 227.94 L 187.23 233.81 L 186.53 233.87 L 186.51 234.71 L 184.39 234.90 L 184.34 238.26 L 184.31 239.94 L 182.90 240.06 L 182.87 241.74 L 181.45 241.87 L 181.36 246.91 L 179.95 247.04 L 179.92 248.72 L 178.50 248.85 L 178.44 252.21 L 178.40 254.74 L 177.69 254.80 L 177.67 255.64 L 175.54 255.84 L 175.44 261.73 L 174.72 261.80 L 174.71 262.64 L 169.73 263.09 L 169.66 266.46 L 166.82 266.72 L 166.75 270.09 L 163.90 270.35 L 163.83 273.72 L 160.97 273.98 L 160.90 277.36 L 158.04 277.61 L 157.90 284.38 L 155.03 284.64 L 154.96 288.02 L 154.89 291.41 L 154.81 294.80 L 154.74 298.19 L 154.67 301.59 L 154.60 304.98 L 151.72 305.24 L 151.57 312.04 L 151.42 318.85 L 151.31 323.96 L 149.86 324.08 L 149.83 325.79 L 148.38 325.92 L 148.30 329.33 L 148.23 332.74 L 148.15 336.16 L 148.08 339.58 L 148.00 343.00 L 147.92 346.42 L 147.85 349.84 L 147.77 353.27 L 147.69 356.70 L 150.24 356.48 L 150.23 356.91 L 150.59 356.87 L 150.52 359.88 L 150.45 363.31 L 152.99 363.09 L 152.98 363.52 L 153.35 363.49 L 153.28 366.49 L 154.73 366.37 L 154.70 368.08 L 156.15 367.96 L 156.12 369.68 L 157.57 369.55 L 157.53 371.27 L 158.99 371.14 L 158.95 372.86 L 160.40 372.74 L 160.37 374.46 L 161.82 374.33 L 161.79 376.05 L 164.69 375.80 L 164.63 379.25 L 164.56 382.69 L 167.47 382.44 L 167.40 385.89 L 167.34 389.34 L 170.25 389.09 L 170.18 392.54 L 173.09 392.29 L 173.03 395.75 L 175.94 395.50 L 175.88 398.95 L 178.78 398.70 L 180.24 398.58 L 180.21 400.31 L 181.66 400.18 L 181.63 401.91 L 184.54 401.66 L 184.48 405.12 L 184.38 412.05 L 184.32 415.52 L 186.87 415.30 L 186.86 415.74 L 187.22 415.71 L 187.18 418.74 L 187.13 422.22 L 187.07 425.69 L 189.99 425.44 L 189.78 439.36 L 189.63 449.82 L 186.70 450.07 L 186.65 453.56 L 186.60 457.06 L 186.55 460.12 L 186.18 460.15 L 186.18 460.58 L 183.61 460.80 L 183.50 467.80 L 180.57 468.04 L 180.51 471.55 L 180.46 474.83 L 180.27 474.84 L 180.27 475.06 L 177.51 475.30 L 177.40 482.31 L 177.16 496.36 L 177.11 499.87 L 180.06 499.63 L 180.00 503.14 L 181.48 503.02 L 181.45 504.78 L 182.93 504.66 L 182.85 509.94 L 185.80 509.70 L 185.75 513.22 L 188.71 512.98 L 188.66 516.50 L 193.09 516.14 L 193.06 517.90 L 194.54 517.78 L 194.51 519.54 L 197.47 519.30 L 198.94 519.18 L 198.92 520.94 L 200.40 520.82 L 200.37 522.58 L 206.27 522.10 L 206.23 525.63 L 209.18 525.39 L 212.13 525.14 L 215.07 524.90 L 218.01 524.65 L 220.95 524.41 L 223.89 524.16 L 226.83 523.92 L 229.76 523.68 L 232.70 523.43 L 232.72 520.78 L 233.45 520.72 L 233.46 519.84 L 247.35 518.68 L 257.56 517.83 L 257.55 519.60 L 259.01 519.48 L 259.01 521.24 L 261.92 521.00 L 264.83 520.76 L 266.29 520.64 L 266.28 522.41 L 267.74 522.29 L 267.73 524.05 L 270.64 523.81 L 273.55 523.57 L 273.55 527.11 L 276.45 526.87 L 279.36 526.63 L 282.26 526.39 L 285.16 526.14 L 288.06 525.90 L 290.96 525.66 L 293.86 525.42 L 296.75 525.18 L 299.64 524.94 L 302.53 524.69 L 305.42 524.45 L 305.41 522.68 L 306.85 522.56 L 306.84 520.79 L 311.17 520.43 L 314.05 520.19 L 314.03 516.65 L 316.90 516.41 L 319.78 516.17 L 319.76 513.51 L 320.48 513.45 L 320.47 512.57 L 328.36 511.91 L 331.22 511.67 L 331.19 508.13 L 334.05 507.89 L 336.91 507.65 L 339.77 507.41 L 339.73 503.87 L 342.59 503.63 L 342.57 501.86 L 343.99 501.74 L 343.97 499.98 L 345.40 499.86 L 348.25 499.62 L 348.21 496.09 L 351.05 495.85 L 350.98 489.67 L 351.69 489.61 L 351.68 488.73 L 353.81 488.55 L 353.77 485.02 L 353.72 481.50 L 356.56 481.26 L 356.47 474.22 L 356.42 470.70 L 355.01 470.82 L 354.99 469.06 L 353.58 469.18 L 353.55 467.42 L 353.51 463.91 L 353.47 460.40 L 353.43 456.89 L 353.39 453.38 L 350.56 453.62 L 350.44 443.11 L 353.26 442.87 L 353.22 439.37 L 356.03 439.13 L 358.84 438.89 L 358.80 435.39 L 361.60 435.15 L 364.41 434.91 L 364.37 431.85 L 364.72 431.82 L 364.71 431.39 L 367.16 431.18 L 369.96 430.94 L 369.91 427.44 L 372.71 427.20 L 372.65 423.71 L 375.45 423.47 L 375.39 419.98 L 375.36 418.24 L 376.76 418.12 L 376.73 416.37 L 378.12 416.25 L 378.07 412.77 L 380.85 412.53 L 380.79 409.04 L 380.73 405.56 L 380.70 403.82 L 382.09 403.70 L 382.06 401.96 L 383.45 401.84 L 383.33 394.89 L 383.09 381.01 L 383.03 377.55 L 380.27 377.79 L 380.21 374.33 L 378.82 374.45 L 378.80 372.72 L 377.41 372.84 L 377.33 367.65 L 374.56 367.89 L 374.51 364.44 L 371.74 364.68 L 370.36 364.80 L 370.33 363.07 L 368.95 363.19 L 368.92 361.47 L 366.16 361.71 L 366.11 358.26 L 368.87 358.02 L 368.82 354.57 L 371.58 354.33 L 371.53 350.88 L 374.29 350.64 L 374.23 347.19 L 374.19 344.61 L 374.88 344.55 L 374.86 343.69 L 376.93 343.51 L 376.87 340.07 L 376.83 337.49 L 377.52 337.43 L 377.50 336.57 L 379.56 336.39 L 379.51 332.95 L 379.45 329.52 L 379.39 326.09 L 379.33 322.66 L 379.29 320.09 L 379.97 320.03 L 379.96 319.17 L 379.61 319.20 L 379.61 318.77 L 379.26 318.80 L 379.21 315.81 L 379.16 312.39 L 379.10 308.96 L 379.04 305.55 L 376.30 305.79 L 376.19 298.96 L 373.46 299.20 L 373.40 295.79 L 370.67 296.03 L 370.62 292.62 L 367.88 292.86 L 367.83 289.46 L 370.56 289.21 L 370.51 285.81 L 373.24 285.57 L 373.18 282.16 L 373.15 280.46 L 374.52 280.34 L 374.49 278.64 L 375.85 278.52 L 375.80 275.55 L 376.14 275.52 L 376.13 275.09 L 378.51 274.88 L 378.45 271.48 L 378.42 269.79 L 379.78 269.67 L 379.75 267.97 L 381.11 267.85 L 381.05 264.46 L 381.00 261.92 L 381.68 261.85 L 381.67 261.01 L 383.70 260.83 L 383.64 257.44 L 383.57 254.05 L 386.28 253.81 L 386.21 250.43 L 386.09 243.67 L 385.96 236.92 L 385.83 230.18 L 388.52 229.94 L 388.46 226.57 L 388.41 224.05 L 389.08 223.99 L 389.07 223.15 L 391.08 222.97 L 390.95 216.25 L 390.68 202.83 L 390.41 189.45 L 390.15 176.11 L 390.08 172.78 L 388.75 172.90 L 388.72 171.23 L 387.39 171.35 L 387.36 169.69 L 387.30 166.78 L 387.63 166.75 L 387.62 166.34 L 389.95 166.12 L 389.88 162.80 L 395.19 162.32 L 395.14 159.83 L 395.80 159.77 L 395.78 158.94 L 397.77 158.76 L 400.41 158.51 L 400.38 156.85 L 401.70 156.73 L 401.66 155.08 L 405.62 154.71 L 405.55 151.40 L 408.19 151.16 L 408.15 149.50 L 409.46 149.38 L 409.42 147.72 Z' style='fill-rule: evenodd; stroke-width: 1.12; stroke: #7F7F7F; stroke-dasharray: 6.00,6.00;' />
<path d='M 385.16 501.78 L 385.13 500.04 L 387.95 499.80 L 387.89 496.27 L 387.82 492.74 L 387.78 490.09 L 388.48 490.03 L 388.47 489.15 L 390.58 488.97 L 390.51 485.44 L 390.39 478.39 L 390.26 471.34 L 390.13 464.31 L 390.01 457.28 L 392.80 457.04 L 392.74 453.75 L 392.92 453.74 L 392.91 453.52 L 395.53 453.29 L 395.50 451.54 L 396.89 451.42 L 396.86 449.67 L 398.25 449.55 L 398.22 447.79 L 399.61 447.67 L 399.58 445.92 L 400.97 445.80 L 400.94 444.05 L 402.33 443.93 L 402.29 442.18 L 403.68 442.06 L 403.65 440.31 L 405.04 440.19 L 405.00 438.44 L 406.39 438.32 L 406.33 435.25 L 406.67 435.22 L 406.66 434.79 L 409.09 434.58 L 409.02 431.08 L 408.98 429.33 L 410.36 429.21 L 410.33 427.46 L 411.71 427.35 L 411.63 423.85 L 414.40 423.61 L 414.32 420.12 L 414.24 416.63 L 417.00 416.39 L 416.93 412.90 L 416.77 405.93 L 419.52 405.70 L 419.44 402.21 L 419.36 398.73 L 419.28 395.26 L 419.20 391.78 L 419.12 388.31 L 419.03 384.84 L 418.95 381.37 L 418.87 377.90 L 418.79 374.44 L 416.05 374.68 L 415.82 364.29 L 413.08 364.53 L 413.00 361.08 L 412.92 357.62 L 410.19 357.86 L 410.04 350.96 L 412.77 350.72 L 412.69 347.27 L 412.61 343.83 L 412.55 340.82 L 412.89 340.79 L 412.88 340.36 L 415.26 340.15 L 415.18 336.71 L 414.86 322.97 L 414.55 309.26 L 414.39 302.42 L 414.31 299.00 L 411.60 299.24 L 411.53 295.83 L 411.45 292.42 L 409.42 292.60 L 409.40 291.74 L 408.73 291.80 L 408.67 289.25 L 411.37 289.01 L 411.29 285.60 L 411.22 282.41 L 411.39 282.39 L 411.38 282.18 L 413.91 281.95 L 413.75 275.15 L 416.45 274.91 L 416.36 271.51 L 416.28 268.11 L 418.97 267.87 L 418.81 261.09 L 418.72 257.70 L 421.40 257.46 L 421.32 254.07 L 421.23 250.69 L 421.15 247.30 L 421.07 243.92 L 420.98 240.54 L 420.92 238.01 L 421.59 237.95 L 421.57 237.11 L 423.57 236.93 L 423.48 233.56 L 423.40 230.18 L 426.06 229.94 L 425.97 226.58 L 425.88 223.21 L 425.80 219.84 L 425.71 216.48 L 425.62 213.12 L 425.53 209.76 L 425.45 206.41 L 425.36 203.05 L 425.27 199.70 L 425.19 196.35 L 425.10 193.01 L 425.01 189.66 L 424.92 186.32 L 424.84 182.98 L 427.48 182.74 L 427.39 179.41 L 430.02 179.17 L 429.98 177.50 L 431.29 177.38 L 431.25 175.71 L 432.56 175.60 L 435.19 175.36 L 435.10 172.02 L 437.72 171.79 L 437.65 169.29 L 438.31 169.23 L 438.28 168.40 L 440.25 168.22 L 440.20 166.55 L 441.51 166.44 L 441.46 164.77 L 442.77 164.65 L 442.72 162.99 L 444.03 162.87 L 443.98 161.21 L 445.29 161.09 L 445.24 159.43 L 446.55 159.31 L 446.50 157.65 L 447.80 157.53 L 450.41 157.29 L 450.31 153.97 L 450.26 152.31 L 451.56 152.19 L 451.51 150.53 L 452.81 150.42 L 452.76 148.76 L 454.06 148.64 L 454.00 146.98 L 455.30 146.86 L 455.20 143.55 L 457.79 143.31 L 457.58 136.69 L 460.17 136.46 L 460.06 133.15 L 459.95 129.85 L 459.90 128.19 L 461.19 128.08 L 461.13 126.43 L 462.43 126.31 L 462.32 123.01 L 462.09 116.42 L 461.65 103.26 L 461.43 96.70 L 458.86 96.93 L 458.75 93.66 L 458.64 90.38 L 458.53 87.11 L 455.96 87.34 L 455.86 84.07 L 455.75 80.80 L 453.18 81.04 L 453.08 77.78 L 452.97 74.51 L 450.40 74.75 L 450.30 71.49 L 448.38 71.66 L 448.35 70.85 L 447.71 70.91 L 447.63 68.47 L 446.35 68.58 L 446.30 66.96 L 445.01 67.07 L 444.96 65.45 L 444.86 62.19 L 442.30 62.43 L 442.20 59.18 L 439.63 59.41 L 439.53 56.17 L 436.97 56.40 L 435.68 56.52 L 435.64 54.90 L 434.35 55.02 L 434.31 53.39 L 431.78 53.63 L 431.78 53.58 L 431.73 53.58 L 431.64 50.39 L 430.36 50.51 L 430.31 48.89 L 429.03 49.01 L 428.98 47.38 L 428.89 44.15 L 426.32 44.38 L 426.23 41.15 L 423.74 41.38 L 423.74 41.28 L 423.66 41.28 L 423.58 38.15 L 421.33 38.36 L 421.32 37.96 L 421.00 37.99 L 420.92 35.16 L 418.67 35.37 L 418.66 34.96 L 418.34 34.99 L 418.27 32.17 L 415.70 32.41 L 415.61 29.18 L 413.04 29.42 L 412.96 26.19 L 410.39 26.43 L 409.10 26.55 L 409.06 24.94 L 407.78 25.06 L 407.74 23.45 L 405.17 23.69 L 405.09 20.47 L 402.52 20.71 L 401.23 20.83 L 401.19 19.22 L 399.90 19.34 L 399.87 17.74 L 397.29 17.98 L 396.00 18.10 L 395.97 16.49 L 394.68 16.61 L 394.64 15.00 L 392.06 15.24 L 389.48 15.49 L 389.42 12.27 L 386.84 12.52 L 381.67 13.00 L 381.61 9.79 L 379.02 10.03 L 376.44 10.28 L 373.85 10.52 L 371.26 10.76 L 368.66 11.01 L 368.61 7.80 L 366.02 8.04 L 355.63 9.02 L 350.42 9.51 L 350.37 6.31 L 347.77 6.55 L 345.16 6.80 L 342.55 7.05 L 339.94 7.29 L 337.33 7.54 L 334.72 7.79 L 332.10 8.03 L 329.48 8.28 L 326.86 8.53 L 326.83 5.33 L 324.21 5.57 L 324.24 8.78 L 321.62 9.03 L 318.99 9.27 L 316.36 9.52 L 313.73 9.77 L 311.10 10.02 L 309.13 10.21 L 309.12 9.41 L 308.46 9.47 L 308.45 7.07 L 305.82 7.32 L 305.80 4.12 L 303.17 4.37 L 300.53 4.62 L 300.52 1.42 L 297.88 1.67 L 295.24 1.92 L 295.23 -1.27 L 292.60 -1.02 L 289.96 -0.77 L 288.64 -0.65 L 288.63 -2.24 L 287.31 -2.12 L 287.31 -3.71 L 282.02 -3.21 L 279.38 -2.96 L 279.38 -6.15 L 276.73 -5.90 L 274.08 -5.64 L 271.43 -5.39 L 268.78 -5.14 L 266.13 -4.88 L 263.47 -4.63 L 260.81 -4.38 L 259.49 -4.25 L 259.49 -5.84 L 258.16 -5.72 L 258.17 -7.31 L 255.51 -7.05 L 252.85 -6.80 L 252.83 -3.61 L 250.17 -3.36 L 247.50 -3.10 L 244.83 -2.85 L 242.16 -2.59 L 239.49 -2.33 L 236.82 -2.08 L 236.80 -0.48 L 235.47 -0.36 L 235.45 1.24 L 234.11 1.37 L 228.75 1.88 L 223.39 2.40 L 220.70 2.65 L 220.66 5.85 L 217.97 6.10 L 215.28 6.36 L 212.59 6.62 L 212.59 6.75 L 216.18 9.75 L 223.13 11.10 L 222.49 13.72 L 216.43 22.27 L 216.48 27.93 L 219.24 28.64 L 230.05 24.23 L 230.72 27.57 L 229.88 38.29 L 234.86 43.15 L 232.41 47.55 L 229.90 49.48 L 229.51 53.54 L 237.16 54.52 L 224.97 68.36 L 225.39 81.44 L 226.97 83.10 L 231.62 81.98 L 225.30 90.92 L 224.66 96.48 L 227.16 101.41 L 232.79 102.02 L 229.32 105.83 L 229.57 113.42 L 233.56 136.19 L 237.45 146.97 L 238.33 152.61 L 236.56 180.15 L 233.54 188.51 L 230.94 192.23 L 224.36 220.78 L 223.41 227.35 L 225.62 229.65 L 226.45 232.64 L 206.16 279.74 L 199.44 289.27 L 195.03 292.09 L 191.44 296.40 L 192.73 303.86 L 188.61 315.02 L 187.31 327.53 L 184.38 336.35 L 183.98 340.82 L 184.25 346.43 L 191.80 349.27 L 206.14 345.76 L 209.12 338.21 L 218.10 323.34 L 223.73 319.28 L 228.62 318.31 L 219.13 324.83 L 215.03 332.64 L 216.45 340.92 L 213.53 345.51 L 208.84 349.60 L 203.36 350.26 L 198.63 352.76 L 201.55 362.52 L 200.81 370.02 L 202.52 370.86 L 220.23 364.96 L 227.75 364.53 L 236.16 372.34 L 222.36 370.38 L 226.81 382.55 L 227.29 392.12 L 222.12 410.65 L 225.73 417.85 L 227.65 429.34 L 225.80 440.91 L 225.97 454.25 L 213.53 487.01 L 217.65 488.39 L 223.45 483.53 L 230.68 483.68 L 240.06 479.89 L 247.54 481.69 L 270.51 483.67 L 283.54 489.58 L 290.53 489.55 L 313.00 476.05 L 334.01 472.56 L 347.24 473.28 L 350.21 471.89 L 354.48 466.56 L 354.80 469.01 L 353.19 473.56 L 379.40 492.95 L 385.16 501.78 Z' style='fill-rule: evenodd; fill: #4D80B3; fill-opacity: 0.30; stroke-width: 1.12; stroke: #4682B4; stroke-dasharray: 6.00,6.00;' />
<path d='M 225.30 90.92 L 224.66 96.48 L 227.16 101.41 L 232.79 102.02 L 229.32 105.83 L 229.57 113.42 L 233.56 136.19 L 237.45 146.97 L 238.33 152.61 L 238.56 157.30 L 237.33 166.62 L 236.56 180.15 L 233.54 188.51 L 230.94 192.23 L 224.36 220.78 L 223.41 227.35 L 225.62 229.65 L 226.45 232.64 L 215.64 256.90 L 206.16 279.74 L 199.44 289.27 L 195.03 292.09 L 191.44 296.40 L 192.49 300.87 L 192.73 303.86 L 188.61 315.02 L 187.31 327.53 L 184.38 336.35 L 183.98 340.82 L 184.25 346.43 L 188.36 348.42 L 191.80 349.27 L 198.57 348.14 L 206.14 345.76 L 209.12 338.21 L 218.10 323.34 L 223.73 319.28 L 228.62 318.31 L 219.13 324.83 L 215.03 332.64 L 216.45 340.92 L 213.53 345.51 L 208.84 349.60 L 203.36 350.26 L 198.63 352.76 L 201.55 362.52 L 200.81 370.02 L 202.52 370.86 L 208.42 369.52 L 220.23 364.96 L 223.68 365.17 L 227.75 364.53 L 231.94 367.52 L 236.16 372.34 L 222.36 370.38 L 226.81 382.55 L 227.29 392.12 L 222.12 410.65 L 225.73 417.85 L 227.65 429.34 L 225.80 440.91 L 225.97 454.25 L 218.38 476.02 L 213.53 487.01 L 217.65 488.39 L 223.45 483.53 L 230.68 483.68 L 240.06 479.89 L 247.54 481.69 L 270.51 483.67 L 283.54 489.58 L 290.53 489.55 L 313.00 476.05 L 318.77 475.10 L 314.62 454.62 L 312.68 446.74 L 312.16 441.64 L 316.00 429.83 L 320.23 425.01 L 325.83 415.06 L 332.74 406.76 L 340.10 404.73 L 343.33 403.49 L 345.98 397.08 L 347.45 391.63 L 346.33 391.10 L 337.77 392.30 L 322.19 369.62 L 322.63 365.98 L 324.53 360.57 L 325.74 353.75 L 326.01 348.37 L 329.96 343.71 L 336.01 339.00 L 341.07 332.34 L 343.57 325.85 L 344.04 319.97 L 341.10 315.82 L 332.75 313.59 L 324.05 296.91 L 322.07 286.44 L 320.32 285.36 L 315.02 280.62 L 309.92 271.69 L 309.18 270.30 L 314.37 268.70 L 335.83 268.44 L 340.29 266.43 L 340.97 265.73 L 344.80 258.71 L 348.74 247.21 L 349.62 240.21 L 348.29 237.34 L 341.15 230.33 L 340.82 228.25 L 341.92 224.90 L 346.07 221.28 L 351.68 217.16 L 354.72 213.62 L 353.95 210.89 L 352.26 208.05 L 351.96 205.38 L 352.95 202.08 L 353.17 190.85 L 353.86 187.96 L 352.62 177.78 L 351.14 169.47 L 346.58 158.73 L 347.36 156.33 L 349.38 154.30 L 356.02 150.47 L 361.23 141.58 L 368.86 134.09 L 378.89 128.00 L 385.83 121.30 L 388.53 116.22 L 390.48 114.85 L 389.86 112.51 L 388.46 109.13 L 384.37 105.87 L 379.16 104.05 L 373.40 104.23 L 369.83 103.62 L 368.74 101.04 L 369.02 93.97 L 368.60 86.99 L 367.45 83.80 L 364.76 81.42 L 359.51 82.14 L 354.94 80.23 L 351.49 79.81 L 349.51 81.40 L 339.34 81.07 L 335.09 80.00 L 332.12 78.63 L 330.23 79.43 L 329.17 80.79 L 329.00 82.93 L 328.33 85.75 L 324.72 88.33 L 316.39 90.93 L 309.66 90.78 L 303.48 89.00 L 301.49 87.68 L 298.50 86.50 L 285.95 88.00 L 284.44 86.93 L 280.11 89.55 L 273.72 92.66 L 270.13 92.84 L 268.83 92.17 L 268.36 90.77 L 265.68 85.90 L 266.39 83.32 L 271.55 75.82 L 270.97 74.02 L 268.87 71.58 L 266.99 68.07 L 266.45 66.27 L 263.19 65.95 L 259.71 67.78 L 246.43 71.50 L 243.25 72.85 L 237.48 76.46 L 231.62 81.98 L 225.30 90.92 Z' style='fill-rule: evenodd; stroke-width: 1.50;' />
<line x1='407.08' y1='48.96' x2='428.68' y2='48.96' style='stroke-width: 1.50;' />
<line x1='407.08' y1='63.36' x2='428.68' y2='63.36' style='stroke-width: 1.12; stroke: #7F7F7F; stroke-dasharray: 6.00,6.00;' />
<line x1='407.08' y1='77.76' x2='428.68' y2='77.76' style='stroke-width: 1.12; stroke: #4682B4; stroke-dasharray: 6.00,6.00;' />
<text x='439.48' y='53.26' style='font-size: 12.00px; font-family: "Roboto", -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif;' textLength='44.69px' lengthAdjust='spacingAndGlyphs'>Portugal</text>
<text x='439.48' y='67.66' style='font-size: 12.00px; font-family: "Roboto", -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif;' textLength='89.36px' lengthAdjust='spacingAndGlyphs'>AoE (unmasked)</text>
<text x='439.48' y='82.06' style='font-size: 12.00px; font-family: "Roboto", -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif;' textLength='82.03px' lengthAdjust='spacingAndGlyphs'>AoE (land only)</text>
</g>
</g>
</svg></div><p class="caption">
Portugal with land-masked AoE. The halo extends into Spain but not into
the Atlantic.
</p>
</div>
<p>The <code>area = 1</code> parameter ensures the halo has equal land
area to the core, even after the ocean is masked out. Without this,
coastline clipping would reduce the effective halo area.</p>
</div>
</div>
<div class="section level2">
<h2 id="scale-parameter">Scale Parameter<a class="anchor" aria-label="anchor" href="#scale-parameter"></a>
</h2>
<p>The <code>scale</code> parameter controls halo size as a proportion
of core area.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Default: equal core/halo areas (scale = sqrt(2) - 1)</span></span>
<span><span class="va">result_default</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe.html">aoe</a></span><span class="op">(</span><span class="va">pts</span>, <span class="va">support</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Scale = 1: larger halo (3:1 area ratio)</span></span>
<span><span class="va">result_large</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe.html">aoe</a></span><span class="op">(</span><span class="va">pts</span>, <span class="va">support</span>, scale <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th>Scale</th>
<th>Halo:Core Area</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>
<code>sqrt(2) - 1</code> (default)</td>
<td>1:1</td>
</tr>
<tr class="even">
<td><code>1</code></td>
<td>3:1</td>
</tr>
<tr class="odd">
<td><code>0.5</code></td>
<td>1.25:1</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="area-parameter-target-halo-area">Area Parameter (Target Halo Area)<a class="anchor" aria-label="anchor" href="#area-parameter-target-halo-area"></a>
</h2>
<p>Sometimes you need a specific halo area regardless of masking. The
<code>area</code> parameter specifies the target halo area as a
proportion of the original support:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Halo area = original area (same as scale = sqrt(2) - 1 without mask)</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe.html">aoe</a></span><span class="op">(</span><span class="va">pts</span>, <span class="va">support</span>, area <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Halo area = half of original</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe.html">aoe</a></span><span class="op">(</span><span class="va">pts</span>, <span class="va">support</span>, area <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span></span></code></pre></div>
<p>Unlike <code>scale</code>, <code>area</code> accounts for masking:
the function finds the scale that produces the target halo area
<em>after</em> mask intersection. This is useful for coastal regions
where scale alone would produce inconsistent effective areas.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Target area = 1 means halo = original, even after coastline clipping</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe.html">aoe</a></span><span class="op">(</span><span class="va">pts</span>, <span class="va">support</span>, area <span class="op">=</span> <span class="fl">1</span>, mask <span class="op">=</span> <span class="st">"land"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="adaptive-expansion-with-aoe_expand">Adaptive Expansion with <code>aoe_expand()</code><a class="anchor" aria-label="anchor" href="#adaptive-expansion-with-aoe_expand"></a>
</h2>
<p>When some supports have too few points at baseline AoE,
<code><a href="../reference/aoe_expand.html">aoe_expand()</a></code> finds the minimum scale needed to capture a
target number of points:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create sparse data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">42</span><span class="op">)</span></span>
<span><span class="va">pts_sparse</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">15</span><span class="op">)</span>,</span>
<span>  geometry <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html" class="external-link">st_sfc</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, <span class="kw">function</span><span class="op">(</span><span class="va">i</span><span class="op">)</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">20</span>, <span class="fl">80</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">20</span>, <span class="fl">80</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="kw">function</span><span class="op">(</span><span class="va">i</span><span class="op">)</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span>, <span class="op">-</span><span class="fl">50</span>, <span class="fl">150</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span>, <span class="op">-</span><span class="fl">50</span>, <span class="fl">150</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span><span class="op">)</span>,</span>
<span>  crs <span class="op">=</span> <span class="fl">32631</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Expand until at least 10 points are captured</span></span>
<span><span class="va">result_expand</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe_expand.html">aoe_expand</a></span><span class="op">(</span><span class="va">pts_sparse</span>, <span class="va">support</span>, min_points <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<p>Two safety caps prevent unreasonable expansion:</p>
<ul>
<li><p><code>max_area = 2</code> (default): halo area cannot exceed 2×
the original</p></li>
<li><p><code>max_dist</code>: maximum expansion distance in CRS
units</p></li>
</ul>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Strict caps</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe_expand.html">aoe_expand</a></span><span class="op">(</span><span class="va">pts</span>, <span class="va">support</span>,</span>
<span>                     min_points <span class="op">=</span> <span class="fl">50</span>,</span>
<span>                     max_area <span class="op">=</span> <span class="fl">1.5</span>,    <span class="co"># halo ≤ 1.5× original</span></span>
<span>                     max_dist <span class="op">=</span> <span class="fl">500</span><span class="op">)</span>    <span class="co"># max 500m expansion</span></span></code></pre></div>
<p>Check expansion details:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">info</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">result_expand</span>, <span class="st">"expansion_info"</span><span class="op">)</span></span>
<span><span class="va">info</span></span>
<span><span class="co">#&gt;   support_id scale_used points_captured target_reached cap_hit</span></span>
<span><span class="co">#&gt; 1          1  0.6412593              10           TRUE    none</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="balanced-sampling-with-aoe_sample">Balanced Sampling with <code>aoe_sample()</code><a class="anchor" aria-label="anchor" href="#balanced-sampling-with-aoe_sample"></a>
</h2>
<p>Core regions often dominate due to point density.
<code><a href="../reference/aoe_sample.html">aoe_sample()</a></code> provides stratified sampling to balance
core/halo representation:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create imbalanced data (many core, few halo)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">42</span><span class="op">)</span></span>
<span><span class="va">pts_imbal</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">60</span><span class="op">)</span>,</span>
<span>  geometry <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html" class="external-link">st_sfc</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">50</span>, <span class="kw">function</span><span class="op">(</span><span class="va">i</span><span class="op">)</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span>, <span class="fl">90</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span>, <span class="fl">90</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="kw">function</span><span class="op">(</span><span class="va">i</span><span class="op">)</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">110</span>, <span class="fl">140</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span>, <span class="fl">90</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span><span class="op">)</span>,</span>
<span>  crs <span class="op">=</span> <span class="fl">32631</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">result_imbal</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe.html">aoe</a></span><span class="op">(</span><span class="va">pts_imbal</span>, <span class="va">support</span>, scale <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Default: balance core/halo (downsamples core to match halo)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span></span>
<span><span class="va">balanced</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe_sample.html">aoe_sample</a></span><span class="op">(</span><span class="va">result_imbal</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">balanced</span><span class="op">$</span><span class="va">aoe_class</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; core halo </span></span>
<span><span class="co">#&gt;   10   10</span></span></code></pre></div>
<p>Custom ratios and fixed sample sizes:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Fixed n with 70/30 split</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span></span>
<span><span class="va">sampled</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe_sample.html">aoe_sample</a></span><span class="op">(</span><span class="va">result_imbal</span>, n <span class="op">=</span> <span class="fl">20</span>, ratio <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>core <span class="op">=</span> <span class="fl">0.7</span>, halo <span class="op">=</span> <span class="fl">0.3</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">sampled</span><span class="op">$</span><span class="va">aoe_class</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; core halo </span></span>
<span><span class="co">#&gt;   14    6</span></span></code></pre></div>
<p>For multiple supports, use <code>by = "support"</code> to sample
within each:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sampled</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe_sample.html">aoe_sample</a></span><span class="op">(</span><span class="va">result_multi</span>, by <span class="op">=</span> <span class="st">"support"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="border-classification-with-aoe_border">Border Classification with <code>aoe_border()</code><a class="anchor" aria-label="anchor" href="#border-classification-with-aoe_border"></a>
</h2>
<p>When your study involves a boundary <em>line</em> rather than a
polygon (e.g., a river, mountain range, or political border), use
<code><a href="../reference/aoe_border.html">aoe_border()</a></code> to classify points by their distance from and
side of the border.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create a diagonal border line</span></span>
<span><span class="va">border_line</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>  geometry <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html" class="external-link">st_sfc</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_linestring</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>,</span>
<span>      <span class="fl">100</span>, <span class="fl">100</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="fl">2</span>, byrow <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  crs <span class="op">=</span> <span class="fl">32631</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create points on both sides</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">42</span><span class="op">)</span></span>
<span><span class="va">pts_border</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">30</span><span class="op">)</span>,</span>
<span>  geometry <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html" class="external-link">st_sfc</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="co"># Points on side 1 (above the line)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">15</span>, <span class="kw">function</span><span class="op">(</span><span class="va">i</span><span class="op">)</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span>, <span class="fl">90</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span>, <span class="fl">90</span><span class="op">)</span> <span class="op">+</span> <span class="fl">20</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    <span class="co"># Points on side 2 (below the line)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">15</span>, <span class="kw">function</span><span class="op">(</span><span class="va">i</span><span class="op">)</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span>, <span class="fl">90</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span>, <span class="fl">90</span><span class="op">)</span> <span class="op">-</span> <span class="fl">20</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span><span class="op">)</span>,</span>
<span>  crs <span class="op">=</span> <span class="fl">32631</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Classify by distance from border</span></span>
<span><span class="va">result_border</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe_border.html">aoe_border</a></span><span class="op">(</span></span>
<span>  <span class="va">pts_border</span>, <span class="va">border_line</span>,</span>
<span>  width <span class="op">=</span> <span class="fl">30</span>,</span>
<span>  side_names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"north"</span>, <span class="st">"south"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Extract geometries for ggplot2</span></span>
<span><span class="va">geoms</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">result_border</span>, <span class="st">"border_geometries"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Plot with ggplot2</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co"># Halo zones (background)</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">geoms</span><span class="op">$</span><span class="va">side1_halo</span>, fill <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">aoe_colors</span><span class="op">$</span><span class="va">side_a</span>, <span class="st">"20"</span><span class="op">)</span>, color <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">geoms</span><span class="op">$</span><span class="va">side2_halo</span>, fill <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">aoe_colors</span><span class="op">$</span><span class="va">side_b</span>, <span class="st">"20"</span><span class="op">)</span>, color <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co"># Core zones</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">geoms</span><span class="op">$</span><span class="va">side1_core</span>, fill <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">aoe_colors</span><span class="op">$</span><span class="va">side_a</span>, <span class="st">"40"</span><span class="op">)</span>, color <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">geoms</span><span class="op">$</span><span class="va">side2_core</span>, fill <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">aoe_colors</span><span class="op">$</span><span class="va">side_b</span>, <span class="st">"40"</span><span class="op">)</span>, color <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co"># Border line</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">geoms</span><span class="op">$</span><span class="va">border</span>, color <span class="op">=</span> <span class="va">aoe_colors</span><span class="op">$</span><span class="va">support</span>, linewidth <span class="op">=</span> <span class="fl">1.5</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co"># Points</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">result_border</span>,</span>
<span>          <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="va">side</span>, shape <span class="op">=</span> <span class="va">aoe_class</span><span class="op">)</span>, size <span class="op">=</span> <span class="fl">3</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_color_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"north"</span> <span class="op">=</span> <span class="va">aoe_colors</span><span class="op">$</span><span class="va">side_a</span>, <span class="st">"south"</span> <span class="op">=</span> <span class="va">aoe_colors</span><span class="op">$</span><span class="va">side_b</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_shape_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"core"</span> <span class="op">=</span> <span class="fl">16</span>, <span class="st">"halo"</span> <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>                     labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Core"</span>, <span class="st">"Halo"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"Side"</span>, shape <span class="op">=</span> <span class="st">"Class"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_aoe</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<div class="svg-container"><button type="button" class="btn btn-primary btn-copy-svg" title="Copy SVG to clipboard" aria-label="Copy SVG to clipboard" data-bs-toggle="tooltip" data-bs-placement="left"><i class="fa fa-copy"></i></button>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='576.00pt' height='432.00pt' viewBox='0 0 576.00 432.00' class="r-plt inline-svg" style="max-width:100%;width:100%;height:auto;">
<g class='svglite'>
<defs>
  <style type='text/css'><![CDATA[
    /* theme-aware-processed */
    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite circle {
      fill: none;
      stroke: #3E3F3A;
      stroke-linecap: round;
      stroke-linejoin: round;
      stroke-miterlimit: 10.00;
    }
    .svglite > g > rect {
      fill: none;
      stroke: #3E3F3A;
      stroke-linecap: round;
      stroke-linejoin: round;
      stroke-miterlimit: 10.00;
    }
    .svglite text {
      white-space: pre;
      fill: #3E3F3A;
    }
    .svglite g.glyphgroup path {
      fill: inherit;
      stroke: none;
    }
  ]]></style>
</defs>
<rect width='100%' height='100%' style='stroke: none; fill: #F5F6F8;'/>
<defs>
  <clipPath id='cpMC4wMHw1NzYuMDB8MC4wMHw0MzIuMDA='>
    <rect x='0.00' y='0.00' width='576.00' height='432.00' />
  </clipPath>
</defs>
<g clip-path='url(#cpMC4wMHw1NzYuMDB8MC4wMHw0MzIuMDA=)'>
</g>
<defs>
  <clipPath id='cpNDQuMDd8NTMxLjkzfDAuMDB8NDMyLjAw'>
    <rect x='44.07' y='0.00' width='487.86' height='432.00' />
  </clipPath>
</defs>
<g clip-path='url(#cpNDQuMDd8NTMxLjkzfDAuMDB8NDMyLjAw)'>
<rect x='44.07' y='0.00' width='487.86' height='432.00' style='stroke-width: 0.00; stroke: none;' /> fill: #F5F6F8;' />
</g>
<g clip-path='url(#cpMC4wMHw1NzYuMDB8MC4wMHw0MzIuMDA=)'>
</g>
<defs>
  <clipPath id='cpNTQuMDN8NDY2LjExfDkuOTZ8NDIyLjA0'>
    <rect x='54.03' y='9.96' width='412.07' height='412.07' />
  </clipPath>
</defs>
<g clip-path='url(#cpNTQuMDN8NDY2LjExfDkuOTZ8NDIyLjA0)'>
<rect x='54.03' y='9.96' width='412.07' height='412.07' style='stroke-width: 0.00; stroke: none;' /> fill: #F5F6F8;' />
<path d='M 280.91 51.46 L 285.15 48.21 L 289.56 45.18 L 294.12 42.38 L 298.82 39.83 L 303.65 37.53 L 308.59 35.48 L 313.64 33.69 L 318.76 32.17 L 323.97 30.93 L 329.22 29.95 L 334.53 29.25 L 339.86 28.83 L 345.21 28.69 L 350.55 28.83 L 355.89 29.25 L 361.19 29.95 L 366.45 30.93 L 371.65 32.17 L 376.78 33.69 L 381.82 35.48 L 386.76 37.53 L 391.59 39.83 L 396.29 42.38 L 400.85 45.18 L 405.26 48.21 L 409.50 51.46 L 413.57 54.94 L 417.45 58.62 L 381.33 94.74 L 379.39 92.90 L 377.36 91.16 L 375.23 89.53 L 373.03 88.02 L 370.75 86.62 L 368.40 85.34 L 365.98 84.19 L 363.51 83.17 L 360.99 82.28 L 358.43 81.52 L 355.83 80.89 L 353.20 80.41 L 350.55 80.06 L 347.88 79.85 L 345.21 79.78 L 342.53 79.85 L 339.87 80.06 L 337.22 80.41 L 334.59 80.89 L 331.99 81.52 L 329.42 82.28 L 326.90 83.17 L 324.43 84.19 L 322.02 85.34 L 319.67 86.62 L 317.39 88.02 L 315.18 89.53 L 313.06 91.16 L 311.03 92.90 L 309.09 94.74 L 138.81 265.02 L 136.97 266.96 L 135.23 268.99 L 133.60 271.11 L 132.09 273.32 L 130.69 275.60 L 129.41 277.95 L 128.26 280.36 L 127.24 282.83 L 126.34 285.35 L 125.59 287.92 L 124.96 290.52 L 124.47 293.15 L 124.12 295.80 L 123.91 298.47 L 123.84 301.14 L 123.91 303.81 L 124.12 306.48 L 124.47 309.13 L 124.96 311.76 L 125.59 314.36 L 126.34 316.93 L 127.24 319.45 L 128.26 321.92 L 129.41 324.33 L 130.69 326.68 L 132.09 328.96 L 133.60 331.17 L 135.23 333.29 L 136.97 335.32 L 138.81 337.26 L 102.69 373.38 L 99.00 369.50 L 95.53 365.44 L 92.27 361.19 L 89.24 356.78 L 86.45 352.22 L 83.90 347.52 L 81.59 342.69 L 79.55 337.75 L 77.76 332.71 L 76.24 327.58 L 74.99 322.38 L 74.02 317.12 L 73.32 311.82 L 72.90 306.49 L 72.76 301.14 L 72.90 295.79 L 73.32 290.46 L 74.02 285.16 L 74.99 279.90 L 76.24 274.70 L 77.76 269.57 L 79.55 264.53 L 81.59 259.58 L 83.90 254.76 L 86.45 250.06 L 89.24 245.50 L 92.27 241.09 L 95.53 236.84 L 99.00 232.78 L 102.69 228.90 L 272.96 58.62 L 276.84 54.94 L 280.91 51.46 Z' style='fill-rule: evenodd; fill: #2B6CB0; fill-opacity: 0.13; stroke-width: 0.47; stroke: none; stroke-linecap: butt;' />
<path d='M 424.61 66.56 L 427.86 70.81 L 430.89 75.22 L 433.69 79.78 L 436.24 84.48 L 438.54 89.31 L 440.59 94.25 L 442.37 99.29 L 443.89 104.42 L 445.14 109.62 L 446.12 114.88 L 446.81 120.18 L 447.23 125.51 L 447.37 130.86 L 447.23 136.21 L 446.81 141.54 L 446.12 146.84 L 445.14 152.10 L 443.89 157.30 L 442.37 162.43 L 440.59 167.47 L 438.54 172.42 L 436.24 177.24 L 433.69 181.94 L 430.89 186.50 L 427.86 190.91 L 424.61 195.16 L 421.13 199.22 L 417.45 203.10 L 247.17 373.38 L 243.29 377.06 L 239.22 380.54 L 234.98 383.79 L 230.57 386.82 L 226.01 389.62 L 221.31 392.17 L 216.48 394.47 L 211.54 396.52 L 206.50 398.31 L 201.37 399.83 L 196.17 401.07 L 190.91 402.05 L 185.61 402.75 L 180.28 403.17 L 174.93 403.31 L 169.58 403.17 L 164.25 402.75 L 158.95 402.05 L 153.69 401.07 L 148.49 399.83 L 143.36 398.31 L 138.31 396.52 L 133.37 394.47 L 128.55 392.17 L 123.84 389.62 L 119.28 386.82 L 114.88 383.79 L 110.63 380.54 L 106.57 377.06 L 102.69 373.38 L 102.69 373.38 L 138.81 337.26 L 138.81 337.26 L 140.75 339.10 L 142.78 340.84 L 144.90 342.47 L 147.11 343.98 L 149.39 345.38 L 151.74 346.66 L 154.15 347.81 L 156.62 348.83 L 159.14 349.72 L 161.71 350.48 L 164.31 351.11 L 166.94 351.59 L 169.59 351.94 L 172.25 352.15 L 174.93 352.22 L 177.60 352.15 L 180.27 351.94 L 182.92 351.59 L 185.55 351.11 L 188.15 350.48 L 190.71 349.72 L 193.24 348.83 L 195.71 347.81 L 198.12 346.66 L 200.47 345.38 L 202.75 343.98 L 204.95 342.47 L 207.08 340.84 L 209.11 339.10 L 211.05 337.26 L 381.33 166.98 L 383.17 165.04 L 384.91 163.01 L 386.53 160.89 L 388.05 158.68 L 389.45 156.40 L 390.72 154.05 L 391.87 151.64 L 392.90 149.17 L 393.79 146.65 L 394.55 144.08 L 395.17 141.48 L 395.66 138.85 L 396.01 136.20 L 396.22 133.53 L 396.29 130.86 L 396.22 128.19 L 396.01 125.52 L 395.66 122.87 L 395.17 120.24 L 394.55 117.64 L 393.79 115.07 L 392.90 112.55 L 391.87 110.08 L 390.72 107.67 L 389.45 105.32 L 388.05 103.04 L 386.53 100.83 L 384.91 98.71 L 383.17 96.68 L 381.33 94.74 L 417.45 58.62 L 421.13 62.50 L 424.61 66.56 Z' style='fill-rule: evenodd; fill: #C05621; fill-opacity: 0.13; stroke-width: 0.47; stroke: none; stroke-linecap: butt;' />
<path d='M 311.03 92.90 L 313.06 91.16 L 315.18 89.53 L 317.39 88.02 L 319.67 86.62 L 322.02 85.34 L 324.43 84.19 L 326.90 83.17 L 329.42 82.28 L 331.99 81.52 L 334.59 80.89 L 337.22 80.41 L 339.87 80.06 L 342.53 79.85 L 345.21 79.78 L 347.88 79.85 L 350.55 80.06 L 353.20 80.41 L 355.83 80.89 L 358.43 81.52 L 360.99 82.28 L 363.51 83.17 L 365.98 84.19 L 368.40 85.34 L 370.75 86.62 L 373.03 88.02 L 375.23 89.53 L 377.36 91.16 L 379.39 92.90 L 381.33 94.74 L 138.81 337.26 L 136.97 335.32 L 135.23 333.29 L 133.60 331.17 L 132.09 328.96 L 130.69 326.68 L 129.41 324.33 L 128.26 321.92 L 127.24 319.45 L 126.34 316.93 L 125.59 314.36 L 124.96 311.76 L 124.47 309.13 L 124.12 306.48 L 123.91 303.81 L 123.84 301.14 L 123.91 298.47 L 124.12 295.80 L 124.47 293.15 L 124.96 290.52 L 125.59 287.92 L 126.34 285.35 L 127.24 282.83 L 128.26 280.36 L 129.41 277.95 L 130.69 275.60 L 132.09 273.32 L 133.60 271.11 L 135.23 268.99 L 136.97 266.96 L 138.81 265.02 L 309.09 94.74 L 311.03 92.90 Z' style='fill-rule: evenodd; fill: #2B6CB0; fill-opacity: 0.25; stroke-width: 0.47; stroke: none; stroke-linecap: butt;' />
<path d='M 383.17 96.68 L 384.91 98.71 L 386.53 100.83 L 388.05 103.04 L 389.45 105.32 L 390.72 107.67 L 391.87 110.08 L 392.90 112.55 L 393.79 115.07 L 394.55 117.64 L 395.17 120.24 L 395.66 122.87 L 396.01 125.52 L 396.22 128.19 L 396.29 130.86 L 396.22 133.53 L 396.01 136.20 L 395.66 138.85 L 395.17 141.48 L 394.55 144.08 L 393.79 146.65 L 392.90 149.17 L 391.87 151.64 L 390.72 154.05 L 389.45 156.40 L 388.05 158.68 L 386.53 160.89 L 384.91 163.01 L 383.17 165.04 L 381.33 166.98 L 211.05 337.26 L 209.11 339.10 L 207.08 340.84 L 204.95 342.47 L 202.75 343.98 L 200.47 345.38 L 198.12 346.66 L 195.71 347.81 L 193.24 348.83 L 190.71 349.72 L 188.15 350.48 L 185.55 351.11 L 182.92 351.59 L 180.27 351.94 L 177.60 352.15 L 174.93 352.22 L 172.25 352.15 L 169.59 351.94 L 166.94 351.59 L 164.31 351.11 L 161.71 350.48 L 159.14 349.72 L 156.62 348.83 L 154.15 347.81 L 151.74 346.66 L 149.39 345.38 L 147.11 343.98 L 144.90 342.47 L 142.78 340.84 L 140.75 339.10 L 138.81 337.26 L 138.81 337.26 L 381.33 94.74 L 383.17 96.68 Z' style='fill-rule: evenodd; fill: #C05621; fill-opacity: 0.25; stroke-width: 0.47; stroke: none; stroke-linecap: butt;' />
<polyline points='174.93,301.14 345.21,130.86 ' style='stroke-width: 3.20; stroke: #2D3748; stroke-linecap: butt;' />
<circle cx='316.57' cy='122.40' r='3.56' style='stroke-width: 0.71; stroke: none; stroke-linecap: butt; fill: #2B6CB0;' />
<circle cx='230.94' cy='136.93' r='3.56' style='stroke-width: 0.71; stroke: #2B6CB0; stroke-linecap: butt;' />
<circle cx='279.38' cy='179.34' r='3.56' style='stroke-width: 0.71; stroke: none; stroke-linecap: butt; fill: #2B6CB0;' />
<circle cx='292.30' cy='231.71' r='3.56' style='stroke-width: 0.71; stroke: none; stroke-linecap: butt; fill: #C05621;' />
<circle cx='281.45' cy='154.01' r='3.56' style='stroke-width: 0.71; stroke: none; stroke-linecap: butt; fill: #2B6CB0;' />
<circle cx='254.31' cy='152.10' r='3.56' style='stroke-width: 0.71; stroke: none; stroke-linecap: butt; fill: #2B6CB0;' />
<circle cx='319.28' cy='215.26' r='3.56' style='stroke-width: 0.71; stroke: none; stroke-linecap: butt; fill: #C05621;' />
<circle cx='254.93' cy='122.00' r='3.56' style='stroke-width: 0.71; stroke: #2B6CB0; stroke-linecap: butt;' />
<circle cx='325.21' cy='234.05' r='3.56' style='stroke-width: 0.71; stroke: #C05621; stroke-linecap: butt;' />
<circle cx='256.66' cy='173.73' r='3.56' style='stroke-width: 0.71; stroke: none; stroke-linecap: butt; fill: #2B6CB0;' />
<circle cx='315.11' cy='231.16' r='3.56' style='stroke-width: 0.71; stroke: none; stroke-linecap: butt; fill: #C05621;' />
<circle cx='326.67' cy='121.10' r='3.56' style='stroke-width: 0.71; stroke: none; stroke-linecap: butt; fill: #2B6CB0;' />
<circle cx='203.19' cy='180.01' r='3.56' style='stroke-width: 0.71; stroke: #2B6CB0; stroke-linecap: butt;' />
<circle cx='245.11' cy='126.67' r='3.56' style='stroke-width: 0.71; stroke: #2B6CB0; stroke-linecap: butt;' />
<circle cx='252.84' cy='136.17' r='3.56' style='stroke-width: 0.71; stroke: #2B6CB0; stroke-linecap: butt;' />
<circle cx='292.43' cy='207.68' r='3.56' style='stroke-width: 0.71; stroke: none; stroke-linecap: butt; fill: #C05621;' />
<circle cx='244.83' cy='224.83' r='3.56' style='stroke-width: 0.71; stroke: none; stroke-linecap: butt; fill: #2B6CB0;' />
<circle cx='192.49' cy='204.70' r='3.56' style='stroke-width: 0.71; stroke: #2B6CB0; stroke-linecap: butt;' />
<circle cx='192.96' cy='289.88' r='3.56' style='stroke-width: 0.71; stroke: none; stroke-linecap: butt; fill: #C05621;' />
<circle cx='315.46' cy='234.83' r='3.56' style='stroke-width: 0.71; stroke: #C05621; stroke-linecap: butt;' />
<circle cx='243.66' cy='258.81' r='3.56' style='stroke-width: 0.71; stroke: none; stroke-linecap: butt; fill: #C05621;' />
<circle cx='197.06' cy='185.55' r='3.56' style='stroke-width: 0.71; stroke: #2B6CB0; stroke-linecap: butt;' />
<circle cx='250.77' cy='187.72' r='3.56' style='stroke-width: 0.71; stroke: none; stroke-linecap: butt; fill: #2B6CB0;' />
<circle cx='312.89' cy='230.99' r='3.56' style='stroke-width: 0.71; stroke: none; stroke-linecap: butt; fill: #C05621;' />
<circle cx='324.22' cy='233.87' r='3.56' style='stroke-width: 0.71; stroke: #C05621; stroke-linecap: butt;' />
<circle cx='237.38' cy='270.93' r='3.56' style='stroke-width: 0.71; stroke: none; stroke-linecap: butt; fill: #C05621;' />
<circle cx='246.24' cy='211.27' r='3.56' style='stroke-width: 0.71; stroke: none; stroke-linecap: butt; fill: #2B6CB0;' />
<circle cx='197.26' cy='216.16' r='3.56' style='stroke-width: 0.71; stroke: none; stroke-linecap: butt; fill: #2B6CB0;' />
<circle cx='284.22' cy='294.84' r='3.56' style='stroke-width: 0.71; stroke: #C05621; stroke-linecap: butt;' />
<circle cx='227.52' cy='248.09' r='3.56' style='stroke-width: 0.71; stroke: none; stroke-linecap: butt; fill: #2B6CB0;' />
</g>
<g clip-path='url(#cpMC4wMHw1NzYuMDB8MC4wMHw0MzIuMDA=)'>
<rect x='471.77' y='160.75' width='50.20' height='51.65' style='stroke-width: 0.00; stroke: none;' /> fill: #F5F6F8;' />
<text x='471.77' y='170.60' style='font-size: 12.00px; font-weight: bold;fill: #2D3748; font-family: "Roboto", -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif;' textLength='25.33px' lengthAdjust='spacingAndGlyphs'>Side</text>
<rect x='471.77' y='177.84' width='17.28' height='17.28' style='stroke-width: 0.00; stroke: none;' /> fill: #F5F6F8;' />
<circle cx='480.41' cy='186.48' r='3.56' style='stroke-width: 0.71; stroke: #2B6CB0; fill: #2B6CB0;' />
<rect x='471.77' y='195.12' width='17.28' height='17.28' style='stroke-width: 0.00; stroke: none;' /> fill: #F5F6F8;' />
<circle cx='480.41' cy='203.76' r='3.56' style='stroke-width: 0.71; stroke: #C05621; fill: #C05621;' />
<text x='495.03' y='190.42' style='font-size: 11.00px;fill: #2D3748; font-family: "Roboto", -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif;' textLength='25.09px' lengthAdjust='spacingAndGlyphs'>north</text>
<text x='495.03' y='207.70' style='font-size: 11.00px;fill: #2D3748; font-family: "Roboto", -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif;' textLength='26.94px' lengthAdjust='spacingAndGlyphs'>south</text>
<rect x='471.77' y='219.60' width='47.10' height='51.65' style='stroke-width: 0.00; stroke: none;' /> fill: #F5F6F8;' />
<text x='471.77' y='229.46' style='font-size: 12.00px; font-weight: bold;fill: #2D3748; font-family: "Roboto", -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif;' textLength='32.02px' lengthAdjust='spacingAndGlyphs'>Class</text>
<rect x='471.77' y='236.69' width='17.28' height='17.28' style='stroke-width: 0.00; stroke: none;' /> fill: #F5F6F8;' />
<circle cx='480.41' cy='245.33' r='3.56' style='stroke-width: 0.71; stroke: none; fill: #000000;' />
<rect x='471.77' y='253.97' width='17.28' height='17.28' style='stroke-width: 0.00; stroke: none;' /> fill: #F5F6F8;' />
<circle cx='480.41' cy='262.61' r='3.56' style='stroke-width: 0.71;' />
<text x='495.03' y='249.27' style='font-size: 11.00px;fill: #2D3748; font-family: "Roboto", -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif;' textLength='23.84px' lengthAdjust='spacingAndGlyphs'>Core</text>
<text x='495.03' y='266.55' style='font-size: 11.00px;fill: #2D3748; font-family: "Roboto", -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif;' textLength='22.62px' lengthAdjust='spacingAndGlyphs'>Halo</text>
</g>
</g>
</svg></div><p class="caption">
Border classification. Points are classified by side (blue vs orange)
and distance (core vs halo) from the border line.
</p>
</div>
<p>The <code><a href="../reference/aoe_border.html">aoe_border()</a></code> function:</p>
<ul>
<li><p>Creates symmetric buffer zones on both sides of the
border</p></li>
<li><p>Classifies points as “core” (near border) or “halo” (farther
away)</p></li>
<li><p>Assigns each point to a side based on position relative to the
line</p></li>
</ul>
<div class="section level3">
<h3 id="area-based-border-zones">Area-Based Border Zones<a class="anchor" aria-label="anchor" href="#area-based-border-zones"></a>
</h3>
<p>Use the <code>area</code> parameter to specify target zone areas
instead of fixed widths:</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Each side's core zone has area 5000 (in CRS units²)</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe_border.html">aoe_border</a></span><span class="op">(</span><span class="va">pts</span>, <span class="va">border</span>, area <span class="op">=</span> <span class="fl">5000</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="sampling-from-border-results">Sampling from Border Results<a class="anchor" aria-label="anchor" href="#sampling-from-border-results"></a>
</h3>
<p><code><a href="../reference/aoe_sample.html">aoe_sample()</a></code> also works with border results, allowing
stratification by side or class:</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Balance by side (equal north/south)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span></span>
<span><span class="va">balanced_side</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe_sample.html">aoe_sample</a></span><span class="op">(</span><span class="va">result_border</span>, ratio <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>north <span class="op">=</span> <span class="fl">0.5</span>, south <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">balanced_side</span><span class="op">$</span><span class="va">side</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; north south </span></span>
<span><span class="co">#&gt;    12    12</span></span>
<span></span>
<span><span class="co"># Balance by distance class</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span></span>
<span><span class="va">balanced_class</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe_sample.html">aoe_sample</a></span><span class="op">(</span><span class="va">result_border</span>, by <span class="op">=</span> <span class="st">"class"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">balanced_class</span><span class="op">$</span><span class="va">aoe_class</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; core halo </span></span>
<span><span class="co">#&gt;   11   11</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="diagnostics">Diagnostics<a class="anchor" aria-label="anchor" href="#diagnostics"></a>
</h2>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/aoe_summary.html">aoe_summary</a></span><span class="op">(</span><span class="va">result</span><span class="op">)</span></span>
<span><span class="co">#&gt;   support_id n_total n_core n_halo prop_core prop_halo</span></span>
<span><span class="co">#&gt; 1          1       4      3      1      0.75      0.25</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="summary">Summary<a class="anchor" aria-label="anchor" href="#summary"></a>
</h2>
<ul>
<li><p><code><a href="../reference/aoe.html">aoe()</a></code> classifies points as “core” or “halo”</p></li>
<li><p>Works with dataframes or sf objects</p></li>
<li><p>Pass country codes directly: <code>aoe(df, "AT")</code></p></li>
<li><p>Area-based halos enable consistent cross-country
comparisons</p></li>
<li><p>Use <code>mask</code> for coastlines and hard boundaries</p></li>
<li><p>Use <code>area</code> parameter for target halo area (accounts
for masking)</p></li>
<li><p>Use <code><a href="../reference/aoe_expand.html">aoe_expand()</a></code> for adaptive expansion to capture
minimum points</p></li>
<li><p>Use <code><a href="../reference/aoe_sample.html">aoe_sample()</a></code> for balanced core/halo
sampling</p></li>
<li><p>Use <code><a href="../reference/aoe_border.html">aoe_border()</a></code> for border/line-based
classification</p></li>
<li><p>Use <code><a href="../reference/aoe_summary.html">aoe_summary()</a></code> for diagnostics</p></li>
</ul>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Gilles Colling.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  
<script>
/* SVG Copy Button Functionality */
(function() {
  "use strict";

  // Initialize SVG copy buttons after DOM is ready
  document.addEventListener("DOMContentLoaded", function() {
    if (typeof ClipboardJS === "undefined") {
      console.warn("ClipboardJS not loaded - SVG copy buttons disabled");
      return;
    }

    // Initialize clipboard for SVG copy buttons
    var svgClipboard = new ClipboardJS(".btn-copy-svg", {
      text: function(trigger) {
        var container = trigger.closest(".svg-container");
        if (!container) return "";

        var svg = container.querySelector("svg");
        if (!svg) return "";

        // Clone SVG to avoid modifying the original
        var clone = svg.cloneNode(true);

        // Remove inline-svg class (not needed in copied version)
        clone.classList.remove("inline-svg");

        // Add XML declaration and serialize
        var serializer = new XMLSerializer();
        var svgString = serializer.serializeToString(clone);

        // Add XML declaration if not present
        if (!svgString.startsWith("<?xml")) {
          svgString = '<?xml version="1.0" encoding="UTF-8"?>\n' + svgString;
        }

        return svgString;
      }
    });

    // Handle success
    svgClipboard.on("success", function(e) {
      var btn = e.trigger;
      var originalTitle = btn.getAttribute("data-bs-original-title") || btn.getAttribute("title");

      // Update tooltip to show "Copied!"
      btn.setAttribute("data-bs-original-title", "Copied!");
      var tooltip = bootstrap.Tooltip.getInstance(btn);
      if (tooltip) {
        tooltip.show();
      }

      // Reset after delay
      setTimeout(function() {
        btn.setAttribute("data-bs-original-title", originalTitle);
      }, 1500);

      e.clearSelection();
    });

    // Handle error
    svgClipboard.on("error", function(e) {
      var btn = e.trigger;
      btn.setAttribute("data-bs-original-title", "Press Ctrl+C to copy");
      var tooltip = bootstrap.Tooltip.getInstance(btn);
      if (tooltip) {
        tooltip.show();
      }
    });

    // Initialize tooltips for SVG copy buttons
    var svgCopyButtons = document.querySelectorAll(".btn-copy-svg");
    svgCopyButtons.forEach(function(btn) {
      new bootstrap.Tooltip(btn, { container: "body" });
    });
  });
})();
</script>
</body>
</html>
