<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Quick Start • areaOfEffect</title>
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Quick Start">
</head>
<body>
<p>








  pkgdown/mathjax-config.html

  

  </p>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">areaOfEffect</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.5</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/quickstart.html">Get Started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/quickstart.html">Quick Start</a></li>
    <li><a class="dropdown-item" href="../articles/theory.html">Theory</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/gcol33/areaOfEffect" aria-label="GitHub"><span class="fa fab fa-github"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Quick Start</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/gcol33/areaOfEffect/blob/HEAD/vignettes/quickstart.Rmd" class="external-link"><code>vignettes/quickstart.Rmd</code></a></small>
      <div class="d-none name"><code>quickstart.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>The <code>areaOfEffect</code> package classifies spatial points by
their position relative to a region’s boundary—without requiring sf
expertise.</p>
<p><strong>Dataframe in → dataframe out.</strong></p>
<p>Points are classified as:</p>
<ul>
<li><p><strong>Core</strong>: inside the original support</p></li>
<li><p><strong>Halo</strong>: outside the original but inside the area
of effect</p></li>
<li><p><strong>Pruned</strong>: outside the AoE entirely
(removed)</p></li>
</ul>
<p>By default, halos are defined as <strong>equal area to the
core</strong>—a proportion-based definition that enables consistent
cross-region comparisons.</p>
</div>
<div class="section level2">
<h2 id="getting-started">Getting Started<a class="anchor" aria-label="anchor" href="#getting-started"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://gillescolling.com/areaOfEffect/" class="external-link">areaOfEffect</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="from-a-dataframe">From a Dataframe<a class="anchor" aria-label="anchor" href="#from-a-dataframe"></a>
</h3>
<p>The simplest usage: pass a dataframe with coordinates and a country
name.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Your occurrence data</span></span>
<span><span class="va">observations</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  species <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Oak"</span>, <span class="st">"Beech"</span>, <span class="st">"Pine"</span>, <span class="st">"Spruce"</span><span class="op">)</span>,</span>
<span>  lon <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">14.5</span>, <span class="fl">15.2</span>, <span class="fl">16.8</span>, <span class="fl">20.0</span><span class="op">)</span>,</span>
<span>  lat <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">47.5</span>, <span class="fl">48.1</span>, <span class="fl">47.2</span>, <span class="fl">48.5</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Classify relative to Austria</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe.html">aoe</a></span><span class="op">(</span><span class="va">observations</span>, <span class="st">"Austria"</span><span class="op">)</span></span>
<span><span class="va">result</span><span class="op">$</span><span class="va">aoe_class</span></span>
<span><span class="co">#&gt; [1] "core" "core" "halo"</span></span></code></pre></div>
<p>The package auto-detects coordinate columns (lon/lat, x/y,
longitude/latitude, etc.).</p>
</div>
<div class="section level3">
<h3 id="from-sf-objects">From sf Objects<a class="anchor" aria-label="anchor" href="#from-sf-objects"></a>
</h3>
<p>sf objects work directly:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe.html">aoe</a></span><span class="op">(</span><span class="va">pts_sf</span>, <span class="st">"AT"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="austria-example">Austria Example<a class="anchor" aria-label="anchor" href="#austria-example"></a>
</h2>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get Austria and transform to equal-area projection</span></span>
<span><span class="va">austria</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_country.html">get_country</a></span><span class="op">(</span><span class="st">"AT"</span><span class="op">)</span></span>
<span><span class="va">austria_ea</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_transform.html" class="external-link">st_transform</a></span><span class="op">(</span><span class="va">austria</span>, <span class="st">"ESRI:54009"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create a point inside Austria</span></span>
<span><span class="va">dummy_pt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_unary.html" class="external-link">st_centroid</a></span><span class="op">(</span><span class="va">austria_ea</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: st_centroid assumes attributes are constant over geometries</span></span>
<span></span>
<span><span class="co"># Run aoe() to get geometries (uses buffer method by default)</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe.html">aoe</a></span><span class="op">(</span><span class="va">dummy_pt</span>, <span class="va">austria_ea</span><span class="op">)</span></span>
<span><span class="va">geoms</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe_geometry.html">aoe_geometry</a></span><span class="op">(</span><span class="va">result</span>, <span class="st">"both"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Extract geometries</span></span>
<span><span class="va">austria_geom</span> <span class="op">&lt;-</span> <span class="va">geoms</span><span class="op">[</span><span class="va">geoms</span><span class="op">$</span><span class="va">type</span> <span class="op">==</span> <span class="st">"original"</span>, <span class="op">]</span></span>
<span><span class="va">aoe_geom</span> <span class="op">&lt;-</span> <span class="va">geoms</span><span class="op">[</span><span class="va">geoms</span><span class="op">$</span><span class="va">type</span> <span class="op">==</span> <span class="st">"aoe"</span>, <span class="op">]</span></span>
<span></span>
<span><span class="co"># Plot</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>, bty <span class="op">=</span> <span class="st">"n"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_geometry</a></span><span class="op">(</span><span class="va">aoe_geom</span><span class="op">)</span>, border <span class="op">=</span> <span class="st">"steelblue"</span>, lty <span class="op">=</span> <span class="fl">2</span>, lwd <span class="op">=</span> <span class="fl">1.5</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_geometry</a></span><span class="op">(</span><span class="va">austria_geom</span><span class="op">)</span>, border <span class="op">=</span> <span class="st">"black"</span>, lwd <span class="op">=</span> <span class="fl">2</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/legend.html" class="external-link">legend</a></span><span class="op">(</span><span class="st">"topright"</span>,</span>
<span>       legend <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Austria (core)"</span>, <span class="st">"Area of Effect"</span><span class="op">)</span>,</span>
<span>       col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"black"</span>, <span class="st">"steelblue"</span><span class="op">)</span>,</span>
<span>       lty <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>       lwd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">1.5</span><span class="op">)</span>,</span>
<span>       inset <span class="op">=</span> <span class="fl">0.02</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<div class="svg-container"><button type="button" class="btn btn-primary btn-copy-svg" title="Copy SVG to clipboard" aria-label="Copy SVG to clipboard" data-bs-toggle="tooltip" data-bs-placement="left"><i class="fa fa-copy"></i></button>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='576.00pt' height='432.00pt' viewBox='0 0 576.00 432.00' class="r-plt inline-svg" style="max-width:100%;width:100%;height:auto;">
<g class='svglite'>
<defs>
  <style type='text/css'><![CDATA[
    /* theme-aware-processed */
    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite circle {
      fill: none;
      stroke: #3E3F3A;
      stroke-linecap: round;
      stroke-linejoin: round;
      stroke-miterlimit: 10.00;
    }
    .svglite > g > rect {
      fill: none;
      stroke: #3E3F3A;
      stroke-linecap: round;
      stroke-linejoin: round;
      stroke-miterlimit: 10.00;
    }
    .svglite text {
      white-space: pre;
      fill: #3E3F3A;
    }
    .svglite g.glyphgroup path {
      fill: inherit;
      stroke: none;
    }
  ]]></style>
</defs>
<rect width='100%' height='100%' style='stroke: none; fill: #F5F6F8;'/>
<defs>
  <clipPath id='cpMC4wMHw1NzYuMDB8MC4wMHw0MzIuMDA='>
    <rect x='0.00' y='0.00' width='576.00' height='432.00' />
  </clipPath>
</defs>
<g clip-path='url(#cpMC4wMHw1NzYuMDB8MC4wMHw0MzIuMDA=)'>
</g>
<defs>
  <clipPath id='cpMTQuNDB8NTYxLjYwfDE0LjQwfDQxNy42MA=='>
    <rect x='14.40' y='14.40' width='547.20' height='403.20' />
  </clipPath>
</defs>
<g clip-path='url(#cpMTQuNDB8NTYxLjYwfDE0LjQwfDQxNy42MA==)'>
<rect class='legend-bg' x='14.40' y='14.40' width='547.20' height='403.20' style='stroke-width: 0.75; stroke: #F5F6F8; fill: #F5F6F8;' />
<path d='M 37.22 242.57 L 36.64 241.06 L 36.08 239.33 L 35.61 237.57 L 35.24 235.79 L 34.96 233.99 L 34.76 232.18 L 34.67 230.36 L 34.67 228.54 L 34.76 226.72 L 34.94 224.91 L 35.22 223.11 L 35.60 221.32 L 36.06 219.56 L 36.62 217.83 L 37.26 216.12 L 37.99 214.45 L 38.81 212.83 L 39.70 211.24 L 40.68 209.71 L 41.74 208.22 L 42.88 206.80 L 44.08 205.43 L 45.36 204.13 L 46.69 202.90 L 48.10 201.74 L 49.56 200.65 L 51.07 199.64 L 52.64 198.70 L 54.02 197.93 L 55.62 197.08 L 57.27 196.32 L 58.95 195.64 L 60.67 195.05 L 62.41 194.55 L 64.18 194.14 L 65.97 193.83 L 67.26 193.66 L 68.59 193.05 L 70.31 192.36 L 72.06 191.76 L 73.84 191.26 L 75.64 190.84 L 77.46 190.53 L 79.30 190.31 L 81.14 190.19 L 82.99 190.16 L 84.84 190.23 L 86.68 190.40 L 88.51 190.67 L 90.32 191.03 L 92.12 191.48 L 93.88 192.03 L 99.27 193.86 L 101.02 194.51 L 102.73 195.24 L 105.54 196.55 L 105.98 196.29 L 107.63 195.46 L 109.31 194.71 L 111.03 194.05 L 112.79 193.48 L 114.57 193.01 L 116.37 192.63 L 118.20 192.34 L 120.03 192.15 L 121.87 192.06 L 123.71 192.06 L 125.55 192.16 L 127.39 192.35 L 129.10 192.63 L 134.01 192.42 L 135.98 192.39 L 137.95 192.48 L 139.92 192.67 L 141.87 192.97 L 143.80 193.38 L 145.70 193.90 L 147.36 194.46 L 149.53 194.55 L 151.38 194.67 L 153.22 194.89 L 155.05 195.21 L 156.86 195.62 L 158.64 196.13 L 160.39 196.73 L 162.11 197.42 L 163.79 198.20 L 165.43 199.07 L 166.03 199.43 L 167.01 199.06 L 167.80 198.79 L 170.29 197.28 L 172.00 196.31 L 173.77 195.43 L 175.58 194.66 L 177.43 193.98 L 185.44 191.32 L 187.25 190.78 L 189.09 190.33 L 190.95 189.98 L 192.83 189.73 L 199.22 189.05 L 200.20 188.11 L 201.62 186.88 L 203.11 185.73 L 204.66 184.65 L 206.27 183.66 L 207.92 182.76 L 209.62 181.95 L 211.37 181.23 L 213.14 180.61 L 214.95 180.08 L 216.79 179.65 L 217.35 179.55 L 217.49 178.41 L 217.80 176.64 L 218.20 174.90 L 218.68 173.17 L 219.25 171.48 L 219.91 169.81 L 220.65 168.18 L 221.48 166.59 L 222.38 165.04 L 225.00 160.81 L 226.00 159.29 L 227.08 157.81 L 228.24 156.39 L 229.46 155.04 L 230.76 153.75 L 232.12 152.53 L 233.54 151.38 L 237.94 148.02 L 239.28 147.05 L 240.66 146.14 L 242.08 145.29 L 252.04 139.69 L 253.75 138.80 L 254.24 138.57 L 254.60 137.28 L 255.18 135.56 L 255.86 133.87 L 256.61 132.22 L 257.46 130.61 L 258.38 129.04 L 259.38 127.53 L 260.46 126.07 L 261.62 124.66 L 262.84 123.32 L 264.13 122.05 L 264.31 121.86 L 265.61 120.59 L 266.97 119.39 L 268.39 118.26 L 269.86 117.21 L 271.39 116.23 L 272.97 115.33 L 274.59 114.52 L 276.25 113.78 L 276.40 113.73 L 276.92 112.87 L 277.96 111.34 L 279.08 109.86 L 280.28 108.45 L 281.55 107.10 L 282.89 105.82 L 284.29 104.61 L 285.76 103.48 L 287.28 102.43 L 288.86 101.45 L 290.48 100.57 L 292.15 99.77 L 293.86 99.05 L 295.61 98.43 L 297.39 97.90 L 299.19 97.47 L 301.01 97.13 L 302.84 96.89 L 304.69 96.74 L 306.54 96.69 L 308.39 96.74 L 310.24 96.89 L 312.08 97.13 L 313.90 97.47 L 315.70 97.90 L 317.47 98.43 L 319.17 98.98 L 320.82 99.57 L 322.45 100.24 L 324.04 100.99 L 328.99 103.48 L 330.42 104.23 L 331.81 105.06 L 333.16 105.94 L 335.85 107.80 L 336.09 106.66 L 336.57 104.89 L 337.14 103.16 L 337.80 101.45 L 338.54 99.78 L 339.38 98.15 L 340.29 96.57 L 341.29 95.03 L 342.36 93.55 L 343.39 92.21 L 344.53 90.80 L 345.73 89.45 L 347.01 88.17 L 348.35 86.95 L 349.75 85.80 L 351.21 84.73 L 352.73 83.73 L 354.29 82.82 L 355.89 81.98 L 357.54 81.23 L 359.23 80.56 L 360.94 79.98 L 362.69 79.49 L 364.45 79.09 L 366.24 78.79 L 368.04 78.57 L 369.84 78.45 L 371.65 78.42 L 373.46 78.48 L 377.67 78.73 L 379.44 78.88 L 381.19 79.12 L 382.92 79.45 L 384.64 79.86 L 386.34 80.36 L 387.10 80.63 L 388.65 80.54 L 390.51 80.54 L 392.38 80.63 L 394.24 80.82 L 396.08 81.11 L 397.91 81.50 L 403.33 82.79 L 405.02 83.24 L 406.67 83.77 L 408.30 84.38 L 409.90 85.07 L 418.47 89.03 L 421.03 89.09 L 422.83 89.17 L 424.62 89.35 L 426.40 89.62 L 428.16 89.98 L 429.91 90.43 L 431.63 90.96 L 433.31 91.59 L 434.97 92.30 L 436.58 93.09 L 438.16 93.97 L 443.71 97.25 L 445.06 96.66 L 446.76 96.03 L 448.48 95.48 L 450.24 95.02 L 452.01 94.66 L 453.80 94.38 L 455.60 94.20 L 457.41 94.11 L 459.22 94.11 L 461.03 94.21 L 464.82 94.51 L 466.88 94.74 L 468.92 95.08 L 470.93 95.55 L 472.92 96.13 L 476.37 97.25 L 478.33 97.95 L 480.25 98.77 L 482.11 99.70 L 484.97 101.23 L 486.85 101.57 L 488.89 102.06 L 491.90 102.89 L 493.70 103.44 L 495.47 104.08 L 497.20 104.81 L 498.88 105.64 L 500.52 106.55 L 502.11 107.55 L 503.65 108.64 L 505.12 109.80 L 506.53 111.04 L 507.88 112.36 L 509.15 113.74 L 510.34 115.19 L 511.46 116.71 L 512.49 118.28 L 513.44 119.90 L 514.90 122.57 L 515.38 123.14 L 516.47 124.59 L 517.48 126.09 L 518.42 127.64 L 519.27 129.23 L 520.04 130.87 L 520.73 132.54 L 521.32 134.25 L 521.83 135.98 L 522.25 137.74 L 522.58 139.52 L 522.82 141.31 L 522.97 143.11 L 523.02 144.92 L 522.98 146.69 L 523.00 147.09 L 523.04 148.92 L 522.98 150.74 L 522.83 152.57 L 522.59 154.38 L 522.38 155.52 L 523.20 156.97 L 528.64 164.11 L 529.25 164.96 L 530.08 165.69 L 531.41 166.99 L 532.67 168.36 L 533.85 169.80 L 534.96 171.29 L 535.99 172.84 L 536.93 174.44 L 537.79 176.09 L 538.56 177.78 L 539.24 179.51 L 539.82 181.28 L 540.32 183.07 L 540.71 184.89 L 541.02 186.72 L 541.22 188.57 L 541.33 190.43 L 541.33 192.29 L 541.24 194.14 L 541.05 195.99 L 540.77 197.83 L 540.39 199.65 L 539.91 201.45 L 539.34 203.22 L 538.74 204.76 L 539.21 206.44 L 539.61 208.25 L 539.92 210.08 L 540.13 211.92 L 540.24 213.77 L 540.25 215.63 L 540.17 217.48 L 539.99 219.33 L 539.71 221.16 L 539.34 222.98 L 538.87 224.77 L 538.30 226.54 L 537.65 228.27 L 536.90 229.97 L 536.07 231.63 L 535.14 233.24 L 534.14 234.80 L 533.06 236.30 L 531.89 237.75 L 530.66 239.13 L 529.35 240.45 L 527.97 241.69 L 526.53 242.86 L 525.03 243.95 L 523.48 244.97 L 521.87 245.89 L 520.22 246.74 L 518.53 247.49 L 516.79 248.16 L 515.03 248.73 L 514.99 248.74 L 514.86 249.09 L 514.12 250.72 L 513.31 252.31 L 512.83 253.13 L 513.20 254.90 L 513.48 256.80 L 513.67 258.72 L 513.74 260.65 L 513.72 262.58 L 513.62 264.83 L 513.55 267.24 L 513.45 269.04 L 513.26 270.83 L 512.98 272.61 L 512.47 275.40 L 512.19 276.74 L 511.92 277.98 L 511.46 279.79 L 510.91 281.57 L 510.26 283.32 L 509.53 285.03 L 508.70 286.70 L 507.78 288.33 L 506.79 289.90 L 505.71 291.42 L 504.55 292.88 L 503.31 294.28 L 502.00 295.61 L 500.63 296.87 L 499.19 298.05 L 497.68 299.16 L 496.13 300.18 L 494.52 301.12 L 492.86 301.97 L 491.25 302.75 L 489.56 303.51 L 487.84 304.18 L 486.90 304.49 L 486.85 304.66 L 486.25 306.39 L 485.57 308.09 L 484.79 309.76 L 484.71 309.91 L 484.00 311.50 L 483.17 313.14 L 482.25 314.72 L 481.26 316.26 L 480.18 317.74 L 479.03 319.16 L 477.81 320.53 L 476.51 321.82 L 475.16 323.05 L 473.74 324.21 L 472.26 325.29 L 470.73 326.29 L 469.14 327.21 L 467.51 328.05 L 465.84 328.80 L 464.14 329.46 L 462.40 330.04 L 460.63 330.52 L 458.84 330.91 L 457.04 331.21 L 455.22 331.41 L 453.39 331.52 L 451.56 331.53 L 449.73 331.45 L 447.91 331.27 L 446.10 331.00 L 444.30 330.63 L 442.74 330.27 L 441.22 330.91 L 439.46 331.55 L 433.51 333.54 L 431.82 334.05 L 430.10 334.48 L 428.37 334.83 L 426.62 335.08 L 424.86 335.25 L 423.09 335.33 L 421.33 335.33 L 419.56 335.23 L 409.70 334.44 L 409.47 334.46 L 409.41 334.54 L 408.05 335.90 L 406.63 337.20 L 405.14 338.41 L 403.58 339.54 L 399.44 342.37 L 397.86 343.40 L 397.33 343.70 L 395.93 344.88 L 394.42 346.01 L 392.95 347.06 L 391.39 348.11 L 389.79 349.07 L 388.13 349.94 L 386.43 350.73 L 384.70 351.42 L 382.92 352.02 L 381.12 352.53 L 379.29 352.93 L 377.45 353.25 L 375.59 353.46 L 373.72 353.57 L 371.85 353.58 L 369.98 353.50 L 368.12 353.31 L 366.27 353.03 L 364.44 352.65 L 362.63 352.17 L 361.31 351.75 L 359.75 351.44 L 358.02 351.00 L 357.12 350.73 L 351.62 350.12 L 349.72 349.85 L 339.66 348.17 L 337.91 347.83 L 336.17 347.40 L 334.46 346.88 L 331.09 345.77 L 328.06 345.07 L 325.35 344.59 L 322.44 344.45 L 320.16 344.27 L 317.89 343.94 L 315.25 343.47 L 313.86 343.19 L 304.58 341.13 L 299.88 341.02 L 298.39 340.96 L 296.91 340.83 L 286.06 339.66 L 284.59 339.47 L 283.13 339.22 L 261.36 335.00 L 258.95 334.44 L 255.54 333.52 L 252.61 333.27 L 250.63 333.03 L 248.66 332.69 L 241.51 331.23 L 239.77 330.83 L 238.05 330.34 L 236.35 329.76 L 234.69 329.10 L 229.11 326.71 L 227.49 325.97 L 225.90 325.14 L 224.36 324.24 L 222.87 323.25 L 221.43 322.20 L 220.04 321.07 L 218.71 319.87 L 217.45 318.60 L 216.25 317.28 L 212.36 312.75 L 211.33 311.49 L 210.36 310.18 L 208.07 306.95 L 207.44 307.01 L 205.70 307.10 L 201.26 307.21 L 199.60 307.21 L 197.94 307.14 L 196.29 306.98 L 194.64 306.75 L 193.01 306.44 L 192.91 306.42 L 192.10 306.59 L 191.52 306.70 L 191.25 307.10 L 190.14 308.60 L 188.94 310.04 L 187.67 311.42 L 186.33 312.73 L 184.62 314.31 L 183.20 315.55 L 181.71 316.72 L 180.16 317.81 L 178.56 318.81 L 176.91 319.72 L 175.21 320.54 L 173.46 321.27 L 171.68 321.91 L 169.87 322.45 L 168.04 322.89 L 166.18 323.24 L 162.38 323.83 L 160.33 324.09 L 158.28 324.23 L 156.22 324.25 L 154.16 324.15 L 148.36 323.69 L 146.60 323.51 L 144.85 323.24 L 143.12 322.88 L 141.40 322.43 L 139.71 321.90 L 135.53 320.47 L 133.80 319.82 L 132.11 319.09 L 130.45 318.27 L 129.00 317.45 L 127.55 317.38 L 125.68 317.19 L 123.82 316.91 L 121.98 316.52 L 120.48 316.12 L 119.06 316.55 L 117.26 316.98 L 115.44 317.32 L 113.61 317.56 L 111.76 317.71 L 109.91 317.76 L 108.06 317.71 L 106.22 317.56 L 104.39 317.32 L 102.57 316.98 L 100.77 316.55 L 99.00 316.02 L 90.78 313.34 L 89.12 312.76 L 87.49 312.09 L 85.90 311.34 L 84.34 310.51 L 77.03 306.36 L 75.45 305.42 L 73.93 304.39 L 72.47 303.29 L 71.06 302.11 L 69.72 300.86 L 69.71 300.85 L 68.94 300.71 L 67.13 300.27 L 65.34 299.75 L 63.58 299.12 L 61.86 298.41 L 60.18 297.60 L 58.55 296.71 L 56.96 295.74 L 55.43 294.68 L 53.96 293.54 L 52.54 292.32 L 51.20 291.03 L 49.92 289.67 L 48.72 288.25 L 47.60 286.76 L 46.55 285.22 L 45.59 283.63 L 44.72 281.98 L 43.93 280.29 L 43.23 278.57 L 42.63 276.80 L 42.12 275.01 L 41.70 273.20 L 41.38 271.36 L 41.16 269.51 L 41.12 268.86 L 41.11 268.82 L 40.48 267.06 L 39.95 265.27 L 39.63 263.98 L 39.39 263.29 L 39.37 263.21 L 38.82 261.88 L 38.20 260.09 L 37.67 258.27 L 37.24 256.42 L 36.91 254.56 L 36.69 252.68 L 36.56 250.79 L 36.54 248.90 L 36.62 247.00 L 36.80 245.12 L 37.08 243.25 L 37.22 242.57 Z' style='fill-rule: evenodd; stroke-width: 1.12; stroke: #4682B4; stroke-dasharray: 6.00,6.00;' />
<path d='M 72.39 250.68 L 71.74 249.40 L 75.68 239.85 L 76.15 233.92 L 71.71 230.44 L 69.86 229.41 L 71.24 228.63 L 77.19 229.28 L 80.76 227.31 L 82.55 225.36 L 87.94 227.20 L 95.95 230.90 L 99.79 233.40 L 101.46 235.33 L 102.44 236.95 L 102.22 239.73 L 104.07 240.81 L 107.73 241.23 L 110.22 242.09 L 109.70 245.74 L 109.81 248.77 L 113.12 248.35 L 117.11 246.03 L 120.01 241.88 L 121.66 237.86 L 122.30 228.08 L 122.75 227.25 L 125.33 228.02 L 135.49 227.60 L 140.47 229.42 L 148.12 229.72 L 148.12 231.26 L 149.71 233.65 L 153.42 237.10 L 155.30 239.35 L 158.89 239.75 L 164.23 238.50 L 167.31 237.22 L 168.60 238.13 L 173.51 237.24 L 177.65 234.45 L 178.53 232.33 L 182.84 230.84 L 188.52 227.40 L 196.53 224.74 L 223.39 221.90 L 224.21 219.76 L 223.28 214.85 L 223.92 214.12 L 227.47 215.35 L 233.08 216.49 L 237.47 218.23 L 240.46 220.50 L 242.99 220.59 L 246.74 219.00 L 251.92 217.98 L 257.14 220.33 L 258.87 222.88 L 258.14 224.19 L 258.47 226.26 L 260.21 227.99 L 264.56 230.81 L 270.01 233.23 L 272.67 233.05 L 273.40 230.69 L 273.71 225.08 L 273.37 219.09 L 271.79 215.66 L 268.91 214.82 L 265.56 214.55 L 263.71 213.84 L 264.11 211.96 L 266.20 207.08 L 265.41 200.57 L 258.58 193.16 L 252.58 186.01 L 252.32 183.57 L 254.93 179.35 L 259.33 175.98 L 269.29 170.38 L 272.50 169.22 L 276.69 168.28 L 282.59 165.98 L 285.28 163.62 L 286.96 161.06 L 288.22 147.72 L 288.83 147.15 L 289.59 146.37 L 300.96 150.96 L 301.84 150.20 L 303.56 149.45 L 306.63 145.93 L 307.07 143.25 L 306.35 138.19 L 306.06 133.41 L 306.54 131.90 L 308.24 132.45 L 313.19 134.94 L 317.23 137.72 L 321.58 144.75 L 329.88 146.62 L 340.07 146.80 L 343.30 143.67 L 346.50 142.95 L 350.36 143.90 L 358.37 145.01 L 358.48 139.32 L 362.21 133.43 L 363.98 131.34 L 369.76 131.55 L 370.57 127.15 L 370.31 114.96 L 371.33 113.62 L 375.55 113.87 L 380.01 116.10 L 381.51 117.90 L 383.65 117.75 L 386.51 116.53 L 389.71 115.73 L 395.14 117.03 L 407.13 122.57 L 413.20 124.59 L 416.81 124.21 L 420.25 124.28 L 434.75 132.85 L 444.19 134.05 L 452.65 134.08 L 454.97 131.50 L 458.24 129.31 L 462.04 129.61 L 465.49 130.73 L 472.44 134.45 L 475.54 135.41 L 479.56 136.01 L 482.57 136.84 L 486.13 143.31 L 487.81 145.04 L 487.69 145.84 L 487.83 148.78 L 486.18 152.49 L 484.53 157.36 L 485.34 161.62 L 493.76 176.42 L 500.62 185.43 L 502.19 188.87 L 506.14 191.50 L 503.28 194.83 L 503.38 199.76 L 501.54 201.96 L 501.40 204.77 L 502.70 207.34 L 503.17 210.54 L 505.05 214.97 L 499.81 215.93 L 493.38 215.78 L 491.12 216.03 L 489.15 217.24 L 486.84 216.64 L 480.44 212.49 L 477.03 211.58 L 474.76 211.83 L 473.29 213.64 L 470.66 215.95 L 468.10 217.57 L 468.93 219.00 L 481.50 222.74 L 484.48 228.48 L 482.85 233.16 L 482.40 235.45 L 479.84 237.26 L 476.61 238.84 L 472.49 239.24 L 472.36 241.77 L 475.08 249.21 L 473.98 250.83 L 472.98 253.14 L 475.11 259.27 L 477.77 259.70 L 478.54 261.10 L 478.44 263.58 L 478.36 266.22 L 477.84 269.02 L 477.57 270.26 L 475.96 271.04 L 470.52 270.63 L 466.24 273.02 L 458.13 281.62 L 455.06 283.08 L 452.01 286.52 L 453.27 294.09 L 452.88 294.78 L 452.23 296.33 L 440.70 293.66 L 440.32 293.71 L 432.98 294.68 L 428.33 298.15 L 422.38 300.14 L 409.22 299.08 L 396.71 300.43 L 393.84 301.44 L 390.62 302.02 L 387.79 304.04 L 386.39 306.88 L 383.69 310.49 L 379.55 313.32 L 374.94 315.50 L 374.00 317.33 L 372.53 318.39 L 369.64 317.01 L 367.44 317.08 L 364.62 316.14 L 355.53 315.13 L 345.47 313.45 L 340.59 311.84 L 335.11 310.56 L 329.26 309.53 L 324.11 309.29 L 321.47 308.81 L 308.83 306.01 L 300.69 305.83 L 289.83 304.66 L 268.07 300.43 L 261.68 298.72 L 255.70 298.20 L 248.55 296.74 L 242.97 294.35 L 239.08 289.82 L 234.80 283.79 L 227.32 275.92 L 225.54 272.01 L 227.21 268.57 L 229.02 265.98 L 228.66 264.87 L 226.99 264.31 L 215.68 267.66 L 204.81 271.90 L 200.37 272.01 L 195.96 271.07 L 190.24 271.01 L 184.85 272.14 L 173.89 272.72 L 167.74 275.85 L 164.21 281.95 L 162.44 286.87 L 160.72 288.45 L 156.92 289.05 L 151.12 288.59 L 146.94 287.16 L 142.43 282.96 L 135.98 282.38 L 130.10 282.27 L 128.48 281.49 L 128.33 278.76 L 125.55 273.62 L 121.58 272.01 L 112.54 281.69 L 109.91 282.55 L 101.69 279.87 L 94.38 275.73 L 93.35 272.70 L 92.01 270.22 L 85.96 267.87 L 78.53 266.26 L 76.22 266.26 L 77.00 264.80 L 77.65 262.33 L 76.94 260.36 L 75.07 258.32 L 73.95 256.14 L 73.50 254.02 L 72.83 252.29 L 72.39 250.68 Z' style='fill-rule: evenodd; stroke-width: 1.50;' />
<rect class='legend-bg' x='429.62' y='22.46' width='121.04' height='43.20' style='stroke-width: 0.75; fill: #F5F6F8;' />
<line x1='440.42' y1='36.86' x2='462.02' y2='36.86' style='stroke-width: 1.50;' />
<line x1='440.42' y1='51.26' x2='462.02' y2='51.26' style='stroke-width: 1.12; stroke: #4682B4; stroke-dasharray: 6.00,6.00;' />
<text x='472.82' y='41.16' style='font-size: 12.00px; font-family: "Roboto", -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif;' textLength='72.02px' lengthAdjust='spacingAndGlyphs'>Austria (core)</text>
<text x='472.82' y='55.56' style='font-size: 12.00px; font-family: "Roboto", -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif;' textLength='72.44px' lengthAdjust='spacingAndGlyphs'>Area of Effect</text>
</g>
</g>
</svg></div><p class="caption">
Austria (dark) with its area of effect (blue dashed). The halo has equal
area to the core.
</p>
</div>
</div>
<div class="section level2">
<h2 id="basic-usage-with-custom-polygons">Basic Usage with Custom Polygons<a class="anchor" aria-label="anchor" href="#basic-usage-with-custom-polygons"></a>
</h2>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">support</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>  geometry <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html" class="external-link">st_sfc</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_polygon</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">100</span>, <span class="fl">100</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">100</span>, <span class="fl">100</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  crs <span class="op">=</span> <span class="fl">32631</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Create observation points:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pts</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">5</span>,</span>
<span>    value <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">20</span>, <span class="fl">15</span>, <span class="fl">25</span>, <span class="fl">30</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  geometry <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html" class="external-link">st_sfc</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">50</span>, <span class="fl">50</span><span class="op">)</span><span class="op">)</span>,   <span class="co"># center</span></span>
<span>    <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">10</span><span class="op">)</span><span class="op">)</span>,   <span class="co"># near corner</span></span>
<span>    <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">95</span>, <span class="fl">50</span><span class="op">)</span><span class="op">)</span>,   <span class="co"># near edge</span></span>
<span>    <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">120</span>, <span class="fl">50</span><span class="op">)</span><span class="op">)</span>,  <span class="co"># outside, in halo</span></span>
<span>    <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">250</span>, <span class="fl">250</span><span class="op">)</span><span class="op">)</span>  <span class="co"># far outside</span></span>
<span>  <span class="op">)</span>,</span>
<span>  crs <span class="op">=</span> <span class="fl">32631</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Apply the area of effect:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe.html">aoe</a></span><span class="op">(</span><span class="va">pts</span>, <span class="va">support</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">result</span><span class="op">)</span></span>
<span><span class="co">#&gt; Area of Effect Result</span></span>
<span><span class="co">#&gt; ─────────────────────</span></span>
<span><span class="co">#&gt; Points:   4 (3 core, 1 halo)</span></span>
<span><span class="co">#&gt; Supports: 1</span></span>
<span><span class="co">#&gt; Scale:    0.414 (multiplier 1.41, theoretical halo:core 1.00)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Simple feature collection with 4 features and 5 fields</span></span>
<span><span class="co">#&gt; Geometry type: POINT</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: 10 ymin: 10 xmax: 120 ymax: 50</span></span>
<span><span class="co">#&gt; Projected CRS: WGS 84 / UTM zone 31N</span></span>
<span><span class="co">#&gt;   point_id support_id aoe_class id value       geometry</span></span>
<span><span class="co">#&gt; 1        1          1      core  1    10  POINT (50 50)</span></span>
<span><span class="co">#&gt; 2        2          1      core  2    20  POINT (10 10)</span></span>
<span><span class="co">#&gt; 3        3          1      core  3    15  POINT (95 50)</span></span>
<span><span class="co">#&gt; 4        4          1      halo  4    25 POINT (120 50)</span></span></code></pre></div>
<p>The result contains only points inside the AoE, with their
classification:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">result</span><span class="op">$</span><span class="va">aoe_class</span></span>
<span><span class="co">#&gt; [1] "core" "core" "core" "halo"</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="multiple-supports">Multiple Supports<a class="anchor" aria-label="anchor" href="#multiple-supports"></a>
</h2>
<p>Process multiple regions at once:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Two adjacent regions</span></span>
<span><span class="va">supports</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>region <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  geometry <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html" class="external-link">st_sfc</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_polygon</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">50</span>, <span class="fl">50</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">100</span>, <span class="fl">100</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_polygon</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">50</span>, <span class="fl">100</span>, <span class="fl">100</span>, <span class="fl">50</span>, <span class="fl">50</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">100</span>, <span class="fl">100</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  crs <span class="op">=</span> <span class="fl">32631</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Points that may fall in overlapping AoEs</span></span>
<span><span class="va">pts_multi</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span>,</span>
<span>  geometry <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html" class="external-link">st_sfc</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">25</span>, <span class="fl">50</span><span class="op">)</span><span class="op">)</span>,   <span class="co"># inside A</span></span>
<span>    <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">50</span>, <span class="fl">50</span><span class="op">)</span><span class="op">)</span>,   <span class="co"># on boundary</span></span>
<span>    <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">75</span>, <span class="fl">50</span><span class="op">)</span><span class="op">)</span>    <span class="co"># inside B</span></span>
<span>  <span class="op">)</span>,</span>
<span>  crs <span class="op">=</span> <span class="fl">32631</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">result_multi</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe.html">aoe</a></span><span class="op">(</span><span class="va">pts_multi</span>, <span class="va">supports</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">result_multi</span><span class="op">)</span></span>
<span><span class="co">#&gt; Area of Effect Result</span></span>
<span><span class="co">#&gt; ─────────────────────</span></span>
<span><span class="co">#&gt; Points:   4 (4 core, 0 halo)</span></span>
<span><span class="co">#&gt; Supports: 2</span></span>
<span><span class="co">#&gt; Scale:    0.414 (multiplier 1.41, theoretical halo:core 1.00)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Simple feature collection with 4 features and 4 fields</span></span>
<span><span class="co">#&gt; Geometry type: POINT</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: 25 ymin: 50 xmax: 75 ymax: 50</span></span>
<span><span class="co">#&gt; Projected CRS: WGS 84 / UTM zone 31N</span></span>
<span><span class="co">#&gt;   point_id support_id aoe_class id      geometry</span></span>
<span><span class="co">#&gt; 1        1          1      core  1 POINT (25 50)</span></span>
<span><span class="co">#&gt; 2        2          1      core  2 POINT (50 50)</span></span>
<span><span class="co">#&gt; 3        2          2      core  2 POINT (50 50)</span></span>
<span><span class="co">#&gt; 4        3          2      core  3 POINT (75 50)</span></span></code></pre></div>
<p>Points can appear multiple times (once per support whose AoE contains
them).</p>
</div>
<div class="section level2">
<h2 id="using-a-mask-coastlines">Using a Mask (Coastlines)<a class="anchor" aria-label="anchor" href="#using-a-mask-coastlines"></a>
</h2>
<p>For coastal regions, sea is a hard boundary. Provide a mask to
constrain the AoE:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create a coastal support</span></span>
<span><span class="va">support_coast</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>  geometry <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html" class="external-link">st_sfc</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_polygon</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">40</span>, <span class="fl">80</span>, <span class="fl">80</span>, <span class="fl">40</span>, <span class="fl">40</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">20</span>, <span class="fl">20</span>, <span class="fl">60</span>, <span class="fl">60</span>, <span class="fl">20</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  crs <span class="op">=</span> <span class="fl">32631</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create land mask (irregular coastline)</span></span>
<span><span class="va">land_mask</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>  geometry <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html" class="external-link">st_sfc</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_polygon</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">100</span>, <span class="fl">100</span>, <span class="fl">70</span>, <span class="fl">50</span>, <span class="fl">30</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">50</span>, <span class="fl">60</span>, <span class="fl">55</span>, <span class="fl">70</span>, <span class="fl">60</span>, <span class="fl">0</span><span class="op">)</span></span>
<span>  <span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  crs <span class="op">=</span> <span class="fl">32631</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create sea area (inverse of land for visualization)</span></span>
<span><span class="va">sea_area</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span></span>
<span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span> geometry <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html" class="external-link">st_sfc</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_polygon</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span></span>
<span>   <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">20</span>, <span class="fl">120</span>, <span class="fl">120</span>, <span class="op">-</span><span class="fl">20</span>, <span class="op">-</span><span class="fl">20</span><span class="op">)</span>,</span>
<span>   <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">20</span>, <span class="op">-</span><span class="fl">20</span>, <span class="fl">100</span>, <span class="fl">100</span>, <span class="op">-</span><span class="fl">20</span><span class="op">)</span></span>
<span> <span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span> crs <span class="op">=</span> <span class="fl">32631</span></span>
<span><span class="op">)</span></span>
<span><span class="va">sea_area</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_binary_ops.html" class="external-link">st_difference</a></span><span class="op">(</span><span class="va">sea_area</span>, <span class="va">land_mask</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: attribute variables are assumed to be spatially constant throughout</span></span>
<span><span class="co">#&gt; all geometries</span></span>
<span></span>
<span><span class="co"># Create some points</span></span>
<span><span class="va">pts_coast</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">4</span>, class <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"core"</span>, <span class="st">"core"</span>, <span class="st">"halo"</span>, <span class="st">"pruned"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  geometry <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html" class="external-link">st_sfc</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">60</span>, <span class="fl">40</span><span class="op">)</span><span class="op">)</span>,  <span class="co"># core</span></span>
<span>    <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">50</span>, <span class="fl">30</span><span class="op">)</span><span class="op">)</span>,  <span class="co"># core</span></span>
<span>    <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">30</span>, <span class="fl">40</span><span class="op">)</span><span class="op">)</span>,  <span class="co"># halo (on land)</span></span>
<span>    <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">90</span>, <span class="fl">70</span><span class="op">)</span><span class="op">)</span>   <span class="co"># would be halo but in sea</span></span>
<span>  <span class="op">)</span>,</span>
<span>  crs <span class="op">=</span> <span class="fl">32631</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Apply with mask</span></span>
<span><span class="va">result_coast</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe.html">aoe</a></span><span class="op">(</span><span class="va">pts_coast</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, <span class="op">]</span>, <span class="va">support_coast</span>, mask <span class="op">=</span> <span class="va">land_mask</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get geometries for visualization</span></span>
<span><span class="va">aoe_masked</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe_geometry.html">aoe_geometry</a></span><span class="op">(</span><span class="va">result_coast</span>, <span class="st">"aoe"</span><span class="op">)</span></span>
<span><span class="va">support_geom</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe_geometry.html">aoe_geometry</a></span><span class="op">(</span><span class="va">result_coast</span>, <span class="st">"original"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Prepare point data for plotting</span></span>
<span><span class="va">result_coast</span><span class="op">$</span><span class="va">class</span> <span class="op">&lt;-</span> <span class="va">result_coast</span><span class="op">$</span><span class="va">aoe_class</span></span>
<span><span class="va">pruned_pt</span> <span class="op">&lt;-</span> <span class="va">pts_coast</span><span class="op">[</span><span class="fl">4</span>, <span class="op">]</span></span>
<span></span>
<span><span class="co"># Plot with ggplot2</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">sea_area</span>, fill <span class="op">=</span> <span class="va">aoe_colors</span><span class="op">$</span><span class="va">sea</span>, color <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">land_mask</span>, fill <span class="op">=</span> <span class="va">aoe_colors</span><span class="op">$</span><span class="va">land</span>, color <span class="op">=</span> <span class="va">aoe_colors</span><span class="op">$</span><span class="va">mask</span>, linewidth <span class="op">=</span> <span class="fl">0.8</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">aoe_masked</span>, fill <span class="op">=</span> <span class="va">aoe_colors</span><span class="op">$</span><span class="va">aoe_fill</span>, color <span class="op">=</span> <span class="va">aoe_colors</span><span class="op">$</span><span class="va">aoe_border</span>,</span>
<span>          linetype <span class="op">=</span> <span class="st">"dashed"</span>, linewidth <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">support_geom</span>, fill <span class="op">=</span> <span class="cn">NA</span>, color <span class="op">=</span> <span class="va">aoe_colors</span><span class="op">$</span><span class="va">support</span>, linewidth <span class="op">=</span> <span class="fl">1.2</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">result_coast</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="va">class</span><span class="op">)</span>, size <span class="op">=</span> <span class="fl">4</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">pruned_pt</span>, color <span class="op">=</span> <span class="va">aoe_colors</span><span class="op">$</span><span class="va">point_pruned</span>, shape <span class="op">=</span> <span class="fl">4</span>, size <span class="op">=</span> <span class="fl">4</span>, stroke <span class="op">=</span> <span class="fl">1.5</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_color_manual</a></span><span class="op">(</span></span>
<span>    values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"core"</span> <span class="op">=</span> <span class="va">aoe_colors</span><span class="op">$</span><span class="va">point_core</span>, <span class="st">"halo"</span> <span class="op">=</span> <span class="va">aoe_colors</span><span class="op">$</span><span class="va">point_halo</span><span class="op">)</span>,</span>
<span>    labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Core"</span>, <span class="st">"Halo"</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/annotate.html" class="external-link">annotate</a></span><span class="op">(</span><span class="st">"text"</span>, x <span class="op">=</span> <span class="fl">90</span>, y <span class="op">=</span> <span class="fl">80</span>, label <span class="op">=</span> <span class="st">"SEA"</span>, color <span class="op">=</span> <span class="st">"black"</span>,</span>
<span>           fontface <span class="op">=</span> <span class="st">"bold"</span>, size <span class="op">=</span> <span class="fl">5</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">coord_sf</a></span><span class="op">(</span>xlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">10</span>, <span class="fl">110</span><span class="op">)</span>, ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">10</span>, <span class="fl">90</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"Class"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_aoe</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<div class="svg-container"><button type="button" class="btn btn-primary btn-copy-svg" title="Copy SVG to clipboard" aria-label="Copy SVG to clipboard" data-bs-toggle="tooltip" data-bs-placement="left"><i class="fa fa-copy"></i></button>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='576.00pt' height='432.00pt' viewBox='0 0 576.00 432.00' class="r-plt inline-svg" style="max-width:100%;width:100%;height:auto;">
<g class='svglite'>
<defs>
  <style type='text/css'><![CDATA[
    /* theme-aware-processed */
    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite circle {
      fill: none;
      stroke: #3E3F3A;
      stroke-linecap: round;
      stroke-linejoin: round;
      stroke-miterlimit: 10.00;
    }
    .svglite > g > rect {
      fill: none;
      stroke: #3E3F3A;
      stroke-linecap: round;
      stroke-linejoin: round;
      stroke-miterlimit: 10.00;
    }
    .svglite text {
      white-space: pre;
      fill: #3E3F3A;
    }
    .svglite g.glyphgroup path {
      fill: inherit;
      stroke: none;
    }
  ]]></style>
</defs>
<rect width='100%' height='100%' style='stroke: none; fill: #F5F6F8;'/>
<defs>
  <clipPath id='cpMC4wMHw1NzYuMDB8MC4wMHw0MzIuMDA='>
    <rect x='0.00' y='0.00' width='576.00' height='432.00' />
  </clipPath>
</defs>
<g clip-path='url(#cpMC4wMHw1NzYuMDB8MC4wMHw0MzIuMDA=)'>
</g>
<defs>
  <clipPath id='cpNC40MXw1NzEuNTl8MC4wMHw0MzIuMDA='>
    <rect x='4.41' y='0.00' width='567.19' height='432.00' />
  </clipPath>
</defs>
<g clip-path='url(#cpNC40MXw1NzEuNTl8MC4wMHw0MzIuMDA=)'>
<rect x='4.41' y='0.00' width='567.19' height='432.00' style='stroke-width: 0.00; stroke: none;' /> fill: #F5F6F8;' />
</g>
<g clip-path='url(#cpMC4wMHw1NzYuMDB8MC4wMHw0MzIuMDA=)'>
</g>
<defs>
  <clipPath id='cpMTQuMzd8NTA4Ljg2fDkuOTZ8NDIyLjA0'>
    <rect x='14.37' y='9.96' width='494.49' height='412.07' />
  </clipPath>
</defs>
<g clip-path='url(#cpMTQuMzd8NTA4Ljg2fDkuOTZ8NDIyLjA0)'>
<rect x='14.37' y='9.96' width='494.49' height='412.07' style='stroke-width: 0.00; stroke: none;' /> fill: #F5F6F8;' />
<path d='M -0.61 -8.77 L 523.84 -8.77 L 523.84 440.77 L -0.61 440.77 L -0.61 -8.77 ZM 448.92 365.85 L 448.92 178.54 L 336.54 141.08 L 261.61 159.81 L 186.69 103.62 L 74.31 141.08 L 74.31 365.85 L 448.92 365.85 Z' style='fill-rule: evenodd; fill: #BEE3F8; stroke-width: 0.47; stroke: none; stroke-linecap: butt;' />
<path d='M 74.31 365.85 L 448.92 365.85 L 448.92 178.54 L 336.54 141.08 L 261.61 159.81 L 186.69 103.62 L 74.31 141.08 L 74.31 365.85 Z' style='fill-rule: evenodd; fill: #E2E8F0; stroke-width: 1.71; stroke: #A0AEC0; stroke-linecap: butt;' />
<path d='M 222.47 322.95 L 220.80 322.82 L 219.14 322.60 L 217.49 322.29 L 215.85 321.90 L 214.24 321.43 L 212.66 320.86 L 211.11 320.22 L 209.59 319.50 L 208.12 318.70 L 206.69 317.82 L 205.30 316.87 L 203.97 315.85 L 202.69 314.76 L 201.47 313.60 L 200.32 312.38 L 199.23 311.11 L 198.21 309.77 L 197.26 308.39 L 196.38 306.96 L 195.58 305.48 L 194.85 303.97 L 194.21 302.42 L 193.65 300.83 L 193.17 299.22 L 192.78 297.59 L 192.48 295.94 L 192.26 294.28 L 192.12 292.60 L 192.08 290.92 L 192.08 141.08 L 192.12 139.40 L 192.26 137.72 L 192.48 136.06 L 192.78 134.41 L 193.17 132.78 L 193.65 131.17 L 194.21 129.58 L 194.85 128.03 L 195.58 126.52 L 196.38 125.04 L 197.26 123.61 L 198.21 122.23 L 199.23 120.89 L 200.32 119.62 L 201.47 118.40 L 202.69 117.24 L 203.71 116.38 L 261.61 159.81 L 336.54 141.08 L 406.07 164.26 L 406.07 290.92 L 406.03 292.60 L 405.90 294.28 L 405.68 295.94 L 405.37 297.59 L 404.98 299.22 L 404.50 300.83 L 403.94 302.42 L 403.30 303.97 L 402.58 305.48 L 401.77 306.96 L 400.90 308.39 L 399.95 309.77 L 398.92 311.11 L 397.83 312.38 L 396.68 313.60 L 395.46 314.76 L 394.18 315.85 L 392.85 316.87 L 391.47 317.82 L 390.03 318.70 L 388.56 319.50 L 387.04 320.22 L 385.49 320.86 L 383.91 321.43 L 382.30 321.90 L 380.67 322.29 L 379.02 322.60 L 377.35 322.82 L 375.68 322.95 L 374.00 323.00 L 224.15 323.00 L 222.47 322.95 Z' style='fill-rule: evenodd; fill: #5A7BA6; fill-opacity: 0.063; stroke-width: 2.13; stroke: #5A7BA6; stroke-dasharray: 11.38,11.38; stroke-linecap: butt;' />
<path d='M 224.15 290.92 L 224.15 141.08 L 374.00 141.08 L 374.00 290.92 L 224.15 290.92 Z' style='fill-rule: evenodd; stroke-width: 2.56; stroke: #2D3748; stroke-linecap: butt;' />
<circle cx='299.08' cy='216.00' r='4.62' style='stroke-width: 0.71; stroke: #2B6CB0; stroke-linecap: butt; fill: #2B6CB0;' />
<circle cx='261.61' cy='253.46' r='4.62' style='stroke-width: 0.71; stroke: #2B6CB0; stroke-linecap: butt; fill: #2B6CB0;' />
<line x1='406.13' y1='108.95' x2='416.79' y2='98.29' style='stroke-width: 2.13; stroke: #A0AEC0; stroke-linecap: butt;' />
<line x1='406.13' y1='98.29' x2='416.79' y2='108.95' style='stroke-width: 2.13; stroke: #A0AEC0; stroke-linecap: butt;' />
<text x='411.46' y='71.25' text-anchor='middle' style='font-size: 14.23px; font-weight: bold; font-family: "Roboto", -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif;' textLength='29.23px' lengthAdjust='spacingAndGlyphs'>SEA</text>
</g>
<g clip-path='url(#cpMC4wMHw1NzYuMDB8MC4wMHw0MzIuMDA=)'>
<rect x='514.53' y='198.81' width='47.10' height='34.37' style='stroke-width: 0.00; stroke: none;' /> fill: #F5F6F8;' />
<text x='514.53' y='208.67' style='font-size: 12.00px; font-weight: bold;fill: #2D3748; font-family: "Roboto", -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif;' textLength='32.02px' lengthAdjust='spacingAndGlyphs'>Class</text>
<rect x='514.53' y='215.91' width='17.28' height='17.28' style='stroke-width: 0.00; stroke: none;' /> fill: #F5F6F8;' />
<circle cx='523.17' cy='224.55' r='4.62' style='stroke-width: 0.71; stroke: #2B6CB0; fill: #2B6CB0;' />
<text x='537.79' y='228.49' style='font-size: 11.00px;fill: #2D3748; font-family: "Roboto", -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif;' textLength='23.84px' lengthAdjust='spacingAndGlyphs'>Core</text>
</g>
</g>
</svg></div><p class="caption">
AoE with land mask. The AoE is clipped to the land boundary.
</p>
</div>
<div class="section level3">
<h3 id="real-world-example-portugal">Real-World Example: Portugal<a class="anchor" aria-label="anchor" href="#real-world-example-portugal"></a>
</h3>
<p>The package includes bundled country boundaries and a global land
mask. Use <code>mask = "land"</code> to clip AoE to coastlines:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create a point inside Portugal (approximate center of mainland)</span></span>
<span><span class="va">dummy</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>  geometry <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html" class="external-link">st_sfc</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">8</span>, <span class="fl">39.5</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  crs <span class="op">=</span> <span class="fl">4326</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Without mask</span></span>
<span><span class="va">result_no_mask</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe.html">aoe</a></span><span class="op">(</span><span class="va">dummy</span>, <span class="st">"PT"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Using largest polygon (96.8% of total area); 8 smaller polygon(s) dropped. Set largest_polygon = FALSE to include all.</span></span>
<span><span class="va">aoe_no_mask</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe_geometry.html">aoe_geometry</a></span><span class="op">(</span><span class="va">result_no_mask</span>, <span class="st">"aoe"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># With mask + area=1 for equal land area</span></span>
<span><span class="va">result_masked</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe.html">aoe</a></span><span class="op">(</span><span class="va">dummy</span>, <span class="st">"PT"</span>, mask <span class="op">=</span> <span class="st">"land"</span>, area <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">#&gt; Using largest polygon (96.8% of total area); 8 smaller polygon(s) dropped. Set largest_polygon = FALSE to include all.</span></span>
<span><span class="va">aoe_masked</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe_geometry.html">aoe_geometry</a></span><span class="op">(</span><span class="va">result_masked</span>, <span class="st">"aoe"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get support geometry</span></span>
<span><span class="va">support_geom</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe_geometry.html">aoe_geometry</a></span><span class="op">(</span><span class="va">result_masked</span>, <span class="st">"original"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Transform to equal area for plotting</span></span>
<span><span class="va">crs_ea</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_crs.html" class="external-link">st_crs</a></span><span class="op">(</span><span class="st">"+proj=laea +lat_0=39.5 +lon_0=-8 +datum=WGS84"</span><span class="op">)</span></span>
<span><span class="va">aoe_no_mask_ea</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_transform.html" class="external-link">st_transform</a></span><span class="op">(</span><span class="va">aoe_no_mask</span>, <span class="va">crs_ea</span><span class="op">)</span></span>
<span><span class="va">aoe_masked_ea</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_transform.html" class="external-link">st_transform</a></span><span class="op">(</span><span class="va">aoe_masked</span>, <span class="va">crs_ea</span><span class="op">)</span></span>
<span><span class="va">support_ea</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_transform.html" class="external-link">st_transform</a></span><span class="op">(</span><span class="va">support_geom</span>, <span class="va">crs_ea</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Plot</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>, bty <span class="op">=</span> <span class="st">"n"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_geometry</a></span><span class="op">(</span><span class="va">aoe_no_mask_ea</span><span class="op">)</span>, border <span class="op">=</span> <span class="st">"gray50"</span>, lty <span class="op">=</span> <span class="fl">2</span>, lwd <span class="op">=</span> <span class="fl">1.5</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_geometry</a></span><span class="op">(</span><span class="va">aoe_masked_ea</span><span class="op">)</span>, col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grDevices/rgb.html" class="external-link">rgb</a></span><span class="op">(</span><span class="fl">0.3</span>, <span class="fl">0.5</span>, <span class="fl">0.7</span>, <span class="fl">0.3</span><span class="op">)</span>,</span>
<span>     border <span class="op">=</span> <span class="st">"steelblue"</span>, lty <span class="op">=</span> <span class="fl">2</span>, lwd <span class="op">=</span> <span class="fl">1.5</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_geometry</a></span><span class="op">(</span><span class="va">support_ea</span><span class="op">)</span>, border <span class="op">=</span> <span class="st">"black"</span>, lwd <span class="op">=</span> <span class="fl">2</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/legend.html" class="external-link">legend</a></span><span class="op">(</span><span class="st">"topright"</span>,</span>
<span>       legend <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Portugal"</span>, <span class="st">"AoE (unmasked)"</span>, <span class="st">"AoE (land only)"</span><span class="op">)</span>,</span>
<span>       col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"black"</span>, <span class="st">"gray50"</span>, <span class="st">"steelblue"</span><span class="op">)</span>,</span>
<span>       lty <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>       lwd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">1.5</span>, <span class="fl">1.5</span><span class="op">)</span>,</span>
<span>       bty <span class="op">=</span> <span class="st">"n"</span>,</span>
<span>       inset <span class="op">=</span> <span class="fl">0.05</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<div class="svg-container"><button type="button" class="btn btn-primary btn-copy-svg" title="Copy SVG to clipboard" aria-label="Copy SVG to clipboard" data-bs-toggle="tooltip" data-bs-placement="left"><i class="fa fa-copy"></i></button>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='576.00pt' height='432.00pt' viewBox='0 0 576.00 432.00' class="r-plt inline-svg" style="max-width:100%;width:100%;height:auto;">
<g class='svglite'>
<defs>
  <style type='text/css'><![CDATA[
    /* theme-aware-processed */
    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite circle {
      fill: none;
      stroke: #3E3F3A;
      stroke-linecap: round;
      stroke-linejoin: round;
      stroke-miterlimit: 10.00;
    }
    .svglite > g > rect {
      fill: none;
      stroke: #3E3F3A;
      stroke-linecap: round;
      stroke-linejoin: round;
      stroke-miterlimit: 10.00;
    }
    .svglite text {
      white-space: pre;
      fill: #3E3F3A;
    }
    .svglite g.glyphgroup path {
      fill: inherit;
      stroke: none;
    }
  ]]></style>
</defs>
<rect width='100%' height='100%' style='stroke: none; fill: #F5F6F8;'/>
<defs>
  <clipPath id='cpMC4wMHw1NzYuMDB8MC4wMHw0MzIuMDA='>
    <rect x='0.00' y='0.00' width='576.00' height='432.00' />
  </clipPath>
</defs>
<g clip-path='url(#cpMC4wMHw1NzYuMDB8MC4wMHw0MzIuMDA=)'>
</g>
<defs>
  <clipPath id='cpMTQuNDB8NTYxLjYwfDE0LjQwfDQxNy42MA=='>
    <rect x='14.40' y='14.40' width='547.20' height='403.20' />
  </clipPath>
</defs>
<g clip-path='url(#cpMTQuNDB8NTYxLjYwfDE0LjQwfDQxNy42MA==)'>
<rect class='legend-bg' x='14.40' y='14.40' width='547.20' height='403.20' style='stroke-width: 0.75; stroke: #F5F6F8; fill: #F5F6F8;' />
<path d='M 379.07 118.13 L 380.06 118.04 L 382.03 117.86 L 381.97 115.37 L 383.94 115.19 L 383.88 112.71 L 385.85 112.53 L 385.78 110.05 L 387.75 109.87 L 387.68 107.39 L 389.65 107.21 L 389.58 104.74 L 389.55 103.50 L 390.53 103.41 L 390.50 102.17 L 391.48 102.08 L 391.34 97.14 L 391.28 94.67 L 393.23 94.49 L 393.16 92.02 L 393.09 89.56 L 391.14 89.74 L 391.08 87.27 L 391.01 84.81 L 390.03 84.90 L 390.00 83.67 L 389.97 82.44 L 389.48 82.49 L 389.47 81.87 L 388.98 81.92 L 388.93 80.07 L 388.86 77.61 L 387.40 77.75 L 387.39 77.14 L 386.90 77.18 L 386.79 72.89 L 384.84 73.07 L 384.78 70.61 L 382.83 70.79 L 382.77 68.34 L 380.82 68.53 L 380.76 66.08 L 378.81 66.26 L 377.10 66.42 L 377.10 66.11 L 376.85 66.13 L 376.80 63.99 L 374.85 64.17 L 374.80 61.73 L 372.84 61.91 L 372.79 59.47 L 372.73 57.03 L 370.78 57.21 L 370.73 54.77 L 369.27 54.90 L 369.25 54.29 L 368.77 54.34 L 368.73 52.51 L 367.75 52.60 L 367.72 51.39 L 366.75 51.48 L 366.72 50.26 L 365.26 50.39 L 365.25 49.79 L 364.76 49.83 L 364.72 48.01 L 362.77 48.19 L 362.72 45.76 L 359.79 46.03 L 359.77 44.81 L 358.79 44.91 L 358.77 43.69 L 356.82 43.87 L 355.84 43.96 L 355.82 42.75 L 354.84 42.84 L 354.82 41.63 L 348.95 42.18 L 348.91 39.75 L 346.95 39.93 L 344.99 40.12 L 343.03 40.30 L 341.07 40.48 L 339.11 40.67 L 337.14 40.85 L 337.11 38.43 L 335.14 38.61 L 331.21 38.98 L 327.26 39.35 L 323.32 39.72 L 321.34 39.90 L 321.32 37.48 L 319.34 37.67 L 317.37 37.85 L 317.38 39.06 L 316.39 39.16 L 316.40 40.37 L 315.41 40.46 L 311.44 40.83 L 309.46 41.02 L 309.47 42.23 L 308.47 42.33 L 307.48 42.42 L 307.49 43.33 L 307.24 43.35 L 307.24 43.65 L 305.50 43.82 L 303.51 44.00 L 301.52 44.19 L 299.53 44.38 L 297.53 44.57 L 295.54 44.75 L 295.53 42.33 L 294.03 42.47 L 294.03 41.87 L 293.53 41.91 L 293.53 40.10 L 292.53 40.19 L 292.53 38.98 L 291.53 39.07 L 291.53 37.86 L 290.53 37.96 L 290.52 36.75 L 289.53 36.84 L 289.52 35.63 L 287.53 35.82 L 287.52 33.41 L 284.53 33.69 L 284.53 32.48 L 283.53 32.58 L 283.53 31.37 L 281.53 31.56 L 279.53 31.75 L 279.53 29.33 L 275.53 29.71 L 259.48 31.24 L 255.45 31.62 L 255.43 33.73 L 255.18 33.75 L 255.18 34.05 L 253.41 34.22 L 251.40 34.41 L 249.38 34.61 L 247.35 34.80 L 245.33 34.99 L 245.32 36.20 L 244.31 36.29 L 244.30 37.50 L 243.28 37.60 L 239.23 37.98 L 239.20 40.40 L 237.17 40.59 L 235.14 40.78 L 235.12 42.60 L 234.61 42.64 L 234.60 43.25 L 231.04 43.59 L 231.01 46.01 L 228.97 46.20 L 228.95 48.02 L 228.44 48.06 L 228.43 48.67 L 226.90 48.81 L 226.88 50.03 L 225.86 50.12 L 225.84 51.33 L 224.82 51.43 L 224.80 52.64 L 223.78 52.74 L 223.76 53.95 L 222.74 54.05 L 222.72 55.26 L 221.70 55.36 L 221.68 56.57 L 220.66 56.67 L 220.63 58.49 L 220.11 58.54 L 220.11 59.15 L 218.57 59.29 L 218.53 61.57 L 218.40 61.58 L 218.40 61.73 L 216.47 61.92 L 216.43 64.35 L 216.41 65.56 L 215.39 65.66 L 215.37 66.88 L 214.34 66.98 L 214.30 69.41 L 214.21 74.29 L 214.17 76.73 L 212.11 76.92 L 212.07 79.36 L 212.03 81.81 L 214.09 81.61 L 214.05 84.06 L 213.97 88.96 L 215.00 88.86 L 214.98 90.08 L 216.02 89.99 L 216.00 91.21 L 215.96 93.67 L 215.92 96.12 L 217.86 95.94 L 217.86 96.09 L 217.99 96.08 L 217.88 103.30 L 217.80 108.23 L 219.88 108.03 L 219.84 110.50 L 219.80 112.97 L 219.76 115.43 L 219.73 117.90 L 221.81 117.71 L 221.73 122.66 L 223.56 122.49 L 223.55 122.80 L 223.81 122.78 L 223.78 124.94 L 223.75 127.42 L 223.72 129.28 L 223.20 129.33 L 223.19 129.95 L 221.63 130.09 L 221.59 132.57 L 221.52 137.54 L 221.49 139.87 L 221.35 139.88 L 221.35 140.04 L 219.39 140.22 L 219.35 142.71 L 219.32 145.19 L 217.22 145.39 L 217.18 147.88 L 217.11 152.87 L 217.07 155.36 L 214.97 155.55 L 214.93 158.05 L 214.89 160.55 L 214.85 163.05 L 214.81 165.56 L 212.70 165.75 L 212.66 168.25 L 212.58 173.27 L 212.49 178.29 L 212.42 182.69 L 211.89 182.74 L 211.88 183.37 L 210.30 183.51 L 210.25 186.03 L 210.23 187.29 L 209.17 187.38 L 209.15 188.64 L 208.09 188.74 L 208.02 192.52 L 206.96 192.61 L 206.94 193.87 L 205.88 193.97 L 205.83 196.49 L 205.80 198.39 L 205.27 198.43 L 205.25 199.07 L 203.66 199.21 L 203.58 203.63 L 203.04 203.68 L 203.03 204.31 L 199.30 204.65 L 199.25 207.18 L 197.11 207.37 L 197.06 209.90 L 194.92 210.09 L 194.87 212.63 L 192.73 212.82 L 192.68 215.35 L 190.53 215.54 L 190.42 220.62 L 188.28 220.81 L 188.22 223.35 L 188.17 225.89 L 188.11 228.43 L 188.06 230.98 L 188.00 233.52 L 187.95 236.07 L 185.79 236.26 L 185.68 241.36 L 185.56 246.47 L 185.48 250.30 L 184.40 250.40 L 184.37 251.68 L 183.29 251.77 L 183.23 254.33 L 183.17 256.89 L 183.11 259.45 L 183.06 262.02 L 183.00 264.58 L 182.94 267.15 L 182.89 269.72 L 182.83 272.29 L 182.77 274.86 L 184.68 274.69 L 184.67 275.01 L 184.94 274.99 L 184.89 277.24 L 184.84 279.82 L 186.74 279.65 L 186.74 279.97 L 187.01 279.95 L 186.96 282.20 L 188.05 282.11 L 188.02 283.40 L 189.11 283.30 L 189.09 284.59 L 190.18 284.50 L 190.15 285.79 L 191.24 285.69 L 191.21 286.98 L 192.30 286.89 L 192.28 288.18 L 193.37 288.08 L 193.34 289.37 L 195.52 289.18 L 195.47 291.77 L 195.42 294.35 L 197.60 294.16 L 197.55 296.75 L 197.50 299.34 L 199.68 299.15 L 199.64 301.74 L 201.82 301.55 L 201.77 304.14 L 203.95 303.95 L 203.91 306.55 L 206.09 306.36 L 207.18 306.27 L 207.16 307.56 L 208.25 307.47 L 208.23 308.77 L 210.40 308.58 L 210.36 311.18 L 210.28 316.37 L 210.24 318.98 L 212.15 318.81 L 212.15 319.14 L 212.42 319.11 L 212.38 321.39 L 212.34 324.00 L 212.30 326.60 L 214.49 326.42 L 214.34 336.86 L 214.22 344.70 L 212.03 344.89 L 211.99 347.51 L 211.95 350.13 L 211.91 352.42 L 211.64 352.44 L 211.63 352.77 L 209.71 352.93 L 209.63 358.18 L 207.42 358.37 L 207.38 360.99 L 207.34 363.46 L 207.20 363.47 L 207.20 363.63 L 205.13 363.81 L 205.05 369.06 L 204.87 379.60 L 204.83 382.24 L 207.05 382.05 L 207.00 384.69 L 208.11 384.60 L 208.09 385.92 L 209.20 385.83 L 209.14 389.79 L 211.35 389.61 L 211.31 392.25 L 213.53 392.07 L 213.49 394.71 L 216.81 394.44 L 216.80 395.76 L 217.90 395.67 L 217.89 396.99 L 220.10 396.81 L 221.21 396.71 L 221.19 398.04 L 222.30 397.95 L 222.28 399.27 L 226.70 398.90 L 226.67 401.56 L 228.88 401.37 L 231.09 401.19 L 233.30 401.01 L 235.51 400.82 L 237.71 400.64 L 239.92 400.46 L 242.12 400.27 L 244.32 400.09 L 246.52 399.91 L 246.54 397.92 L 247.09 397.87 L 247.09 397.21 L 257.51 396.34 L 265.17 395.71 L 265.17 397.03 L 266.26 396.94 L 266.25 398.27 L 268.44 398.08 L 270.62 397.90 L 271.71 397.81 L 271.71 399.14 L 272.80 399.05 L 272.80 400.37 L 274.98 400.19 L 277.16 400.01 L 277.16 402.67 L 279.34 402.49 L 281.52 402.30 L 283.70 402.12 L 285.87 401.94 L 288.05 401.76 L 290.22 401.58 L 292.39 401.40 L 294.56 401.22 L 296.73 401.04 L 298.90 400.85 L 301.06 400.67 L 301.06 399.35 L 302.14 399.25 L 302.13 397.93 L 305.37 397.66 L 307.53 397.47 L 307.52 394.82 L 309.68 394.64 L 311.83 394.46 L 311.82 392.47 L 312.36 392.42 L 312.35 391.76 L 318.27 391.26 L 320.42 391.08 L 320.39 388.43 L 322.54 388.25 L 324.68 388.07 L 326.83 387.89 L 326.80 385.24 L 328.94 385.06 L 328.93 383.73 L 329.99 383.64 L 329.98 382.32 L 331.05 382.23 L 333.18 382.05 L 333.16 379.40 L 335.29 379.22 L 335.23 374.59 L 335.77 374.54 L 335.76 373.88 L 337.36 373.74 L 337.32 371.10 L 337.29 368.46 L 339.42 368.28 L 339.35 363.00 L 339.32 360.36 L 338.26 360.45 L 338.24 359.13 L 337.18 359.22 L 337.17 357.90 L 337.13 355.27 L 337.10 352.63 L 337.07 350.00 L 337.04 347.37 L 334.92 347.55 L 334.83 339.67 L 336.94 339.49 L 336.91 336.86 L 339.02 336.68 L 341.13 336.50 L 341.10 333.88 L 343.20 333.70 L 345.31 333.52 L 345.28 331.22 L 345.54 331.20 L 345.53 330.87 L 347.37 330.72 L 349.47 330.54 L 349.43 327.92 L 351.53 327.73 L 351.49 325.12 L 353.58 324.94 L 353.54 322.32 L 353.52 321.01 L 354.57 320.92 L 354.55 319.61 L 355.59 319.52 L 355.55 316.91 L 357.64 316.73 L 357.59 314.12 L 357.55 311.51 L 357.53 310.20 L 358.57 310.11 L 358.55 308.81 L 359.59 308.72 L 359.50 303.50 L 359.32 293.09 L 359.27 290.50 L 357.20 290.68 L 357.16 288.08 L 356.12 288.17 L 356.10 286.87 L 355.06 286.96 L 355.00 283.07 L 352.92 283.25 L 352.88 280.66 L 350.81 280.84 L 349.77 280.93 L 349.75 279.64 L 348.71 279.73 L 348.69 278.43 L 346.62 278.62 L 346.58 276.03 L 348.65 275.85 L 348.61 273.26 L 350.69 273.08 L 350.65 270.49 L 352.72 270.31 L 352.67 267.73 L 352.64 265.79 L 353.16 265.75 L 353.15 265.10 L 354.70 264.97 L 354.65 262.39 L 354.62 260.45 L 355.14 260.41 L 355.13 259.76 L 356.67 259.63 L 356.63 257.05 L 356.59 254.47 L 356.54 251.90 L 356.50 249.33 L 356.46 247.40 L 356.98 247.36 L 356.97 246.71 L 356.71 246.74 L 356.71 246.41 L 356.45 246.44 L 356.41 244.19 L 356.37 241.62 L 356.32 239.06 L 356.28 236.49 L 354.23 236.67 L 354.14 231.55 L 352.09 231.73 L 352.05 229.17 L 350.00 229.36 L 349.96 226.80 L 347.91 226.98 L 347.87 224.43 L 349.92 224.24 L 349.88 221.69 L 351.93 221.51 L 351.89 218.96 L 351.87 217.68 L 352.89 217.59 L 352.87 216.32 L 353.89 216.22 L 353.85 213.99 L 354.10 213.97 L 354.10 213.65 L 355.88 213.49 L 355.84 210.95 L 355.82 209.67 L 356.84 209.58 L 356.81 208.31 L 357.83 208.22 L 357.79 205.68 L 357.75 203.77 L 358.26 203.72 L 358.25 203.09 L 359.77 202.95 L 359.73 200.41 L 359.68 197.87 L 361.71 197.69 L 361.66 195.16 L 361.57 190.09 L 361.47 185.02 L 361.38 179.97 L 363.39 179.79 L 363.34 177.26 L 363.31 175.37 L 363.81 175.33 L 363.80 174.69 L 365.31 174.56 L 365.21 169.52 L 365.01 159.45 L 364.81 149.42 L 364.61 139.41 L 364.56 136.92 L 363.56 137.01 L 363.54 135.76 L 362.54 135.85 L 362.52 134.60 L 362.48 132.42 L 362.72 132.40 L 362.72 132.08 L 364.46 131.93 L 364.41 129.43 L 368.39 129.07 L 368.35 127.20 L 368.85 127.16 L 368.84 126.54 L 370.33 126.40 L 372.31 126.22 L 372.28 124.97 L 373.27 124.88 L 373.25 123.64 L 376.22 123.37 L 376.16 120.88 L 378.14 120.70 L 378.11 119.46 L 379.10 119.37 L 379.07 118.13 Z' style='fill-rule: evenodd; stroke-width: 1.12; stroke: #7F7F7F; stroke-dasharray: 6.00,6.00;' />
<path d='M 360.87 383.67 L 360.85 382.37 L 362.96 382.19 L 362.91 379.54 L 362.87 376.89 L 362.83 374.90 L 363.36 374.86 L 363.35 374.19 L 364.93 374.06 L 364.88 371.41 L 364.79 366.12 L 364.70 360.84 L 364.60 355.56 L 364.51 350.29 L 366.60 350.12 L 366.56 347.65 L 366.69 347.64 L 366.69 347.47 L 368.65 347.30 L 368.62 345.99 L 369.67 345.90 L 369.65 344.58 L 370.69 344.49 L 370.67 343.18 L 371.71 343.09 L 371.68 341.77 L 372.73 341.68 L 372.70 340.37 L 373.75 340.28 L 373.72 338.97 L 374.76 338.88 L 374.74 337.56 L 375.78 337.47 L 375.75 336.16 L 376.79 336.07 L 376.74 333.77 L 377.00 333.75 L 377.00 333.42 L 378.82 333.27 L 378.76 330.64 L 378.73 329.33 L 379.77 329.24 L 379.75 327.93 L 380.78 327.84 L 380.73 325.22 L 382.80 325.04 L 382.74 322.42 L 382.68 319.81 L 384.75 319.63 L 384.69 317.01 L 384.58 311.78 L 386.64 311.61 L 386.58 308.99 L 386.52 306.38 L 386.46 303.78 L 386.40 301.17 L 386.34 298.56 L 386.28 295.96 L 386.22 293.36 L 386.15 290.76 L 386.09 288.16 L 384.04 288.34 L 383.86 280.55 L 381.81 280.73 L 381.75 278.14 L 381.69 275.55 L 379.64 275.73 L 379.53 270.55 L 381.58 270.38 L 381.52 267.79 L 381.46 265.21 L 381.41 262.95 L 381.67 262.92 L 381.66 262.60 L 383.45 262.44 L 383.39 259.86 L 383.15 249.56 L 382.91 239.28 L 382.79 234.15 L 382.73 231.59 L 380.70 231.76 L 380.64 229.20 L 380.59 226.65 L 379.07 226.78 L 379.05 226.14 L 378.54 226.19 L 378.50 224.27 L 380.53 224.09 L 380.47 221.53 L 380.42 219.14 L 380.54 219.13 L 380.54 218.97 L 382.43 218.80 L 382.32 213.70 L 384.33 213.52 L 384.27 210.97 L 384.21 208.42 L 386.23 208.24 L 386.10 203.15 L 386.04 200.61 L 388.05 200.43 L 387.99 197.89 L 387.93 195.35 L 387.86 192.81 L 387.80 190.28 L 387.74 187.74 L 387.69 185.84 L 388.19 185.80 L 388.17 185.16 L 389.68 185.03 L 389.61 182.50 L 389.55 179.97 L 391.54 179.79 L 391.48 177.26 L 391.41 174.74 L 391.35 172.22 L 391.28 169.69 L 391.22 167.17 L 391.15 164.66 L 391.09 162.14 L 391.02 159.62 L 390.95 157.11 L 390.89 154.60 L 390.82 152.09 L 390.76 149.58 L 390.69 147.08 L 390.63 144.57 L 392.61 144.39 L 392.54 141.89 L 394.52 141.71 L 394.48 140.46 L 395.47 140.37 L 395.44 139.12 L 396.42 139.03 L 398.39 138.85 L 398.32 136.35 L 400.29 136.17 L 400.24 134.30 L 400.73 134.26 L 400.71 133.63 L 402.19 133.50 L 402.15 132.25 L 403.13 132.16 L 403.10 130.91 L 404.08 130.82 L 404.04 129.58 L 405.02 129.49 L 404.99 128.24 L 405.97 128.15 L 405.93 126.90 L 406.91 126.82 L 406.87 125.57 L 407.85 125.48 L 409.81 125.30 L 409.73 122.81 L 409.69 121.57 L 410.67 121.48 L 410.63 120.23 L 411.61 120.15 L 411.57 118.90 L 412.54 118.81 L 412.50 117.57 L 413.48 117.48 L 413.40 115.00 L 415.35 114.82 L 415.18 109.85 L 417.13 109.68 L 417.05 107.20 L 416.96 104.72 L 416.92 103.48 L 417.89 103.39 L 417.85 102.15 L 418.82 102.06 L 418.74 99.59 L 418.57 94.65 L 418.24 84.78 L 418.07 79.86 L 416.14 80.03 L 416.06 77.58 L 415.98 75.12 L 415.90 72.66 L 413.97 72.84 L 413.89 70.39 L 413.81 67.94 L 411.89 68.11 L 411.81 65.66 L 411.73 63.22 L 409.80 63.39 L 409.73 60.95 L 408.28 61.08 L 408.26 60.47 L 407.78 60.52 L 407.72 58.68 L 406.76 58.77 L 406.72 57.55 L 405.76 57.64 L 405.72 56.42 L 405.65 53.98 L 403.72 54.16 L 403.65 51.72 L 401.72 51.89 L 401.65 49.46 L 399.73 49.64 L 398.76 49.73 L 398.73 48.51 L 397.76 48.60 L 397.73 47.38 L 395.83 47.56 L 395.83 47.52 L 395.80 47.52 L 395.73 45.12 L 394.77 45.21 L 394.73 44.00 L 393.77 44.09 L 393.74 42.87 L 393.67 40.44 L 391.74 40.62 L 391.67 38.19 L 389.81 38.37 L 389.81 38.29 L 389.75 38.30 L 389.68 35.95 L 388.00 36.10 L 387.99 35.80 L 387.75 35.82 L 387.69 33.70 L 386.00 33.86 L 386.00 33.56 L 385.76 33.58 L 385.70 31.46 L 383.77 31.64 L 383.71 29.22 L 381.78 29.40 L 381.72 26.98 L 379.79 27.16 L 378.83 27.25 L 378.80 26.04 L 377.83 26.13 L 377.80 24.92 L 375.87 25.10 L 375.82 22.69 L 373.89 22.87 L 372.92 22.96 L 372.89 21.75 L 371.93 21.84 L 371.90 20.64 L 369.97 20.82 L 369.00 20.91 L 368.97 19.70 L 368.01 19.79 L 367.98 18.59 L 366.05 18.77 L 364.11 18.95 L 364.06 16.54 L 362.13 16.72 L 358.25 17.08 L 358.20 14.68 L 356.27 14.86 L 354.33 15.04 L 352.39 15.22 L 350.44 15.41 L 348.50 15.59 L 348.46 13.18 L 346.51 13.37 L 338.72 14.10 L 334.81 14.47 L 334.78 12.06 L 332.83 12.25 L 330.87 12.43 L 328.92 12.62 L 326.96 12.80 L 325.00 12.99 L 323.04 13.17 L 321.08 13.36 L 319.11 13.54 L 317.15 13.73 L 317.13 11.33 L 315.16 11.51 L 315.18 13.92 L 313.21 14.10 L 311.24 14.29 L 309.27 14.48 L 307.30 14.66 L 305.33 14.85 L 303.85 14.99 L 303.84 14.39 L 303.35 14.44 L 303.34 12.63 L 301.36 12.82 L 301.35 10.42 L 299.38 10.61 L 297.40 10.80 L 297.39 8.40 L 295.41 8.59 L 293.43 8.77 L 293.43 6.38 L 291.45 6.57 L 289.47 6.75 L 288.48 6.85 L 288.47 5.65 L 287.48 5.74 L 287.48 4.55 L 283.52 4.93 L 281.53 5.11 L 281.53 2.72 L 279.55 2.91 L 277.56 3.10 L 275.57 3.29 L 273.59 3.48 L 271.60 3.67 L 269.60 3.86 L 267.61 4.05 L 266.61 4.15 L 266.62 2.95 L 265.62 3.05 L 265.63 1.85 L 263.63 2.04 L 261.64 2.23 L 261.62 4.62 L 259.63 4.82 L 257.63 5.01 L 255.62 5.20 L 253.62 5.39 L 251.62 5.58 L 249.61 5.77 L 249.60 6.97 L 248.60 7.07 L 248.59 8.26 L 247.58 8.36 L 243.57 8.74 L 239.54 9.13 L 237.53 9.32 L 237.50 11.72 L 235.48 11.91 L 233.46 12.10 L 231.44 12.30 L 231.44 12.40 L 234.14 14.64 L 239.35 15.66 L 238.87 17.63 L 234.32 24.04 L 234.36 28.28 L 236.43 28.81 L 244.53 25.51 L 245.04 28.01 L 244.41 36.05 L 248.14 39.69 L 246.31 42.99 L 244.43 44.44 L 244.13 47.49 L 249.87 48.22 L 240.73 58.60 L 241.04 68.41 L 242.23 69.66 L 245.72 68.82 L 240.97 75.52 L 240.50 79.70 L 242.37 83.39 L 246.59 83.85 L 243.99 86.70 L 244.18 92.40 L 247.17 109.48 L 250.08 117.56 L 250.74 121.79 L 249.42 142.45 L 247.16 148.72 L 245.21 151.51 L 240.27 172.92 L 239.55 177.85 L 241.22 179.57 L 241.83 181.82 L 226.62 217.13 L 221.58 224.28 L 218.27 226.40 L 215.58 229.63 L 216.55 235.23 L 213.45 243.60 L 212.48 252.98 L 210.28 259.60 L 209.99 262.95 L 210.19 267.16 L 215.85 269.28 L 226.60 266.65 L 228.84 260.99 L 235.58 249.84 L 239.80 246.79 L 243.47 246.07 L 236.35 250.96 L 233.27 256.81 L 234.34 263.02 L 232.15 266.47 L 228.63 269.53 L 224.52 270.03 L 220.97 271.91 L 223.16 279.23 L 222.60 284.85 L 223.89 285.48 L 237.17 281.05 L 242.81 280.73 L 249.12 286.59 L 238.77 285.12 L 242.11 294.24 L 242.47 301.42 L 238.59 315.32 L 241.30 320.72 L 242.74 329.34 L 241.35 338.02 L 241.48 348.02 L 232.15 372.59 L 235.24 373.63 L 239.59 369.98 L 245.01 370.09 L 252.04 367.25 L 257.65 368.60 L 274.88 370.08 L 284.66 374.52 L 289.90 374.50 L 306.75 364.37 L 322.51 361.75 L 332.43 362.29 L 334.66 361.25 L 337.86 357.25 L 338.10 359.09 L 336.89 362.50 L 356.55 377.05 L 360.87 383.67 Z' style='fill-rule: evenodd; fill: #4D80B3; fill-opacity: 0.30; stroke-width: 1.12; stroke: #4682B4; stroke-dasharray: 6.00,6.00;' />
<path d='M 240.97 75.52 L 240.50 79.70 L 242.37 83.39 L 246.59 83.85 L 243.99 86.70 L 244.18 92.40 L 247.17 109.48 L 250.08 117.56 L 250.74 121.79 L 250.92 125.31 L 250.00 132.30 L 249.42 142.45 L 247.16 148.72 L 245.21 151.51 L 240.27 172.92 L 239.55 177.85 L 241.22 179.57 L 241.83 181.82 L 233.73 200.01 L 226.62 217.13 L 221.58 224.28 L 218.27 226.40 L 215.58 229.63 L 216.37 232.99 L 216.55 235.23 L 213.45 243.60 L 212.48 252.98 L 210.28 259.60 L 209.99 262.95 L 210.19 267.16 L 213.27 268.65 L 215.85 269.28 L 220.93 268.44 L 226.60 266.65 L 228.84 260.99 L 235.58 249.84 L 239.80 246.79 L 243.47 246.07 L 236.35 250.96 L 233.27 256.81 L 234.34 263.02 L 232.15 266.47 L 228.63 269.53 L 224.52 270.03 L 220.97 271.91 L 223.16 279.23 L 222.60 284.85 L 223.89 285.48 L 228.32 284.48 L 237.17 281.05 L 239.76 281.21 L 242.81 280.73 L 245.95 282.97 L 249.12 286.59 L 238.77 285.12 L 242.11 294.24 L 242.47 301.42 L 238.59 315.32 L 241.30 320.72 L 242.74 329.34 L 241.35 338.02 L 241.48 348.02 L 235.78 364.35 L 232.15 372.59 L 235.24 373.63 L 239.59 369.98 L 245.01 370.09 L 252.04 367.25 L 257.65 368.60 L 274.88 370.08 L 284.66 374.52 L 289.90 374.50 L 306.75 364.37 L 311.08 363.66 L 307.96 348.30 L 306.51 342.39 L 306.12 338.56 L 309.00 329.71 L 312.17 326.09 L 316.38 318.63 L 321.56 312.40 L 327.07 310.88 L 329.50 309.95 L 331.49 305.15 L 332.59 301.05 L 331.74 300.66 L 325.32 301.56 L 313.64 284.55 L 313.97 281.82 L 315.39 277.76 L 316.31 272.64 L 316.51 268.61 L 319.47 265.12 L 324.01 261.58 L 327.80 256.59 L 329.68 251.72 L 330.03 247.31 L 327.82 244.20 L 321.56 242.52 L 315.04 230.01 L 313.55 222.16 L 312.24 221.35 L 308.26 217.80 L 304.44 211.10 L 303.88 210.06 L 307.78 208.86 L 323.87 208.67 L 327.22 207.15 L 327.72 206.63 L 330.60 201.37 L 333.56 192.74 L 334.21 187.49 L 333.22 185.33 L 327.86 180.08 L 327.62 178.52 L 328.44 176.01 L 331.55 173.29 L 335.76 170.20 L 338.04 167.55 L 337.46 165.50 L 336.19 163.37 L 335.97 161.37 L 336.71 158.89 L 336.88 150.47 L 337.39 148.30 L 336.47 140.67 L 335.36 134.44 L 331.93 126.38 L 332.52 124.58 L 334.03 123.05 L 339.01 120.18 L 342.92 113.52 L 348.64 107.90 L 356.16 103.34 L 361.38 98.31 L 363.40 94.50 L 364.86 93.47 L 364.40 91.72 L 363.35 89.18 L 360.28 86.74 L 356.37 85.37 L 352.05 85.51 L 349.37 85.05 L 348.56 83.11 L 348.77 77.81 L 348.45 72.58 L 347.59 70.18 L 345.57 68.40 L 341.63 68.94 L 338.20 67.51 L 335.61 67.19 L 334.13 68.38 L 326.50 68.14 L 323.32 67.33 L 321.09 66.30 L 319.67 66.90 L 318.87 67.93 L 318.75 69.53 L 318.25 71.65 L 315.54 73.58 L 309.30 75.53 L 304.25 75.42 L 299.61 74.08 L 298.12 73.10 L 295.87 72.21 L 286.46 73.34 L 285.33 72.53 L 282.08 74.49 L 277.29 76.83 L 274.60 76.96 L 273.62 76.46 L 273.27 75.41 L 271.26 71.76 L 271.79 69.83 L 275.66 64.20 L 275.23 62.85 L 273.65 61.02 L 272.24 58.39 L 271.84 57.03 L 269.39 56.80 L 266.78 58.17 L 256.82 60.96 L 254.44 61.97 L 250.11 64.68 L 245.72 68.82 L 240.97 75.52 Z' style='fill-rule: evenodd; stroke-width: 1.50;' />
<line x1='407.08' y1='48.96' x2='428.68' y2='48.96' style='stroke-width: 1.50;' />
<line x1='407.08' y1='63.36' x2='428.68' y2='63.36' style='stroke-width: 1.12; stroke: #7F7F7F; stroke-dasharray: 6.00,6.00;' />
<line x1='407.08' y1='77.76' x2='428.68' y2='77.76' style='stroke-width: 1.12; stroke: #4682B4; stroke-dasharray: 6.00,6.00;' />
<text x='439.48' y='53.26' style='font-size: 12.00px; font-family: "Roboto", -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif;' textLength='44.69px' lengthAdjust='spacingAndGlyphs'>Portugal</text>
<text x='439.48' y='67.66' style='font-size: 12.00px; font-family: "Roboto", -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif;' textLength='89.36px' lengthAdjust='spacingAndGlyphs'>AoE (unmasked)</text>
<text x='439.48' y='82.06' style='font-size: 12.00px; font-family: "Roboto", -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif;' textLength='82.03px' lengthAdjust='spacingAndGlyphs'>AoE (land only)</text>
</g>
</g>
</svg></div><p class="caption">
Portugal with land-masked AoE. The halo extends into Spain but not into
the Atlantic.
</p>
</div>
<p>The <code>area = 1</code> parameter ensures the halo has equal land
area to the core, even after the ocean is masked out. Without this,
coastline clipping would reduce the effective halo area.</p>
</div>
</div>
<div class="section level2">
<h2 id="scale-parameter">Scale Parameter<a class="anchor" aria-label="anchor" href="#scale-parameter"></a>
</h2>
<p>The <code>scale</code> parameter controls halo size as a proportion
of core area.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Default: equal core/halo areas (scale = sqrt(2) - 1)</span></span>
<span><span class="va">result_default</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe.html">aoe</a></span><span class="op">(</span><span class="va">pts</span>, <span class="va">support</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Scale = 1: larger halo (3:1 area ratio)</span></span>
<span><span class="va">result_large</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe.html">aoe</a></span><span class="op">(</span><span class="va">pts</span>, <span class="va">support</span>, scale <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th>Scale</th>
<th>Halo:Core Area</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>
<code>sqrt(2) - 1</code> (default)</td>
<td>1:1</td>
</tr>
<tr class="even">
<td><code>1</code></td>
<td>3:1</td>
</tr>
<tr class="odd">
<td><code>0.5</code></td>
<td>1.25:1</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="area-parameter-target-halo-area">Area Parameter (Target Halo Area)<a class="anchor" aria-label="anchor" href="#area-parameter-target-halo-area"></a>
</h2>
<p>Sometimes you need a specific halo area regardless of masking. The
<code>area</code> parameter specifies the target halo area as a
proportion of the original support:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Halo area = original area (same as scale = sqrt(2) - 1 without mask)</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe.html">aoe</a></span><span class="op">(</span><span class="va">pts</span>, <span class="va">support</span>, area <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Halo area = half of original</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe.html">aoe</a></span><span class="op">(</span><span class="va">pts</span>, <span class="va">support</span>, area <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span></span></code></pre></div>
<p>Unlike <code>scale</code>, <code>area</code> accounts for masking:
the function finds the scale that produces the target halo area
<em>after</em> mask intersection. This is useful for coastal regions
where scale alone would produce inconsistent effective areas.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Target area = 1 means halo = original, even after coastline clipping</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe.html">aoe</a></span><span class="op">(</span><span class="va">pts</span>, <span class="va">support</span>, area <span class="op">=</span> <span class="fl">1</span>, mask <span class="op">=</span> <span class="st">"land"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="adaptive-expansion-with-aoe_expand">Adaptive Expansion with <code>aoe_expand()</code><a class="anchor" aria-label="anchor" href="#adaptive-expansion-with-aoe_expand"></a>
</h2>
<p>When some supports have too few points at baseline AoE,
<code><a href="../reference/aoe_expand.html">aoe_expand()</a></code> finds the minimum scale needed to capture a
target number of points:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create sparse data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">42</span><span class="op">)</span></span>
<span><span class="va">pts_sparse</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">15</span><span class="op">)</span>,</span>
<span>  geometry <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html" class="external-link">st_sfc</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, <span class="kw">function</span><span class="op">(</span><span class="va">i</span><span class="op">)</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">20</span>, <span class="fl">80</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">20</span>, <span class="fl">80</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="kw">function</span><span class="op">(</span><span class="va">i</span><span class="op">)</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span>, <span class="op">-</span><span class="fl">50</span>, <span class="fl">150</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span>, <span class="op">-</span><span class="fl">50</span>, <span class="fl">150</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span><span class="op">)</span>,</span>
<span>  crs <span class="op">=</span> <span class="fl">32631</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Expand until at least 10 points are captured</span></span>
<span><span class="va">result_expand</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe_expand.html">aoe_expand</a></span><span class="op">(</span><span class="va">pts_sparse</span>, <span class="va">support</span>, min_points <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<p>Two safety caps prevent unreasonable expansion:</p>
<ul>
<li><p><code>max_area = 2</code> (default): halo area cannot exceed 2×
the original</p></li>
<li><p><code>max_dist</code>: maximum expansion distance in CRS
units</p></li>
</ul>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Strict caps</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe_expand.html">aoe_expand</a></span><span class="op">(</span><span class="va">pts</span>, <span class="va">support</span>,</span>
<span>                     min_points <span class="op">=</span> <span class="fl">50</span>,</span>
<span>                     max_area <span class="op">=</span> <span class="fl">1.5</span>,    <span class="co"># halo ≤ 1.5× original</span></span>
<span>                     max_dist <span class="op">=</span> <span class="fl">500</span><span class="op">)</span>    <span class="co"># max 500m expansion</span></span></code></pre></div>
<p>Check expansion details:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">info</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">result_expand</span>, <span class="st">"expansion_info"</span><span class="op">)</span></span>
<span><span class="va">info</span></span>
<span><span class="co">#&gt;   support_id scale_used points_captured target_reached cap_hit</span></span>
<span><span class="co">#&gt; 1          1  0.6412593              10           TRUE    none</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="balanced-sampling-with-aoe_sample">Balanced Sampling with <code>aoe_sample()</code><a class="anchor" aria-label="anchor" href="#balanced-sampling-with-aoe_sample"></a>
</h2>
<p>Core regions often dominate due to point density.
<code><a href="../reference/aoe_sample.html">aoe_sample()</a></code> provides stratified sampling to balance
core/halo representation:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create imbalanced data (many core, few halo)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">42</span><span class="op">)</span></span>
<span><span class="va">pts_imbal</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">60</span><span class="op">)</span>,</span>
<span>  geometry <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html" class="external-link">st_sfc</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">50</span>, <span class="kw">function</span><span class="op">(</span><span class="va">i</span><span class="op">)</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span>, <span class="fl">90</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span>, <span class="fl">90</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="kw">function</span><span class="op">(</span><span class="va">i</span><span class="op">)</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">110</span>, <span class="fl">140</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span>, <span class="fl">90</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span><span class="op">)</span>,</span>
<span>  crs <span class="op">=</span> <span class="fl">32631</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">result_imbal</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe.html">aoe</a></span><span class="op">(</span><span class="va">pts_imbal</span>, <span class="va">support</span>, scale <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Default: balance core/halo (downsamples core to match halo)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span></span>
<span><span class="va">balanced</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe_sample.html">aoe_sample</a></span><span class="op">(</span><span class="va">result_imbal</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">balanced</span><span class="op">$</span><span class="va">aoe_class</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; core halo </span></span>
<span><span class="co">#&gt;   10   10</span></span></code></pre></div>
<p>Custom ratios and fixed sample sizes:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Fixed n with 70/30 split</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span></span>
<span><span class="va">sampled</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe_sample.html">aoe_sample</a></span><span class="op">(</span><span class="va">result_imbal</span>, n <span class="op">=</span> <span class="fl">20</span>, ratio <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>core <span class="op">=</span> <span class="fl">0.7</span>, halo <span class="op">=</span> <span class="fl">0.3</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">sampled</span><span class="op">$</span><span class="va">aoe_class</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; core halo </span></span>
<span><span class="co">#&gt;   14    6</span></span></code></pre></div>
<p>For multiple supports, use <code>by = "support"</code> to sample
within each:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sampled</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe_sample.html">aoe_sample</a></span><span class="op">(</span><span class="va">result_multi</span>, by <span class="op">=</span> <span class="st">"support"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="border-classification-with-aoe_border">Border Classification with <code>aoe_border()</code><a class="anchor" aria-label="anchor" href="#border-classification-with-aoe_border"></a>
</h2>
<p>When your study involves a boundary <em>line</em> rather than a
polygon (e.g., a river, mountain range, or political border), use
<code><a href="../reference/aoe_border.html">aoe_border()</a></code> to classify points by their distance from and
side of the border.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create a diagonal border line</span></span>
<span><span class="va">border_line</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>  geometry <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html" class="external-link">st_sfc</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_linestring</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>,</span>
<span>      <span class="fl">100</span>, <span class="fl">100</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="fl">2</span>, byrow <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  crs <span class="op">=</span> <span class="fl">32631</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create points on both sides</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">42</span><span class="op">)</span></span>
<span><span class="va">pts_border</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">30</span><span class="op">)</span>,</span>
<span>  geometry <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html" class="external-link">st_sfc</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="co"># Points on side 1 (above the line)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">15</span>, <span class="kw">function</span><span class="op">(</span><span class="va">i</span><span class="op">)</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span>, <span class="fl">90</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span>, <span class="fl">90</span><span class="op">)</span> <span class="op">+</span> <span class="fl">20</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    <span class="co"># Points on side 2 (below the line)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">15</span>, <span class="kw">function</span><span class="op">(</span><span class="va">i</span><span class="op">)</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span>, <span class="fl">90</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span>, <span class="fl">90</span><span class="op">)</span> <span class="op">-</span> <span class="fl">20</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span><span class="op">)</span>,</span>
<span>  crs <span class="op">=</span> <span class="fl">32631</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Classify by distance from border</span></span>
<span><span class="va">result_border</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe_border.html">aoe_border</a></span><span class="op">(</span></span>
<span>  <span class="va">pts_border</span>, <span class="va">border_line</span>,</span>
<span>  width <span class="op">=</span> <span class="fl">30</span>,</span>
<span>  side_names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"north"</span>, <span class="st">"south"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Extract geometries for ggplot2</span></span>
<span><span class="va">geoms</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">result_border</span>, <span class="st">"border_geometries"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Plot with ggplot2</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co"># Halo zones (background)</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">geoms</span><span class="op">$</span><span class="va">side1_halo</span>, fill <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">aoe_colors</span><span class="op">$</span><span class="va">side_a</span>, <span class="st">"20"</span><span class="op">)</span>, color <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">geoms</span><span class="op">$</span><span class="va">side2_halo</span>, fill <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">aoe_colors</span><span class="op">$</span><span class="va">side_b</span>, <span class="st">"20"</span><span class="op">)</span>, color <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co"># Core zones</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">geoms</span><span class="op">$</span><span class="va">side1_core</span>, fill <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">aoe_colors</span><span class="op">$</span><span class="va">side_a</span>, <span class="st">"40"</span><span class="op">)</span>, color <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">geoms</span><span class="op">$</span><span class="va">side2_core</span>, fill <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">aoe_colors</span><span class="op">$</span><span class="va">side_b</span>, <span class="st">"40"</span><span class="op">)</span>, color <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co"># Border line</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">geoms</span><span class="op">$</span><span class="va">border</span>, color <span class="op">=</span> <span class="va">aoe_colors</span><span class="op">$</span><span class="va">support</span>, linewidth <span class="op">=</span> <span class="fl">1.5</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co"># Points</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">result_border</span>,</span>
<span>          <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="va">side</span>, shape <span class="op">=</span> <span class="va">aoe_class</span><span class="op">)</span>, size <span class="op">=</span> <span class="fl">3</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_color_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"north"</span> <span class="op">=</span> <span class="va">aoe_colors</span><span class="op">$</span><span class="va">side_a</span>, <span class="st">"south"</span> <span class="op">=</span> <span class="va">aoe_colors</span><span class="op">$</span><span class="va">side_b</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_shape_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"core"</span> <span class="op">=</span> <span class="fl">16</span>, <span class="st">"halo"</span> <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>                     labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Core"</span>, <span class="st">"Halo"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"Side"</span>, shape <span class="op">=</span> <span class="st">"Class"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_aoe</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<div class="svg-container"><button type="button" class="btn btn-primary btn-copy-svg" title="Copy SVG to clipboard" aria-label="Copy SVG to clipboard" data-bs-toggle="tooltip" data-bs-placement="left"><i class="fa fa-copy"></i></button>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='576.00pt' height='432.00pt' viewBox='0 0 576.00 432.00' class="r-plt inline-svg" style="max-width:100%;width:100%;height:auto;">
<g class='svglite'>
<defs>
  <style type='text/css'><![CDATA[
    /* theme-aware-processed */
    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite circle {
      fill: none;
      stroke: #3E3F3A;
      stroke-linecap: round;
      stroke-linejoin: round;
      stroke-miterlimit: 10.00;
    }
    .svglite > g > rect {
      fill: none;
      stroke: #3E3F3A;
      stroke-linecap: round;
      stroke-linejoin: round;
      stroke-miterlimit: 10.00;
    }
    .svglite text {
      white-space: pre;
      fill: #3E3F3A;
    }
    .svglite g.glyphgroup path {
      fill: inherit;
      stroke: none;
    }
  ]]></style>
</defs>
<rect width='100%' height='100%' style='stroke: none; fill: #F5F6F8;'/>
<defs>
  <clipPath id='cpMC4wMHw1NzYuMDB8MC4wMHw0MzIuMDA='>
    <rect x='0.00' y='0.00' width='576.00' height='432.00' />
  </clipPath>
</defs>
<g clip-path='url(#cpMC4wMHw1NzYuMDB8MC4wMHw0MzIuMDA=)'>
</g>
<defs>
  <clipPath id='cpNDQuMDd8NTMxLjkzfDAuMDB8NDMyLjAw'>
    <rect x='44.07' y='0.00' width='487.86' height='432.00' />
  </clipPath>
</defs>
<g clip-path='url(#cpNDQuMDd8NTMxLjkzfDAuMDB8NDMyLjAw)'>
<rect x='44.07' y='0.00' width='487.86' height='432.00' style='stroke-width: 0.00; stroke: none;' /> fill: #F5F6F8;' />
</g>
<g clip-path='url(#cpMC4wMHw1NzYuMDB8MC4wMHw0MzIuMDA=)'>
</g>
<defs>
  <clipPath id='cpNTQuMDN8NDY2LjExfDkuOTZ8NDIyLjA0'>
    <rect x='54.03' y='9.96' width='412.07' height='412.07' />
  </clipPath>
</defs>
<g clip-path='url(#cpNTQuMDN8NDY2LjExfDkuOTZ8NDIyLjA0)'>
<rect x='54.03' y='9.96' width='412.07' height='412.07' style='stroke-width: 0.00; stroke: none;' /> fill: #F5F6F8;' />
<path d='M 280.91 51.46 L 285.15 48.21 L 289.56 45.18 L 294.12 42.38 L 298.82 39.83 L 303.65 37.53 L 308.59 35.48 L 313.64 33.69 L 318.76 32.17 L 323.97 30.93 L 329.22 29.95 L 334.53 29.25 L 339.86 28.83 L 345.21 28.69 L 350.55 28.83 L 355.89 29.25 L 361.19 29.95 L 366.45 30.93 L 371.65 32.17 L 376.78 33.69 L 381.82 35.48 L 386.76 37.53 L 391.59 39.83 L 396.29 42.38 L 400.85 45.18 L 405.26 48.21 L 409.50 51.46 L 413.57 54.94 L 417.45 58.62 L 381.33 94.74 L 379.39 92.90 L 377.36 91.16 L 375.23 89.53 L 373.03 88.02 L 370.75 86.62 L 368.40 85.34 L 365.98 84.19 L 363.51 83.17 L 360.99 82.28 L 358.43 81.52 L 355.83 80.89 L 353.20 80.41 L 350.55 80.06 L 347.88 79.85 L 345.21 79.78 L 342.53 79.85 L 339.87 80.06 L 337.22 80.41 L 334.59 80.89 L 331.99 81.52 L 329.42 82.28 L 326.90 83.17 L 324.43 84.19 L 322.02 85.34 L 319.67 86.62 L 317.39 88.02 L 315.18 89.53 L 313.06 91.16 L 311.03 92.90 L 309.09 94.74 L 138.81 265.02 L 136.97 266.96 L 135.23 268.99 L 133.60 271.11 L 132.09 273.32 L 130.69 275.60 L 129.41 277.95 L 128.26 280.36 L 127.24 282.83 L 126.34 285.35 L 125.59 287.92 L 124.96 290.52 L 124.47 293.15 L 124.12 295.80 L 123.91 298.47 L 123.84 301.14 L 123.91 303.81 L 124.12 306.48 L 124.47 309.13 L 124.96 311.76 L 125.59 314.36 L 126.34 316.93 L 127.24 319.45 L 128.26 321.92 L 129.41 324.33 L 130.69 326.68 L 132.09 328.96 L 133.60 331.17 L 135.23 333.29 L 136.97 335.32 L 138.81 337.26 L 102.69 373.38 L 99.00 369.50 L 95.53 365.44 L 92.27 361.19 L 89.24 356.78 L 86.45 352.22 L 83.90 347.52 L 81.59 342.69 L 79.55 337.75 L 77.76 332.71 L 76.24 327.58 L 74.99 322.38 L 74.02 317.12 L 73.32 311.82 L 72.90 306.49 L 72.76 301.14 L 72.90 295.79 L 73.32 290.46 L 74.02 285.16 L 74.99 279.90 L 76.24 274.70 L 77.76 269.57 L 79.55 264.53 L 81.59 259.58 L 83.90 254.76 L 86.45 250.06 L 89.24 245.50 L 92.27 241.09 L 95.53 236.84 L 99.00 232.78 L 102.69 228.90 L 272.96 58.62 L 276.84 54.94 L 280.91 51.46 Z' style='fill-rule: evenodd; fill: #2B6CB0; fill-opacity: 0.13; stroke-width: 0.47; stroke: none; stroke-linecap: butt;' />
<path d='M 424.61 66.56 L 427.86 70.81 L 430.89 75.22 L 433.69 79.78 L 436.24 84.48 L 438.54 89.31 L 440.59 94.25 L 442.37 99.29 L 443.89 104.42 L 445.14 109.62 L 446.12 114.88 L 446.81 120.18 L 447.23 125.51 L 447.37 130.86 L 447.23 136.21 L 446.81 141.54 L 446.12 146.84 L 445.14 152.10 L 443.89 157.30 L 442.37 162.43 L 440.59 167.47 L 438.54 172.42 L 436.24 177.24 L 433.69 181.94 L 430.89 186.50 L 427.86 190.91 L 424.61 195.16 L 421.13 199.22 L 417.45 203.10 L 247.17 373.38 L 243.29 377.06 L 239.22 380.54 L 234.98 383.79 L 230.57 386.82 L 226.01 389.62 L 221.31 392.17 L 216.48 394.47 L 211.54 396.52 L 206.50 398.31 L 201.37 399.83 L 196.17 401.07 L 190.91 402.05 L 185.61 402.75 L 180.28 403.17 L 174.93 403.31 L 169.58 403.17 L 164.25 402.75 L 158.95 402.05 L 153.69 401.07 L 148.49 399.83 L 143.36 398.31 L 138.31 396.52 L 133.37 394.47 L 128.55 392.17 L 123.84 389.62 L 119.28 386.82 L 114.88 383.79 L 110.63 380.54 L 106.57 377.06 L 102.69 373.38 L 102.69 373.38 L 138.81 337.26 L 138.81 337.26 L 140.75 339.10 L 142.78 340.84 L 144.90 342.47 L 147.11 343.98 L 149.39 345.38 L 151.74 346.66 L 154.15 347.81 L 156.62 348.83 L 159.14 349.72 L 161.71 350.48 L 164.31 351.11 L 166.94 351.59 L 169.59 351.94 L 172.25 352.15 L 174.93 352.22 L 177.60 352.15 L 180.27 351.94 L 182.92 351.59 L 185.55 351.11 L 188.15 350.48 L 190.71 349.72 L 193.24 348.83 L 195.71 347.81 L 198.12 346.66 L 200.47 345.38 L 202.75 343.98 L 204.95 342.47 L 207.08 340.84 L 209.11 339.10 L 211.05 337.26 L 381.33 166.98 L 383.17 165.04 L 384.91 163.01 L 386.53 160.89 L 388.05 158.68 L 389.45 156.40 L 390.72 154.05 L 391.87 151.64 L 392.90 149.17 L 393.79 146.65 L 394.55 144.08 L 395.17 141.48 L 395.66 138.85 L 396.01 136.20 L 396.22 133.53 L 396.29 130.86 L 396.22 128.19 L 396.01 125.52 L 395.66 122.87 L 395.17 120.24 L 394.55 117.64 L 393.79 115.07 L 392.90 112.55 L 391.87 110.08 L 390.72 107.67 L 389.45 105.32 L 388.05 103.04 L 386.53 100.83 L 384.91 98.71 L 383.17 96.68 L 381.33 94.74 L 417.45 58.62 L 421.13 62.50 L 424.61 66.56 Z' style='fill-rule: evenodd; fill: #C05621; fill-opacity: 0.13; stroke-width: 0.47; stroke: none; stroke-linecap: butt;' />
<path d='M 311.03 92.90 L 313.06 91.16 L 315.18 89.53 L 317.39 88.02 L 319.67 86.62 L 322.02 85.34 L 324.43 84.19 L 326.90 83.17 L 329.42 82.28 L 331.99 81.52 L 334.59 80.89 L 337.22 80.41 L 339.87 80.06 L 342.53 79.85 L 345.21 79.78 L 347.88 79.85 L 350.55 80.06 L 353.20 80.41 L 355.83 80.89 L 358.43 81.52 L 360.99 82.28 L 363.51 83.17 L 365.98 84.19 L 368.40 85.34 L 370.75 86.62 L 373.03 88.02 L 375.23 89.53 L 377.36 91.16 L 379.39 92.90 L 381.33 94.74 L 138.81 337.26 L 136.97 335.32 L 135.23 333.29 L 133.60 331.17 L 132.09 328.96 L 130.69 326.68 L 129.41 324.33 L 128.26 321.92 L 127.24 319.45 L 126.34 316.93 L 125.59 314.36 L 124.96 311.76 L 124.47 309.13 L 124.12 306.48 L 123.91 303.81 L 123.84 301.14 L 123.91 298.47 L 124.12 295.80 L 124.47 293.15 L 124.96 290.52 L 125.59 287.92 L 126.34 285.35 L 127.24 282.83 L 128.26 280.36 L 129.41 277.95 L 130.69 275.60 L 132.09 273.32 L 133.60 271.11 L 135.23 268.99 L 136.97 266.96 L 138.81 265.02 L 309.09 94.74 L 311.03 92.90 Z' style='fill-rule: evenodd; fill: #2B6CB0; fill-opacity: 0.25; stroke-width: 0.47; stroke: none; stroke-linecap: butt;' />
<path d='M 383.17 96.68 L 384.91 98.71 L 386.53 100.83 L 388.05 103.04 L 389.45 105.32 L 390.72 107.67 L 391.87 110.08 L 392.90 112.55 L 393.79 115.07 L 394.55 117.64 L 395.17 120.24 L 395.66 122.87 L 396.01 125.52 L 396.22 128.19 L 396.29 130.86 L 396.22 133.53 L 396.01 136.20 L 395.66 138.85 L 395.17 141.48 L 394.55 144.08 L 393.79 146.65 L 392.90 149.17 L 391.87 151.64 L 390.72 154.05 L 389.45 156.40 L 388.05 158.68 L 386.53 160.89 L 384.91 163.01 L 383.17 165.04 L 381.33 166.98 L 211.05 337.26 L 209.11 339.10 L 207.08 340.84 L 204.95 342.47 L 202.75 343.98 L 200.47 345.38 L 198.12 346.66 L 195.71 347.81 L 193.24 348.83 L 190.71 349.72 L 188.15 350.48 L 185.55 351.11 L 182.92 351.59 L 180.27 351.94 L 177.60 352.15 L 174.93 352.22 L 172.25 352.15 L 169.59 351.94 L 166.94 351.59 L 164.31 351.11 L 161.71 350.48 L 159.14 349.72 L 156.62 348.83 L 154.15 347.81 L 151.74 346.66 L 149.39 345.38 L 147.11 343.98 L 144.90 342.47 L 142.78 340.84 L 140.75 339.10 L 138.81 337.26 L 138.81 337.26 L 381.33 94.74 L 383.17 96.68 Z' style='fill-rule: evenodd; fill: #C05621; fill-opacity: 0.25; stroke-width: 0.47; stroke: none; stroke-linecap: butt;' />
<polyline points='174.93,301.14 345.21,130.86 ' style='stroke-width: 3.20; stroke: #2D3748; stroke-linecap: butt;' />
<circle cx='316.57' cy='122.40' r='3.56' style='stroke-width: 0.71; stroke: none; stroke-linecap: butt; fill: #2B6CB0;' />
<circle cx='230.94' cy='136.93' r='3.56' style='stroke-width: 0.71; stroke: #2B6CB0; stroke-linecap: butt;' />
<circle cx='279.38' cy='179.34' r='3.56' style='stroke-width: 0.71; stroke: none; stroke-linecap: butt; fill: #2B6CB0;' />
<circle cx='292.30' cy='231.71' r='3.56' style='stroke-width: 0.71; stroke: none; stroke-linecap: butt; fill: #C05621;' />
<circle cx='281.45' cy='154.01' r='3.56' style='stroke-width: 0.71; stroke: none; stroke-linecap: butt; fill: #2B6CB0;' />
<circle cx='254.31' cy='152.10' r='3.56' style='stroke-width: 0.71; stroke: none; stroke-linecap: butt; fill: #2B6CB0;' />
<circle cx='319.28' cy='215.26' r='3.56' style='stroke-width: 0.71; stroke: none; stroke-linecap: butt; fill: #C05621;' />
<circle cx='254.93' cy='122.00' r='3.56' style='stroke-width: 0.71; stroke: #2B6CB0; stroke-linecap: butt;' />
<circle cx='325.21' cy='234.05' r='3.56' style='stroke-width: 0.71; stroke: #C05621; stroke-linecap: butt;' />
<circle cx='256.66' cy='173.73' r='3.56' style='stroke-width: 0.71; stroke: none; stroke-linecap: butt; fill: #2B6CB0;' />
<circle cx='315.11' cy='231.16' r='3.56' style='stroke-width: 0.71; stroke: none; stroke-linecap: butt; fill: #C05621;' />
<circle cx='326.67' cy='121.10' r='3.56' style='stroke-width: 0.71; stroke: none; stroke-linecap: butt; fill: #2B6CB0;' />
<circle cx='203.19' cy='180.01' r='3.56' style='stroke-width: 0.71; stroke: #2B6CB0; stroke-linecap: butt;' />
<circle cx='245.11' cy='126.67' r='3.56' style='stroke-width: 0.71; stroke: #2B6CB0; stroke-linecap: butt;' />
<circle cx='252.84' cy='136.17' r='3.56' style='stroke-width: 0.71; stroke: #2B6CB0; stroke-linecap: butt;' />
<circle cx='292.43' cy='207.68' r='3.56' style='stroke-width: 0.71; stroke: none; stroke-linecap: butt; fill: #C05621;' />
<circle cx='244.83' cy='224.83' r='3.56' style='stroke-width: 0.71; stroke: none; stroke-linecap: butt; fill: #2B6CB0;' />
<circle cx='192.49' cy='204.70' r='3.56' style='stroke-width: 0.71; stroke: #2B6CB0; stroke-linecap: butt;' />
<circle cx='192.96' cy='289.88' r='3.56' style='stroke-width: 0.71; stroke: none; stroke-linecap: butt; fill: #C05621;' />
<circle cx='315.46' cy='234.83' r='3.56' style='stroke-width: 0.71; stroke: #C05621; stroke-linecap: butt;' />
<circle cx='243.66' cy='258.81' r='3.56' style='stroke-width: 0.71; stroke: none; stroke-linecap: butt; fill: #C05621;' />
<circle cx='197.06' cy='185.55' r='3.56' style='stroke-width: 0.71; stroke: #2B6CB0; stroke-linecap: butt;' />
<circle cx='250.77' cy='187.72' r='3.56' style='stroke-width: 0.71; stroke: none; stroke-linecap: butt; fill: #2B6CB0;' />
<circle cx='312.89' cy='230.99' r='3.56' style='stroke-width: 0.71; stroke: none; stroke-linecap: butt; fill: #C05621;' />
<circle cx='324.22' cy='233.87' r='3.56' style='stroke-width: 0.71; stroke: #C05621; stroke-linecap: butt;' />
<circle cx='237.38' cy='270.93' r='3.56' style='stroke-width: 0.71; stroke: none; stroke-linecap: butt; fill: #C05621;' />
<circle cx='246.24' cy='211.27' r='3.56' style='stroke-width: 0.71; stroke: none; stroke-linecap: butt; fill: #2B6CB0;' />
<circle cx='197.26' cy='216.16' r='3.56' style='stroke-width: 0.71; stroke: none; stroke-linecap: butt; fill: #2B6CB0;' />
<circle cx='284.22' cy='294.84' r='3.56' style='stroke-width: 0.71; stroke: #C05621; stroke-linecap: butt;' />
<circle cx='227.52' cy='248.09' r='3.56' style='stroke-width: 0.71; stroke: none; stroke-linecap: butt; fill: #2B6CB0;' />
</g>
<g clip-path='url(#cpMC4wMHw1NzYuMDB8MC4wMHw0MzIuMDA=)'>
<rect x='471.77' y='160.75' width='50.20' height='51.65' style='stroke-width: 0.00; stroke: none;' /> fill: #F5F6F8;' />
<text x='471.77' y='170.60' style='font-size: 12.00px; font-weight: bold;fill: #2D3748; font-family: "Roboto", -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif;' textLength='25.33px' lengthAdjust='spacingAndGlyphs'>Side</text>
<rect x='471.77' y='177.84' width='17.28' height='17.28' style='stroke-width: 0.00; stroke: none;' /> fill: #F5F6F8;' />
<circle cx='480.41' cy='186.48' r='3.56' style='stroke-width: 0.71; stroke: #2B6CB0; fill: #2B6CB0;' />
<rect x='471.77' y='195.12' width='17.28' height='17.28' style='stroke-width: 0.00; stroke: none;' /> fill: #F5F6F8;' />
<circle cx='480.41' cy='203.76' r='3.56' style='stroke-width: 0.71; stroke: #C05621; fill: #C05621;' />
<text x='495.03' y='190.42' style='font-size: 11.00px;fill: #2D3748; font-family: "Roboto", -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif;' textLength='25.09px' lengthAdjust='spacingAndGlyphs'>north</text>
<text x='495.03' y='207.70' style='font-size: 11.00px;fill: #2D3748; font-family: "Roboto", -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif;' textLength='26.94px' lengthAdjust='spacingAndGlyphs'>south</text>
<rect x='471.77' y='219.60' width='47.10' height='51.65' style='stroke-width: 0.00; stroke: none;' /> fill: #F5F6F8;' />
<text x='471.77' y='229.46' style='font-size: 12.00px; font-weight: bold;fill: #2D3748; font-family: "Roboto", -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif;' textLength='32.02px' lengthAdjust='spacingAndGlyphs'>Class</text>
<rect x='471.77' y='236.69' width='17.28' height='17.28' style='stroke-width: 0.00; stroke: none;' /> fill: #F5F6F8;' />
<circle cx='480.41' cy='245.33' r='3.56' style='stroke-width: 0.71; stroke: none; fill: #000000;' />
<rect x='471.77' y='253.97' width='17.28' height='17.28' style='stroke-width: 0.00; stroke: none;' /> fill: #F5F6F8;' />
<circle cx='480.41' cy='262.61' r='3.56' style='stroke-width: 0.71;' />
<text x='495.03' y='249.27' style='font-size: 11.00px;fill: #2D3748; font-family: "Roboto", -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif;' textLength='23.84px' lengthAdjust='spacingAndGlyphs'>Core</text>
<text x='495.03' y='266.55' style='font-size: 11.00px;fill: #2D3748; font-family: "Roboto", -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif;' textLength='22.62px' lengthAdjust='spacingAndGlyphs'>Halo</text>
</g>
</g>
</svg></div><p class="caption">
Border classification. Points are classified by side (blue vs orange)
and distance (core vs halo) from the border line.
</p>
</div>
<p>The <code><a href="../reference/aoe_border.html">aoe_border()</a></code> function:</p>
<ul>
<li><p>Creates symmetric buffer zones on both sides of the
border</p></li>
<li><p>Classifies points as “core” (near border) or “halo” (farther
away)</p></li>
<li><p>Assigns each point to a side based on position relative to the
line</p></li>
</ul>
<div class="section level3">
<h3 id="area-based-border-zones">Area-Based Border Zones<a class="anchor" aria-label="anchor" href="#area-based-border-zones"></a>
</h3>
<p>Use the <code>area</code> parameter to specify target zone areas
instead of fixed widths:</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Each side's core zone has area 5000 (in CRS units²)</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe_border.html">aoe_border</a></span><span class="op">(</span><span class="va">pts</span>, <span class="va">border</span>, area <span class="op">=</span> <span class="fl">5000</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="sampling-from-border-results">Sampling from Border Results<a class="anchor" aria-label="anchor" href="#sampling-from-border-results"></a>
</h3>
<p><code><a href="../reference/aoe_sample.html">aoe_sample()</a></code> also works with border results, allowing
stratification by side or class:</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Balance by side (equal north/south)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span></span>
<span><span class="va">balanced_side</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe_sample.html">aoe_sample</a></span><span class="op">(</span><span class="va">result_border</span>, ratio <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>north <span class="op">=</span> <span class="fl">0.5</span>, south <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">balanced_side</span><span class="op">$</span><span class="va">side</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; north south </span></span>
<span><span class="co">#&gt;    12    12</span></span>
<span></span>
<span><span class="co"># Balance by distance class</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span></span>
<span><span class="va">balanced_class</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe_sample.html">aoe_sample</a></span><span class="op">(</span><span class="va">result_border</span>, by <span class="op">=</span> <span class="st">"class"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">balanced_class</span><span class="op">$</span><span class="va">aoe_class</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; core halo </span></span>
<span><span class="co">#&gt;   11   11</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="diagnostics">Diagnostics<a class="anchor" aria-label="anchor" href="#diagnostics"></a>
</h2>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/aoe_summary.html">aoe_summary</a></span><span class="op">(</span><span class="va">result</span><span class="op">)</span></span>
<span><span class="co">#&gt;   support_id n_total n_core n_halo prop_core prop_halo</span></span>
<span><span class="co">#&gt; 1          1       4      3      1      0.75      0.25</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="summary">Summary<a class="anchor" aria-label="anchor" href="#summary"></a>
</h2>
<ul>
<li><p><code><a href="../reference/aoe.html">aoe()</a></code> classifies points as “core” or “halo”</p></li>
<li><p>Works with dataframes or sf objects</p></li>
<li><p>Pass country codes directly: <code>aoe(df, "AT")</code></p></li>
<li><p>Area-based halos enable consistent cross-country
comparisons</p></li>
<li><p>Use <code>mask</code> for coastlines and hard boundaries</p></li>
<li><p>Use <code>area</code> parameter for target halo area (accounts
for masking)</p></li>
<li><p>Use <code><a href="../reference/aoe_expand.html">aoe_expand()</a></code> for adaptive expansion to capture
minimum points</p></li>
<li><p>Use <code><a href="../reference/aoe_sample.html">aoe_sample()</a></code> for balanced core/halo
sampling</p></li>
<li><p>Use <code><a href="../reference/aoe_border.html">aoe_border()</a></code> for border/line-based
classification</p></li>
<li><p>Use <code><a href="../reference/aoe_summary.html">aoe_summary()</a></code> for diagnostics</p></li>
</ul>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Gilles Colling.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  
<script>
/* SVG Copy Button Functionality */
(function() {
  "use strict";

  // Initialize SVG copy buttons after DOM is ready
  document.addEventListener("DOMContentLoaded", function() {
    if (typeof ClipboardJS === "undefined") {
      console.warn("ClipboardJS not loaded - SVG copy buttons disabled");
      return;
    }

    // Initialize clipboard for SVG copy buttons
    var svgClipboard = new ClipboardJS(".btn-copy-svg", {
      text: function(trigger) {
        var container = trigger.closest(".svg-container");
        if (!container) return "";

        var svg = container.querySelector("svg");
        if (!svg) return "";

        // Clone SVG to avoid modifying the original
        var clone = svg.cloneNode(true);

        // Remove inline-svg class (not needed in copied version)
        clone.classList.remove("inline-svg");

        // Add XML declaration and serialize
        var serializer = new XMLSerializer();
        var svgString = serializer.serializeToString(clone);

        // Add XML declaration if not present
        if (!svgString.startsWith("<?xml")) {
          svgString = '<?xml version="1.0" encoding="UTF-8"?>\n' + svgString;
        }

        return svgString;
      }
    });

    // Handle success
    svgClipboard.on("success", function(e) {
      var btn = e.trigger;
      var originalTitle = btn.getAttribute("data-bs-original-title") || btn.getAttribute("title");

      // Update tooltip to show "Copied!"
      btn.setAttribute("data-bs-original-title", "Copied!");
      var tooltip = bootstrap.Tooltip.getInstance(btn);
      if (tooltip) {
        tooltip.show();
      }

      // Reset after delay
      setTimeout(function() {
        btn.setAttribute("data-bs-original-title", originalTitle);
      }, 1500);

      e.clearSelection();
    });

    // Handle error
    svgClipboard.on("error", function(e) {
      var btn = e.trigger;
      btn.setAttribute("data-bs-original-title", "Press Ctrl+C to copy");
      var tooltip = bootstrap.Tooltip.getInstance(btn);
      if (tooltip) {
        tooltip.show();
      }
    });

    // Initialize tooltips for SVG copy buttons
    var svgCopyButtons = document.querySelectorAll(".btn-copy-svg");
    svgCopyButtons.forEach(function(btn) {
      new bootstrap.Tooltip(btn, { container: "body" });
    });
  });
})();
</script>
</body>
</html>
