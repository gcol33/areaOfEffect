<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Quick Start • areaOfEffect</title>
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Quick Start">
</head>
<body>
<p>








  pkgdown/mathjax-config.html

  

  </p>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">areaOfEffect</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.5</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/quickstart.html">Get Started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/quickstart.html">Quick Start</a></li>
    <li><a class="dropdown-item" href="../articles/theory.html">Theory</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/gcol33/areaOfEffect" aria-label="GitHub"><span class="fa fab fa-github"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Quick Start</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/gcol33/areaOfEffect/blob/HEAD/vignettes/quickstart.Rmd" class="external-link"><code>vignettes/quickstart.Rmd</code></a></small>
      <div class="d-none name"><code>quickstart.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>The <code>areaOfEffect</code> package classifies spatial points by
their position relative to a region’s boundary—without requiring sf
expertise.</p>
<p><strong>Dataframe in → dataframe out.</strong></p>
<p>Points are classified as:</p>
<ul>
<li><p><strong>Core</strong>: inside the original support</p></li>
<li><p><strong>Halo</strong>: outside the original but inside the area
of effect</p></li>
<li><p><strong>Pruned</strong>: outside the AoE entirely
(removed)</p></li>
</ul>
<p>By default, halos are defined as <strong>equal area to the
core</strong>—a proportion-based definition that enables consistent
cross-region comparisons.</p>
</div>
<div class="section level2">
<h2 id="getting-started">Getting Started<a class="anchor" aria-label="anchor" href="#getting-started"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://gillescolling.com/areaOfEffect/" class="external-link">areaOfEffect</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="from-a-dataframe">From a Dataframe<a class="anchor" aria-label="anchor" href="#from-a-dataframe"></a>
</h3>
<p>The simplest usage: pass a dataframe with coordinates and a country
name.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Your occurrence data</span></span>
<span><span class="va">observations</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  species <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Oak"</span>, <span class="st">"Beech"</span>, <span class="st">"Pine"</span>, <span class="st">"Spruce"</span><span class="op">)</span>,</span>
<span>  lon <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">14.5</span>, <span class="fl">15.2</span>, <span class="fl">16.8</span>, <span class="fl">20.0</span><span class="op">)</span>,</span>
<span>  lat <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">47.5</span>, <span class="fl">48.1</span>, <span class="fl">47.2</span>, <span class="fl">48.5</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Classify relative to Austria</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe.html">aoe</a></span><span class="op">(</span><span class="va">observations</span>, <span class="st">"Austria"</span><span class="op">)</span></span>
<span><span class="va">result</span><span class="op">$</span><span class="va">aoe_class</span></span>
<span><span class="co">#&gt; [1] "core" "core" "halo"</span></span></code></pre></div>
<p>The package auto-detects coordinate columns (lon/lat, x/y,
longitude/latitude, etc.).</p>
</div>
<div class="section level3">
<h3 id="from-sf-objects">From sf Objects<a class="anchor" aria-label="anchor" href="#from-sf-objects"></a>
</h3>
<p>sf objects work directly:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe.html">aoe</a></span><span class="op">(</span><span class="va">pts_sf</span>, <span class="st">"AT"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="austria-example">Austria Example<a class="anchor" aria-label="anchor" href="#austria-example"></a>
</h2>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get Austria and transform to equal-area projection</span></span>
<span><span class="va">austria</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_country.html">get_country</a></span><span class="op">(</span><span class="st">"AT"</span><span class="op">)</span></span>
<span><span class="va">austria_ea</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_transform.html" class="external-link">st_transform</a></span><span class="op">(</span><span class="va">austria</span>, <span class="st">"ESRI:54009"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create a point inside Austria</span></span>
<span><span class="va">dummy_pt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_unary.html" class="external-link">st_centroid</a></span><span class="op">(</span><span class="va">austria_ea</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: st_centroid assumes attributes are constant over geometries</span></span>
<span></span>
<span><span class="co"># Run aoe() to get geometries (uses buffer method by default)</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe.html">aoe</a></span><span class="op">(</span><span class="va">dummy_pt</span>, <span class="va">austria_ea</span><span class="op">)</span></span>
<span><span class="va">geoms</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe_geometry.html">aoe_geometry</a></span><span class="op">(</span><span class="va">result</span>, <span class="st">"both"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Extract geometries</span></span>
<span><span class="va">austria_geom</span> <span class="op">&lt;-</span> <span class="va">geoms</span><span class="op">[</span><span class="va">geoms</span><span class="op">$</span><span class="va">type</span> <span class="op">==</span> <span class="st">"original"</span>, <span class="op">]</span></span>
<span><span class="va">aoe_geom</span> <span class="op">&lt;-</span> <span class="va">geoms</span><span class="op">[</span><span class="va">geoms</span><span class="op">$</span><span class="va">type</span> <span class="op">==</span> <span class="st">"aoe"</span>, <span class="op">]</span></span>
<span></span>
<span><span class="co"># Plot</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>, bty <span class="op">=</span> <span class="st">"n"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_geometry</a></span><span class="op">(</span><span class="va">aoe_geom</span><span class="op">)</span>, border <span class="op">=</span> <span class="st">"steelblue"</span>, lty <span class="op">=</span> <span class="fl">2</span>, lwd <span class="op">=</span> <span class="fl">1.5</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_geometry</a></span><span class="op">(</span><span class="va">austria_geom</span><span class="op">)</span>, border <span class="op">=</span> <span class="st">"black"</span>, lwd <span class="op">=</span> <span class="fl">2</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/legend.html" class="external-link">legend</a></span><span class="op">(</span><span class="st">"topright"</span>,</span>
<span>       legend <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Austria (core)"</span>, <span class="st">"Area of Effect"</span><span class="op">)</span>,</span>
<span>       col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"black"</span>, <span class="st">"steelblue"</span><span class="op">)</span>,</span>
<span>       lty <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>       lwd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">1.5</span><span class="op">)</span>,</span>
<span>       inset <span class="op">=</span> <span class="fl">0.02</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<div class="svg-container"><button type="button" class="btn btn-primary btn-copy-svg" title="Copy SVG to clipboard" aria-label="Copy SVG to clipboard" data-bs-toggle="tooltip" data-bs-placement="left"><i class="fa fa-copy"></i></button>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='576.00pt' height='432.00pt' viewBox='0 0 576.00 432.00' class="r-plt inline-svg" style="max-width:100%;width:100%;height:auto;">
<g class='svglite'>
<defs>
  <style type='text/css'><![CDATA[
    /* theme-aware-processed */
    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite circle {
      fill: none;
      stroke: #3E3F3A;
      stroke-linecap: round;
      stroke-linejoin: round;
      stroke-miterlimit: 10.00;
    }
    .svglite > g > rect {
      fill: none;
      stroke: #3E3F3A;
      stroke-linecap: round;
      stroke-linejoin: round;
      stroke-miterlimit: 10.00;
    }
    .svglite text {
      white-space: pre;
      fill: #3E3F3A;
    }
    .svglite g.glyphgroup path {
      fill: inherit;
      stroke: none;
    }
  ]]></style>
</defs>
<rect width='100%' height='100%' style='stroke: none; fill: #F5F6F8;'/>
<defs>
  <clipPath id='cpMC4wMHw1NzYuMDB8MC4wMHw0MzIuMDA='>
    <rect x='0.00' y='0.00' width='576.00' height='432.00' />
  </clipPath>
</defs>
<g clip-path='url(#cpMC4wMHw1NzYuMDB8MC4wMHw0MzIuMDA=)'>
</g>
<defs>
  <clipPath id='cpMTQuNDB8NTYxLjYwfDE0LjQwfDQxNy42MA=='>
    <rect x='14.40' y='14.40' width='547.20' height='403.20' />
  </clipPath>
</defs>
<g clip-path='url(#cpMTQuNDB8NTYxLjYwfDE0LjQwfDQxNy42MA==)'>
<rect class='legend-bg' x='14.40' y='14.40' width='547.20' height='403.20' style='stroke-width: 0.75; stroke: #F5F6F8; fill: #F5F6F8;' />
<path d='M 37.22 242.57 L 36.64 241.06 L 36.08 239.33 L 35.61 237.57 L 35.24 235.79 L 34.96 233.99 L 34.76 232.18 L 34.67 230.36 L 34.67 228.54 L 34.76 226.72 L 34.94 224.91 L 35.22 223.11 L 35.60 221.32 L 36.06 219.56 L 36.62 217.83 L 37.26 216.12 L 37.99 214.45 L 38.81 212.83 L 39.70 211.24 L 40.68 209.71 L 41.74 208.22 L 42.88 206.80 L 44.08 205.43 L 45.36 204.13 L 46.69 202.90 L 48.10 201.74 L 49.56 200.65 L 51.07 199.64 L 52.64 198.70 L 54.02 197.93 L 55.62 197.08 L 57.27 196.32 L 58.95 195.64 L 60.67 195.05 L 62.41 194.55 L 64.18 194.14 L 65.97 193.83 L 67.26 193.66 L 68.59 193.05 L 70.31 192.36 L 72.06 191.76 L 73.84 191.26 L 75.64 190.84 L 77.46 190.53 L 79.30 190.31 L 81.14 190.19 L 82.99 190.16 L 84.84 190.23 L 86.68 190.40 L 88.51 190.67 L 90.32 191.03 L 92.12 191.48 L 93.88 192.03 L 99.27 193.86 L 101.02 194.51 L 102.73 195.24 L 105.54 196.55 L 105.98 196.29 L 107.63 195.46 L 109.31 194.71 L 111.03 194.05 L 112.79 193.48 L 114.57 193.01 L 116.37 192.63 L 118.20 192.34 L 120.03 192.15 L 121.87 192.06 L 123.71 192.06 L 125.55 192.16 L 127.39 192.35 L 129.10 192.63 L 134.01 192.42 L 135.98 192.39 L 137.95 192.48 L 139.92 192.67 L 141.87 192.97 L 143.80 193.38 L 145.70 193.90 L 147.36 194.46 L 149.53 194.55 L 151.38 194.67 L 153.22 194.89 L 155.05 195.21 L 156.86 195.62 L 158.64 196.13 L 160.39 196.73 L 162.11 197.42 L 163.79 198.20 L 165.43 199.07 L 166.03 199.43 L 167.01 199.06 L 167.80 198.79 L 170.29 197.28 L 172.00 196.31 L 173.77 195.43 L 175.58 194.66 L 177.43 193.98 L 185.44 191.32 L 187.25 190.78 L 189.09 190.33 L 190.95 189.98 L 192.83 189.73 L 199.22 189.05 L 200.20 188.11 L 201.62 186.88 L 203.11 185.73 L 204.66 184.65 L 206.27 183.66 L 207.92 182.76 L 209.62 181.95 L 211.37 181.23 L 213.14 180.61 L 214.95 180.08 L 216.79 179.65 L 217.35 179.55 L 217.49 178.41 L 217.80 176.64 L 218.20 174.90 L 218.68 173.17 L 219.25 171.48 L 219.91 169.81 L 220.65 168.18 L 221.48 166.59 L 222.38 165.04 L 225.00 160.81 L 226.00 159.29 L 227.08 157.81 L 228.24 156.39 L 229.46 155.04 L 230.76 153.75 L 232.12 152.53 L 233.54 151.38 L 237.94 148.02 L 239.28 147.05 L 240.66 146.14 L 242.08 145.29 L 252.04 139.69 L 253.75 138.80 L 254.24 138.57 L 254.60 137.28 L 255.18 135.56 L 255.86 133.87 L 256.61 132.22 L 257.46 130.61 L 258.38 129.04 L 259.38 127.53 L 260.46 126.07 L 261.62 124.66 L 262.84 123.32 L 264.13 122.05 L 264.31 121.86 L 265.61 120.59 L 266.97 119.39 L 268.39 118.26 L 269.86 117.21 L 271.39 116.23 L 272.97 115.33 L 274.59 114.52 L 276.25 113.78 L 276.40 113.73 L 276.92 112.87 L 277.96 111.34 L 279.08 109.86 L 280.28 108.45 L 281.55 107.10 L 282.89 105.82 L 284.29 104.61 L 285.76 103.48 L 287.28 102.43 L 288.86 101.45 L 290.48 100.57 L 292.15 99.77 L 293.86 99.05 L 295.61 98.43 L 297.39 97.90 L 299.19 97.47 L 301.01 97.13 L 302.84 96.89 L 304.69 96.74 L 306.54 96.69 L 308.39 96.74 L 310.24 96.89 L 312.08 97.13 L 313.90 97.47 L 315.70 97.90 L 317.47 98.43 L 319.17 98.98 L 320.82 99.57 L 322.45 100.24 L 324.04 100.99 L 328.99 103.48 L 330.42 104.23 L 331.81 105.06 L 333.16 105.94 L 335.85 107.80 L 336.09 106.66 L 336.57 104.89 L 337.14 103.16 L 337.80 101.45 L 338.54 99.78 L 339.38 98.15 L 340.29 96.57 L 341.29 95.03 L 342.36 93.55 L 343.39 92.21 L 344.53 90.80 L 345.73 89.45 L 347.01 88.17 L 348.35 86.95 L 349.75 85.80 L 351.21 84.73 L 352.73 83.73 L 354.29 82.82 L 355.89 81.98 L 357.54 81.23 L 359.23 80.56 L 360.94 79.98 L 362.69 79.49 L 364.45 79.09 L 366.24 78.79 L 368.04 78.57 L 369.84 78.45 L 371.65 78.42 L 373.46 78.48 L 377.67 78.73 L 379.44 78.88 L 381.19 79.12 L 382.92 79.45 L 384.64 79.86 L 386.34 80.36 L 387.10 80.63 L 388.65 80.54 L 390.51 80.54 L 392.38 80.63 L 394.24 80.82 L 396.08 81.11 L 397.91 81.50 L 403.33 82.79 L 405.02 83.24 L 406.67 83.77 L 408.30 84.38 L 409.90 85.07 L 418.47 89.03 L 421.03 89.09 L 422.83 89.17 L 424.62 89.35 L 426.40 89.62 L 428.16 89.98 L 429.91 90.43 L 431.63 90.96 L 433.31 91.59 L 434.97 92.30 L 436.58 93.09 L 438.16 93.97 L 443.71 97.25 L 445.06 96.66 L 446.76 96.03 L 448.48 95.48 L 450.24 95.02 L 452.01 94.66 L 453.80 94.38 L 455.60 94.20 L 457.41 94.11 L 459.22 94.11 L 461.03 94.21 L 464.82 94.51 L 466.88 94.74 L 468.92 95.08 L 470.93 95.55 L 472.92 96.13 L 476.37 97.25 L 478.33 97.95 L 480.25 98.77 L 482.11 99.70 L 484.97 101.23 L 486.85 101.57 L 488.89 102.06 L 491.90 102.89 L 493.70 103.44 L 495.47 104.08 L 497.20 104.81 L 498.88 105.64 L 500.52 106.55 L 502.11 107.55 L 503.65 108.64 L 505.12 109.80 L 506.53 111.04 L 507.88 112.36 L 509.15 113.74 L 510.34 115.19 L 511.46 116.71 L 512.49 118.28 L 513.44 119.90 L 514.90 122.57 L 515.38 123.14 L 516.47 124.59 L 517.48 126.09 L 518.42 127.64 L 519.27 129.23 L 520.04 130.87 L 520.73 132.54 L 521.32 134.25 L 521.83 135.98 L 522.25 137.74 L 522.58 139.52 L 522.82 141.31 L 522.97 143.11 L 523.02 144.92 L 522.98 146.69 L 523.00 147.09 L 523.04 148.92 L 522.98 150.74 L 522.83 152.57 L 522.59 154.38 L 522.38 155.52 L 523.20 156.97 L 528.64 164.11 L 529.25 164.96 L 530.08 165.69 L 531.41 166.99 L 532.67 168.36 L 533.85 169.80 L 534.96 171.29 L 535.99 172.84 L 536.93 174.44 L 537.79 176.09 L 538.56 177.78 L 539.24 179.51 L 539.82 181.28 L 540.32 183.07 L 540.71 184.89 L 541.02 186.72 L 541.22 188.57 L 541.33 190.43 L 541.33 192.29 L 541.24 194.14 L 541.05 195.99 L 540.77 197.83 L 540.39 199.65 L 539.91 201.45 L 539.34 203.22 L 538.74 204.76 L 539.21 206.44 L 539.61 208.25 L 539.92 210.08 L 540.13 211.92 L 540.24 213.77 L 540.25 215.63 L 540.17 217.48 L 539.99 219.33 L 539.71 221.16 L 539.34 222.98 L 538.87 224.77 L 538.30 226.54 L 537.65 228.27 L 536.90 229.97 L 536.07 231.63 L 535.14 233.24 L 534.14 234.80 L 533.06 236.30 L 531.89 237.75 L 530.66 239.13 L 529.35 240.45 L 527.97 241.69 L 526.53 242.86 L 525.03 243.95 L 523.48 244.97 L 521.87 245.89 L 520.22 246.74 L 518.53 247.49 L 516.79 248.16 L 515.03 248.73 L 514.99 248.74 L 514.86 249.09 L 514.12 250.72 L 513.31 252.31 L 512.83 253.13 L 513.20 254.90 L 513.48 256.80 L 513.67 258.72 L 513.74 260.65 L 513.72 262.58 L 513.62 264.83 L 513.55 267.24 L 513.45 269.04 L 513.26 270.83 L 512.98 272.61 L 512.47 275.40 L 512.19 276.74 L 511.92 277.98 L 511.46 279.79 L 510.91 281.57 L 510.26 283.32 L 509.53 285.03 L 508.70 286.70 L 507.78 288.33 L 506.79 289.90 L 505.71 291.42 L 504.55 292.88 L 503.31 294.28 L 502.00 295.61 L 500.63 296.87 L 499.19 298.05 L 497.68 299.16 L 496.13 300.18 L 494.52 301.12 L 492.86 301.97 L 491.25 302.75 L 489.56 303.51 L 487.84 304.18 L 486.90 304.49 L 486.85 304.66 L 486.25 306.39 L 485.57 308.09 L 484.79 309.76 L 484.71 309.91 L 484.00 311.50 L 483.17 313.14 L 482.25 314.72 L 481.26 316.26 L 480.18 317.74 L 479.03 319.16 L 477.81 320.53 L 476.51 321.82 L 475.16 323.05 L 473.74 324.21 L 472.26 325.29 L 470.73 326.29 L 469.14 327.21 L 467.51 328.05 L 465.84 328.80 L 464.14 329.46 L 462.40 330.04 L 460.63 330.52 L 458.84 330.91 L 457.04 331.21 L 455.22 331.41 L 453.39 331.52 L 451.56 331.53 L 449.73 331.45 L 447.91 331.27 L 446.10 331.00 L 444.30 330.63 L 442.74 330.27 L 441.22 330.91 L 439.46 331.55 L 433.51 333.54 L 431.82 334.05 L 430.10 334.48 L 428.37 334.83 L 426.62 335.08 L 424.86 335.25 L 423.09 335.33 L 421.33 335.33 L 419.56 335.23 L 409.70 334.44 L 409.47 334.46 L 409.41 334.54 L 408.05 335.90 L 406.63 337.20 L 405.14 338.41 L 403.58 339.54 L 399.44 342.37 L 397.86 343.40 L 397.33 343.70 L 395.93 344.88 L 394.42 346.01 L 392.95 347.06 L 391.39 348.11 L 389.79 349.07 L 388.13 349.94 L 386.43 350.73 L 384.70 351.42 L 382.92 352.02 L 381.12 352.53 L 379.29 352.93 L 377.45 353.25 L 375.59 353.46 L 373.72 353.57 L 371.85 353.58 L 369.98 353.50 L 368.12 353.31 L 366.27 353.03 L 364.44 352.65 L 362.63 352.17 L 361.31 351.75 L 359.75 351.44 L 358.02 351.00 L 357.12 350.73 L 351.62 350.12 L 349.72 349.85 L 339.66 348.17 L 337.91 347.83 L 336.17 347.40 L 334.46 346.88 L 331.09 345.77 L 328.06 345.07 L 325.35 344.59 L 322.44 344.45 L 320.16 344.27 L 317.89 343.94 L 315.25 343.47 L 313.86 343.19 L 304.58 341.13 L 299.88 341.02 L 298.39 340.96 L 296.91 340.83 L 286.06 339.66 L 284.59 339.47 L 283.13 339.22 L 261.36 335.00 L 258.95 334.44 L 255.54 333.52 L 252.61 333.27 L 250.63 333.03 L 248.66 332.69 L 241.51 331.23 L 239.77 330.83 L 238.05 330.34 L 236.35 329.76 L 234.69 329.10 L 229.11 326.71 L 227.49 325.97 L 225.90 325.14 L 224.36 324.24 L 222.87 323.25 L 221.43 322.20 L 220.04 321.07 L 218.71 319.87 L 217.45 318.60 L 216.25 317.28 L 212.36 312.75 L 211.33 311.49 L 210.36 310.18 L 208.07 306.95 L 207.44 307.01 L 205.70 307.10 L 201.26 307.21 L 199.60 307.21 L 197.94 307.14 L 196.29 306.98 L 194.64 306.75 L 193.01 306.44 L 192.91 306.42 L 192.10 306.59 L 191.52 306.70 L 191.25 307.10 L 190.14 308.60 L 188.94 310.04 L 187.67 311.42 L 186.33 312.73 L 184.62 314.31 L 183.20 315.55 L 181.71 316.72 L 180.16 317.81 L 178.56 318.81 L 176.91 319.72 L 175.21 320.54 L 173.46 321.27 L 171.68 321.91 L 169.87 322.45 L 168.04 322.89 L 166.18 323.24 L 162.38 323.83 L 160.33 324.09 L 158.28 324.23 L 156.22 324.25 L 154.16 324.15 L 148.36 323.69 L 146.60 323.51 L 144.85 323.24 L 143.12 322.88 L 141.40 322.43 L 139.71 321.90 L 135.53 320.47 L 133.80 319.82 L 132.11 319.09 L 130.45 318.27 L 129.00 317.45 L 127.55 317.38 L 125.68 317.19 L 123.82 316.91 L 121.98 316.52 L 120.48 316.12 L 119.06 316.55 L 117.26 316.98 L 115.44 317.32 L 113.61 317.56 L 111.76 317.71 L 109.91 317.76 L 108.06 317.71 L 106.22 317.56 L 104.39 317.32 L 102.57 316.98 L 100.77 316.55 L 99.00 316.02 L 90.78 313.34 L 89.12 312.76 L 87.49 312.09 L 85.90 311.34 L 84.34 310.51 L 77.03 306.36 L 75.45 305.42 L 73.93 304.39 L 72.47 303.29 L 71.06 302.11 L 69.72 300.86 L 69.71 300.85 L 68.94 300.71 L 67.13 300.27 L 65.34 299.75 L 63.58 299.12 L 61.86 298.41 L 60.18 297.60 L 58.55 296.71 L 56.96 295.74 L 55.43 294.68 L 53.96 293.54 L 52.54 292.32 L 51.20 291.03 L 49.92 289.67 L 48.72 288.25 L 47.60 286.76 L 46.55 285.22 L 45.59 283.63 L 44.72 281.98 L 43.93 280.29 L 43.23 278.57 L 42.63 276.80 L 42.12 275.01 L 41.70 273.20 L 41.38 271.36 L 41.16 269.51 L 41.12 268.86 L 41.11 268.82 L 40.48 267.06 L 39.95 265.27 L 39.63 263.98 L 39.39 263.29 L 39.37 263.21 L 38.82 261.88 L 38.20 260.09 L 37.67 258.27 L 37.24 256.42 L 36.91 254.56 L 36.69 252.68 L 36.56 250.79 L 36.54 248.90 L 36.62 247.00 L 36.80 245.12 L 37.08 243.25 L 37.22 242.57 Z' style='fill-rule: evenodd; stroke-width: 1.12; stroke: #4682B4; stroke-dasharray: 6.00,6.00;' />
<path d='M 72.39 250.68 L 71.74 249.40 L 75.68 239.85 L 76.15 233.92 L 71.71 230.44 L 69.86 229.41 L 71.24 228.63 L 77.19 229.28 L 80.76 227.31 L 82.55 225.36 L 87.94 227.20 L 95.95 230.90 L 99.79 233.40 L 101.46 235.33 L 102.44 236.95 L 102.22 239.73 L 104.07 240.81 L 107.73 241.23 L 110.22 242.09 L 109.70 245.74 L 109.81 248.77 L 113.12 248.35 L 117.11 246.03 L 120.01 241.88 L 121.66 237.86 L 122.30 228.08 L 122.75 227.25 L 125.33 228.02 L 135.49 227.60 L 140.47 229.42 L 148.12 229.72 L 148.12 231.26 L 149.71 233.65 L 153.42 237.10 L 155.30 239.35 L 158.89 239.75 L 164.23 238.50 L 167.31 237.22 L 168.60 238.13 L 173.51 237.24 L 177.65 234.45 L 178.53 232.33 L 182.84 230.84 L 188.52 227.40 L 196.53 224.74 L 223.39 221.90 L 224.21 219.76 L 223.28 214.85 L 223.92 214.12 L 227.47 215.35 L 233.08 216.49 L 237.47 218.23 L 240.46 220.50 L 242.99 220.59 L 246.74 219.00 L 251.92 217.98 L 257.14 220.33 L 258.87 222.88 L 258.14 224.19 L 258.47 226.26 L 260.21 227.99 L 264.56 230.81 L 270.01 233.23 L 272.67 233.05 L 273.40 230.69 L 273.71 225.08 L 273.37 219.09 L 271.79 215.66 L 268.91 214.82 L 265.56 214.55 L 263.71 213.84 L 264.11 211.96 L 266.20 207.08 L 265.41 200.57 L 258.58 193.16 L 252.58 186.01 L 252.32 183.57 L 254.93 179.35 L 259.33 175.98 L 269.29 170.38 L 272.50 169.22 L 276.69 168.28 L 282.59 165.98 L 285.28 163.62 L 286.96 161.06 L 288.22 147.72 L 288.83 147.15 L 289.59 146.37 L 300.96 150.96 L 301.84 150.20 L 303.56 149.45 L 306.63 145.93 L 307.07 143.25 L 306.35 138.19 L 306.06 133.41 L 306.54 131.90 L 308.24 132.45 L 313.19 134.94 L 317.23 137.72 L 321.58 144.75 L 329.88 146.62 L 340.07 146.80 L 343.30 143.67 L 346.50 142.95 L 350.36 143.90 L 358.37 145.01 L 358.48 139.32 L 362.21 133.43 L 363.98 131.34 L 369.76 131.55 L 370.57 127.15 L 370.31 114.96 L 371.33 113.62 L 375.55 113.87 L 380.01 116.10 L 381.51 117.90 L 383.65 117.75 L 386.51 116.53 L 389.71 115.73 L 395.14 117.03 L 407.13 122.57 L 413.20 124.59 L 416.81 124.21 L 420.25 124.28 L 434.75 132.85 L 444.19 134.05 L 452.65 134.08 L 454.97 131.50 L 458.24 129.31 L 462.04 129.61 L 465.49 130.73 L 472.44 134.45 L 475.54 135.41 L 479.56 136.01 L 482.57 136.84 L 486.13 143.31 L 487.81 145.04 L 487.69 145.84 L 487.83 148.78 L 486.18 152.49 L 484.53 157.36 L 485.34 161.62 L 493.76 176.42 L 500.62 185.43 L 502.19 188.87 L 506.14 191.50 L 503.28 194.83 L 503.38 199.76 L 501.54 201.96 L 501.40 204.77 L 502.70 207.34 L 503.17 210.54 L 505.05 214.97 L 499.81 215.93 L 493.38 215.78 L 491.12 216.03 L 489.15 217.24 L 486.84 216.64 L 480.44 212.49 L 477.03 211.58 L 474.76 211.83 L 473.29 213.64 L 470.66 215.95 L 468.10 217.57 L 468.93 219.00 L 481.50 222.74 L 484.48 228.48 L 482.85 233.16 L 482.40 235.45 L 479.84 237.26 L 476.61 238.84 L 472.49 239.24 L 472.36 241.77 L 475.08 249.21 L 473.98 250.83 L 472.98 253.14 L 475.11 259.27 L 477.77 259.70 L 478.54 261.10 L 478.44 263.58 L 478.36 266.22 L 477.84 269.02 L 477.57 270.26 L 475.96 271.04 L 470.52 270.63 L 466.24 273.02 L 458.13 281.62 L 455.06 283.08 L 452.01 286.52 L 453.27 294.09 L 452.88 294.78 L 452.23 296.33 L 440.70 293.66 L 440.32 293.71 L 432.98 294.68 L 428.33 298.15 L 422.38 300.14 L 409.22 299.08 L 396.71 300.43 L 393.84 301.44 L 390.62 302.02 L 387.79 304.04 L 386.39 306.88 L 383.69 310.49 L 379.55 313.32 L 374.94 315.50 L 374.00 317.33 L 372.53 318.39 L 369.64 317.01 L 367.44 317.08 L 364.62 316.14 L 355.53 315.13 L 345.47 313.45 L 340.59 311.84 L 335.11 310.56 L 329.26 309.53 L 324.11 309.29 L 321.47 308.81 L 308.83 306.01 L 300.69 305.83 L 289.83 304.66 L 268.07 300.43 L 261.68 298.72 L 255.70 298.20 L 248.55 296.74 L 242.97 294.35 L 239.08 289.82 L 234.80 283.79 L 227.32 275.92 L 225.54 272.01 L 227.21 268.57 L 229.02 265.98 L 228.66 264.87 L 226.99 264.31 L 215.68 267.66 L 204.81 271.90 L 200.37 272.01 L 195.96 271.07 L 190.24 271.01 L 184.85 272.14 L 173.89 272.72 L 167.74 275.85 L 164.21 281.95 L 162.44 286.87 L 160.72 288.45 L 156.92 289.05 L 151.12 288.59 L 146.94 287.16 L 142.43 282.96 L 135.98 282.38 L 130.10 282.27 L 128.48 281.49 L 128.33 278.76 L 125.55 273.62 L 121.58 272.01 L 112.54 281.69 L 109.91 282.55 L 101.69 279.87 L 94.38 275.73 L 93.35 272.70 L 92.01 270.22 L 85.96 267.87 L 78.53 266.26 L 76.22 266.26 L 77.00 264.80 L 77.65 262.33 L 76.94 260.36 L 75.07 258.32 L 73.95 256.14 L 73.50 254.02 L 72.83 252.29 L 72.39 250.68 Z' style='fill-rule: evenodd; stroke-width: 1.50;' />
<rect class='legend-bg' x='429.62' y='22.46' width='121.04' height='43.20' style='stroke-width: 0.75; fill: #F5F6F8;' />
<line x1='440.42' y1='36.86' x2='462.02' y2='36.86' style='stroke-width: 1.50;' />
<line x1='440.42' y1='51.26' x2='462.02' y2='51.26' style='stroke-width: 1.12; stroke: #4682B4; stroke-dasharray: 6.00,6.00;' />
<text x='472.82' y='41.16' style='font-size: 12.00px; font-family: "Roboto", -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif;' textLength='72.02px' lengthAdjust='spacingAndGlyphs'>Austria (core)</text>
<text x='472.82' y='55.56' style='font-size: 12.00px; font-family: "Roboto", -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif;' textLength='72.44px' lengthAdjust='spacingAndGlyphs'>Area of Effect</text>
</g>
</g>
</svg></div><p class="caption">
Austria (dark) with its area of effect (blue dashed). The halo has equal
area to the core.
</p>
</div>
</div>
<div class="section level2">
<h2 id="basic-usage-with-custom-polygons">Basic Usage with Custom Polygons<a class="anchor" aria-label="anchor" href="#basic-usage-with-custom-polygons"></a>
</h2>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">support</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>  geometry <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html" class="external-link">st_sfc</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_polygon</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">100</span>, <span class="fl">100</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">100</span>, <span class="fl">100</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  crs <span class="op">=</span> <span class="fl">32631</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Create observation points:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pts</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">5</span>,</span>
<span>    value <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">20</span>, <span class="fl">15</span>, <span class="fl">25</span>, <span class="fl">30</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  geometry <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html" class="external-link">st_sfc</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">50</span>, <span class="fl">50</span><span class="op">)</span><span class="op">)</span>,   <span class="co"># center</span></span>
<span>    <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">10</span><span class="op">)</span><span class="op">)</span>,   <span class="co"># near corner</span></span>
<span>    <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">95</span>, <span class="fl">50</span><span class="op">)</span><span class="op">)</span>,   <span class="co"># near edge</span></span>
<span>    <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">120</span>, <span class="fl">50</span><span class="op">)</span><span class="op">)</span>,  <span class="co"># outside, in halo</span></span>
<span>    <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">250</span>, <span class="fl">250</span><span class="op">)</span><span class="op">)</span>  <span class="co"># far outside</span></span>
<span>  <span class="op">)</span>,</span>
<span>  crs <span class="op">=</span> <span class="fl">32631</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Apply the area of effect:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe.html">aoe</a></span><span class="op">(</span><span class="va">pts</span>, <span class="va">support</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">result</span><span class="op">)</span></span>
<span><span class="co">#&gt; Area of Effect Result</span></span>
<span><span class="co">#&gt; ─────────────────────</span></span>
<span><span class="co">#&gt; Points:   4 (3 core, 1 halo)</span></span>
<span><span class="co">#&gt; Supports: 1</span></span>
<span><span class="co">#&gt; Scale:    0.414 (multiplier 1.41, theoretical halo:core 1.00)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Simple feature collection with 4 features and 5 fields</span></span>
<span><span class="co">#&gt; Geometry type: POINT</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: 10 ymin: 10 xmax: 120 ymax: 50</span></span>
<span><span class="co">#&gt; Projected CRS: WGS 84 / UTM zone 31N</span></span>
<span><span class="co">#&gt;   point_id support_id aoe_class id value       geometry</span></span>
<span><span class="co">#&gt; 1        1          1      core  1    10  POINT (50 50)</span></span>
<span><span class="co">#&gt; 2        2          1      core  2    20  POINT (10 10)</span></span>
<span><span class="co">#&gt; 3        3          1      core  3    15  POINT (95 50)</span></span>
<span><span class="co">#&gt; 4        4          1      halo  4    25 POINT (120 50)</span></span></code></pre></div>
<p>The result contains only points inside the AoE, with their
classification:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">result</span><span class="op">$</span><span class="va">aoe_class</span></span>
<span><span class="co">#&gt; [1] "core" "core" "core" "halo"</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="multiple-supports">Multiple Supports<a class="anchor" aria-label="anchor" href="#multiple-supports"></a>
</h2>
<p>Process multiple regions at once:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Two adjacent regions</span></span>
<span><span class="va">supports</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>region <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  geometry <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html" class="external-link">st_sfc</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_polygon</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">50</span>, <span class="fl">50</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">100</span>, <span class="fl">100</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_polygon</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">50</span>, <span class="fl">100</span>, <span class="fl">100</span>, <span class="fl">50</span>, <span class="fl">50</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">100</span>, <span class="fl">100</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  crs <span class="op">=</span> <span class="fl">32631</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Points that may fall in overlapping AoEs</span></span>
<span><span class="va">pts_multi</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span>,</span>
<span>  geometry <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html" class="external-link">st_sfc</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">25</span>, <span class="fl">50</span><span class="op">)</span><span class="op">)</span>,   <span class="co"># inside A</span></span>
<span>    <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">50</span>, <span class="fl">50</span><span class="op">)</span><span class="op">)</span>,   <span class="co"># on boundary</span></span>
<span>    <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">75</span>, <span class="fl">50</span><span class="op">)</span><span class="op">)</span>    <span class="co"># inside B</span></span>
<span>  <span class="op">)</span>,</span>
<span>  crs <span class="op">=</span> <span class="fl">32631</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">result_multi</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe.html">aoe</a></span><span class="op">(</span><span class="va">pts_multi</span>, <span class="va">supports</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">result_multi</span><span class="op">)</span></span>
<span><span class="co">#&gt; Area of Effect Result</span></span>
<span><span class="co">#&gt; ─────────────────────</span></span>
<span><span class="co">#&gt; Points:   4 (4 core, 0 halo)</span></span>
<span><span class="co">#&gt; Supports: 2</span></span>
<span><span class="co">#&gt; Scale:    0.414 (multiplier 1.41, theoretical halo:core 1.00)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Simple feature collection with 4 features and 4 fields</span></span>
<span><span class="co">#&gt; Geometry type: POINT</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: 25 ymin: 50 xmax: 75 ymax: 50</span></span>
<span><span class="co">#&gt; Projected CRS: WGS 84 / UTM zone 31N</span></span>
<span><span class="co">#&gt;   point_id support_id aoe_class id      geometry</span></span>
<span><span class="co">#&gt; 1        1          1      core  1 POINT (25 50)</span></span>
<span><span class="co">#&gt; 2        2          1      core  2 POINT (50 50)</span></span>
<span><span class="co">#&gt; 3        2          2      core  2 POINT (50 50)</span></span>
<span><span class="co">#&gt; 4        3          2      core  3 POINT (75 50)</span></span></code></pre></div>
<p>Points can appear multiple times (once per support whose AoE contains
them).</p>
</div>
<div class="section level2">
<h2 id="using-a-mask-coastlines">Using a Mask (Coastlines)<a class="anchor" aria-label="anchor" href="#using-a-mask-coastlines"></a>
</h2>
<p>For coastal regions, sea is a hard boundary. Provide a mask to
constrain the AoE:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create a coastal support</span></span>
<span><span class="va">support_coast</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>  geometry <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html" class="external-link">st_sfc</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_polygon</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">40</span>, <span class="fl">80</span>, <span class="fl">80</span>, <span class="fl">40</span>, <span class="fl">40</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">20</span>, <span class="fl">20</span>, <span class="fl">60</span>, <span class="fl">60</span>, <span class="fl">20</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  crs <span class="op">=</span> <span class="fl">32631</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create land mask (irregular coastline)</span></span>
<span><span class="va">land_mask</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>  geometry <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html" class="external-link">st_sfc</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_polygon</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">100</span>, <span class="fl">100</span>, <span class="fl">70</span>, <span class="fl">50</span>, <span class="fl">30</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">50</span>, <span class="fl">60</span>, <span class="fl">55</span>, <span class="fl">70</span>, <span class="fl">60</span>, <span class="fl">0</span><span class="op">)</span></span>
<span>  <span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  crs <span class="op">=</span> <span class="fl">32631</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create sea area (inverse of land for visualization)</span></span>
<span><span class="va">sea_area</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span></span>
<span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span> geometry <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html" class="external-link">st_sfc</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_polygon</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span></span>
<span>   <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">20</span>, <span class="fl">120</span>, <span class="fl">120</span>, <span class="op">-</span><span class="fl">20</span>, <span class="op">-</span><span class="fl">20</span><span class="op">)</span>,</span>
<span>   <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">20</span>, <span class="op">-</span><span class="fl">20</span>, <span class="fl">100</span>, <span class="fl">100</span>, <span class="op">-</span><span class="fl">20</span><span class="op">)</span></span>
<span> <span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span> crs <span class="op">=</span> <span class="fl">32631</span></span>
<span><span class="op">)</span></span>
<span><span class="va">sea_area</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_binary_ops.html" class="external-link">st_difference</a></span><span class="op">(</span><span class="va">sea_area</span>, <span class="va">land_mask</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: attribute variables are assumed to be spatially constant throughout</span></span>
<span><span class="co">#&gt; all geometries</span></span>
<span></span>
<span><span class="co"># Create some points</span></span>
<span><span class="va">pts_coast</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">4</span>, class <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"core"</span>, <span class="st">"core"</span>, <span class="st">"halo"</span>, <span class="st">"pruned"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  geometry <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html" class="external-link">st_sfc</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">60</span>, <span class="fl">40</span><span class="op">)</span><span class="op">)</span>,  <span class="co"># core</span></span>
<span>    <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">50</span>, <span class="fl">30</span><span class="op">)</span><span class="op">)</span>,  <span class="co"># core</span></span>
<span>    <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">30</span>, <span class="fl">40</span><span class="op">)</span><span class="op">)</span>,  <span class="co"># halo (on land)</span></span>
<span>    <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">90</span>, <span class="fl">70</span><span class="op">)</span><span class="op">)</span>   <span class="co"># would be halo but in sea</span></span>
<span>  <span class="op">)</span>,</span>
<span>  crs <span class="op">=</span> <span class="fl">32631</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Apply with mask</span></span>
<span><span class="va">result_coast</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe.html">aoe</a></span><span class="op">(</span><span class="va">pts_coast</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, <span class="op">]</span>, <span class="va">support_coast</span>, mask <span class="op">=</span> <span class="va">land_mask</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get geometries for visualization</span></span>
<span><span class="va">aoe_masked</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe_geometry.html">aoe_geometry</a></span><span class="op">(</span><span class="va">result_coast</span>, <span class="st">"aoe"</span><span class="op">)</span></span>
<span><span class="va">support_geom</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe_geometry.html">aoe_geometry</a></span><span class="op">(</span><span class="va">result_coast</span>, <span class="st">"original"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Prepare point data for plotting</span></span>
<span><span class="va">result_coast</span><span class="op">$</span><span class="va">class</span> <span class="op">&lt;-</span> <span class="va">result_coast</span><span class="op">$</span><span class="va">aoe_class</span></span>
<span><span class="va">pruned_pt</span> <span class="op">&lt;-</span> <span class="va">pts_coast</span><span class="op">[</span><span class="fl">4</span>, <span class="op">]</span></span>
<span></span>
<span><span class="co"># Plot with ggplot2</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">sea_area</span>, fill <span class="op">=</span> <span class="va">aoe_colors</span><span class="op">$</span><span class="va">sea</span>, color <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">land_mask</span>, fill <span class="op">=</span> <span class="va">aoe_colors</span><span class="op">$</span><span class="va">land</span>, color <span class="op">=</span> <span class="va">aoe_colors</span><span class="op">$</span><span class="va">mask</span>, linewidth <span class="op">=</span> <span class="fl">0.8</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">aoe_masked</span>, fill <span class="op">=</span> <span class="va">aoe_colors</span><span class="op">$</span><span class="va">aoe_fill</span>, color <span class="op">=</span> <span class="va">aoe_colors</span><span class="op">$</span><span class="va">aoe_border</span>,</span>
<span>          linetype <span class="op">=</span> <span class="st">"dashed"</span>, linewidth <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">support_geom</span>, fill <span class="op">=</span> <span class="cn">NA</span>, color <span class="op">=</span> <span class="va">aoe_colors</span><span class="op">$</span><span class="va">support</span>, linewidth <span class="op">=</span> <span class="fl">1.2</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">result_coast</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="va">class</span><span class="op">)</span>, size <span class="op">=</span> <span class="fl">4</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">pruned_pt</span>, color <span class="op">=</span> <span class="va">aoe_colors</span><span class="op">$</span><span class="va">point_pruned</span>, shape <span class="op">=</span> <span class="fl">4</span>, size <span class="op">=</span> <span class="fl">4</span>, stroke <span class="op">=</span> <span class="fl">1.5</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_color_manual</a></span><span class="op">(</span></span>
<span>    values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"core"</span> <span class="op">=</span> <span class="va">aoe_colors</span><span class="op">$</span><span class="va">point_core</span>, <span class="st">"halo"</span> <span class="op">=</span> <span class="va">aoe_colors</span><span class="op">$</span><span class="va">point_halo</span><span class="op">)</span>,</span>
<span>    labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Core"</span>, <span class="st">"Halo"</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/annotate.html" class="external-link">annotate</a></span><span class="op">(</span><span class="st">"text"</span>, x <span class="op">=</span> <span class="fl">90</span>, y <span class="op">=</span> <span class="fl">80</span>, label <span class="op">=</span> <span class="st">"SEA"</span>, color <span class="op">=</span> <span class="st">"black"</span>,</span>
<span>           fontface <span class="op">=</span> <span class="st">"bold"</span>, size <span class="op">=</span> <span class="fl">5</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">coord_sf</a></span><span class="op">(</span>xlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">10</span>, <span class="fl">110</span><span class="op">)</span>, ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">10</span>, <span class="fl">90</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"Class"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_aoe</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<div class="svg-container"><button type="button" class="btn btn-primary btn-copy-svg" title="Copy SVG to clipboard" aria-label="Copy SVG to clipboard" data-bs-toggle="tooltip" data-bs-placement="left"><i class="fa fa-copy"></i></button>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='576.00pt' height='432.00pt' viewBox='0 0 576.00 432.00' class="r-plt inline-svg" style="max-width:100%;width:100%;height:auto;">
<g class='svglite'>
<defs>
  <style type='text/css'><![CDATA[
    /* theme-aware-processed */
    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite circle {
      fill: none;
      stroke: #3E3F3A;
      stroke-linecap: round;
      stroke-linejoin: round;
      stroke-miterlimit: 10.00;
    }
    .svglite > g > rect {
      fill: none;
      stroke: #3E3F3A;
      stroke-linecap: round;
      stroke-linejoin: round;
      stroke-miterlimit: 10.00;
    }
    .svglite text {
      white-space: pre;
      fill: #3E3F3A;
    }
    .svglite g.glyphgroup path {
      fill: inherit;
      stroke: none;
    }
  ]]></style>
</defs>
<rect width='100%' height='100%' style='stroke: none; fill: #F5F6F8;'/>
<defs>
  <clipPath id='cpMC4wMHw1NzYuMDB8MC4wMHw0MzIuMDA='>
    <rect x='0.00' y='0.00' width='576.00' height='432.00' />
  </clipPath>
</defs>
<g clip-path='url(#cpMC4wMHw1NzYuMDB8MC4wMHw0MzIuMDA=)'>
</g>
<defs>
  <clipPath id='cpNC40MXw1NzEuNTl8MC4wMHw0MzIuMDA='>
    <rect x='4.41' y='0.00' width='567.19' height='432.00' />
  </clipPath>
</defs>
<g clip-path='url(#cpNC40MXw1NzEuNTl8MC4wMHw0MzIuMDA=)'>
<rect x='4.41' y='0.00' width='567.19' height='432.00' style='stroke-width: 0.00; stroke: none;' /> fill: #F5F6F8;' />
</g>
<g clip-path='url(#cpMC4wMHw1NzYuMDB8MC4wMHw0MzIuMDA=)'>
</g>
<defs>
  <clipPath id='cpMTQuMzd8NTA4Ljg2fDkuOTZ8NDIyLjA0'>
    <rect x='14.37' y='9.96' width='494.49' height='412.07' />
  </clipPath>
</defs>
<g clip-path='url(#cpMTQuMzd8NTA4Ljg2fDkuOTZ8NDIyLjA0)'>
<rect x='14.37' y='9.96' width='494.49' height='412.07' style='stroke-width: 0.00; stroke: none;' /> fill: #F5F6F8;' />
<path d='M -0.61 -8.77 L 523.84 -8.77 L 523.84 440.77 L -0.61 440.77 L -0.61 -8.77 ZM 448.92 365.85 L 448.92 178.54 L 336.54 141.08 L 261.61 159.81 L 186.69 103.62 L 74.31 141.08 L 74.31 365.85 L 448.92 365.85 Z' style='fill-rule: evenodd; fill: #BEE3F8; stroke-width: 0.47; stroke: none; stroke-linecap: butt;' />
<path d='M 74.31 365.85 L 448.92 365.85 L 448.92 178.54 L 336.54 141.08 L 261.61 159.81 L 186.69 103.62 L 74.31 141.08 L 74.31 365.85 Z' style='fill-rule: evenodd; fill: #E2E8F0; stroke-width: 1.71; stroke: #A0AEC0; stroke-linecap: butt;' />
<path d='M 222.47 322.95 L 220.80 322.82 L 219.14 322.60 L 217.49 322.29 L 215.85 321.90 L 214.24 321.43 L 212.66 320.86 L 211.11 320.22 L 209.59 319.50 L 208.12 318.70 L 206.69 317.82 L 205.30 316.87 L 203.97 315.85 L 202.69 314.76 L 201.47 313.60 L 200.32 312.38 L 199.23 311.11 L 198.21 309.77 L 197.26 308.39 L 196.38 306.96 L 195.58 305.48 L 194.85 303.97 L 194.21 302.42 L 193.65 300.83 L 193.17 299.22 L 192.78 297.59 L 192.48 295.94 L 192.26 294.28 L 192.12 292.60 L 192.08 290.92 L 192.08 141.08 L 192.12 139.40 L 192.26 137.72 L 192.48 136.06 L 192.78 134.41 L 193.17 132.78 L 193.65 131.17 L 194.21 129.58 L 194.85 128.03 L 195.58 126.52 L 196.38 125.04 L 197.26 123.61 L 198.21 122.23 L 199.23 120.89 L 200.32 119.62 L 201.47 118.40 L 202.69 117.24 L 203.71 116.38 L 261.61 159.81 L 336.54 141.08 L 406.07 164.26 L 406.07 290.92 L 406.03 292.60 L 405.90 294.28 L 405.68 295.94 L 405.37 297.59 L 404.98 299.22 L 404.50 300.83 L 403.94 302.42 L 403.30 303.97 L 402.58 305.48 L 401.77 306.96 L 400.90 308.39 L 399.95 309.77 L 398.92 311.11 L 397.83 312.38 L 396.68 313.60 L 395.46 314.76 L 394.18 315.85 L 392.85 316.87 L 391.47 317.82 L 390.03 318.70 L 388.56 319.50 L 387.04 320.22 L 385.49 320.86 L 383.91 321.43 L 382.30 321.90 L 380.67 322.29 L 379.02 322.60 L 377.35 322.82 L 375.68 322.95 L 374.00 323.00 L 224.15 323.00 L 222.47 322.95 Z' style='fill-rule: evenodd; fill: #5A7BA6; fill-opacity: 0.063; stroke-width: 2.13; stroke: #5A7BA6; stroke-dasharray: 11.38,11.38; stroke-linecap: butt;' />
<path d='M 224.15 290.92 L 224.15 141.08 L 374.00 141.08 L 374.00 290.92 L 224.15 290.92 Z' style='fill-rule: evenodd; stroke-width: 2.56; stroke: #2D3748; stroke-linecap: butt;' />
<circle cx='299.08' cy='216.00' r='4.62' style='stroke-width: 0.71; stroke: #2B6CB0; stroke-linecap: butt; fill: #2B6CB0;' />
<circle cx='261.61' cy='253.46' r='4.62' style='stroke-width: 0.71; stroke: #2B6CB0; stroke-linecap: butt; fill: #2B6CB0;' />
<line x1='406.13' y1='108.95' x2='416.79' y2='98.29' style='stroke-width: 2.13; stroke: #A0AEC0; stroke-linecap: butt;' />
<line x1='406.13' y1='98.29' x2='416.79' y2='108.95' style='stroke-width: 2.13; stroke: #A0AEC0; stroke-linecap: butt;' />
<text x='411.46' y='71.25' text-anchor='middle' style='font-size: 14.23px; font-weight: bold; font-family: "Roboto", -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif;' textLength='29.23px' lengthAdjust='spacingAndGlyphs'>SEA</text>
</g>
<g clip-path='url(#cpMC4wMHw1NzYuMDB8MC4wMHw0MzIuMDA=)'>
<rect x='514.53' y='198.81' width='47.10' height='34.37' style='stroke-width: 0.00; stroke: none;' /> fill: #F5F6F8;' />
<text x='514.53' y='208.67' style='font-size: 12.00px; font-weight: bold;fill: #2D3748; font-family: "Roboto", -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif;' textLength='32.02px' lengthAdjust='spacingAndGlyphs'>Class</text>
<rect x='514.53' y='215.91' width='17.28' height='17.28' style='stroke-width: 0.00; stroke: none;' /> fill: #F5F6F8;' />
<circle cx='523.17' cy='224.55' r='4.62' style='stroke-width: 0.71; stroke: #2B6CB0; fill: #2B6CB0;' />
<text x='537.79' y='228.49' style='font-size: 11.00px;fill: #2D3748; font-family: "Roboto", -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif;' textLength='23.84px' lengthAdjust='spacingAndGlyphs'>Core</text>
</g>
</g>
</svg></div><p class="caption">
AoE with land mask. The AoE is clipped to the land boundary.
</p>
</div>
<div class="section level3">
<h3 id="real-world-example-portugal">Real-World Example: Portugal<a class="anchor" aria-label="anchor" href="#real-world-example-portugal"></a>
</h3>
<p>The package includes bundled country boundaries and a global land
mask. Use <code>mask = "land"</code> to clip AoE to coastlines:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create a point inside Portugal (approximate center of mainland)</span></span>
<span><span class="va">dummy</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>  geometry <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html" class="external-link">st_sfc</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">8</span>, <span class="fl">39.5</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  crs <span class="op">=</span> <span class="fl">4326</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Without mask</span></span>
<span><span class="va">result_no_mask</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe.html">aoe</a></span><span class="op">(</span><span class="va">dummy</span>, <span class="st">"PT"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Using largest polygon (96.8% of total area); 8 smaller polygon(s) dropped. Set largest_polygon = FALSE to include all.</span></span>
<span><span class="va">aoe_no_mask</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe_geometry.html">aoe_geometry</a></span><span class="op">(</span><span class="va">result_no_mask</span>, <span class="st">"aoe"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># With mask + area=1 for equal land area</span></span>
<span><span class="va">result_masked</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe.html">aoe</a></span><span class="op">(</span><span class="va">dummy</span>, <span class="st">"PT"</span>, mask <span class="op">=</span> <span class="st">"land"</span>, area <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">#&gt; Using largest polygon (96.8% of total area); 8 smaller polygon(s) dropped. Set largest_polygon = FALSE to include all.</span></span>
<span><span class="va">aoe_masked</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe_geometry.html">aoe_geometry</a></span><span class="op">(</span><span class="va">result_masked</span>, <span class="st">"aoe"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get support geometry</span></span>
<span><span class="va">support_geom</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe_geometry.html">aoe_geometry</a></span><span class="op">(</span><span class="va">result_masked</span>, <span class="st">"original"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Transform to equal area for plotting</span></span>
<span><span class="va">crs_ea</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_crs.html" class="external-link">st_crs</a></span><span class="op">(</span><span class="st">"+proj=laea +lat_0=39.5 +lon_0=-8 +datum=WGS84"</span><span class="op">)</span></span>
<span><span class="va">aoe_no_mask_ea</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_transform.html" class="external-link">st_transform</a></span><span class="op">(</span><span class="va">aoe_no_mask</span>, <span class="va">crs_ea</span><span class="op">)</span></span>
<span><span class="va">aoe_masked_ea</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_transform.html" class="external-link">st_transform</a></span><span class="op">(</span><span class="va">aoe_masked</span>, <span class="va">crs_ea</span><span class="op">)</span></span>
<span><span class="va">support_ea</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_transform.html" class="external-link">st_transform</a></span><span class="op">(</span><span class="va">support_geom</span>, <span class="va">crs_ea</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Prepare legend data</span></span>
<span><span class="va">legend_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Portugal"</span>, <span class="st">"AoE (unmasked)"</span>, <span class="st">"AoE (land only)"</span><span class="op">)</span>,</span>
<span>                levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Portugal"</span>, <span class="st">"AoE (unmasked)"</span>, <span class="st">"AoE (land only)"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Crop to focus on relevant area</span></span>
<span><span class="va">bbox</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_bbox.html" class="external-link">st_bbox</a></span><span class="op">(</span><span class="va">aoe_no_mask_ea</span><span class="op">)</span></span>
<span><span class="va">y_range</span> <span class="op">&lt;-</span> <span class="va">bbox</span><span class="op">[</span><span class="fl">4</span><span class="op">]</span> <span class="op">-</span> <span class="va">bbox</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># Plot with ggplot2</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">aoe_no_mask_ea</span>, fill <span class="op">=</span> <span class="cn">NA</span>, color <span class="op">=</span> <span class="va">aoe_colors</span><span class="op">$</span><span class="va">mask</span>,</span>
<span>          linetype <span class="op">=</span> <span class="st">"dashed"</span>, linewidth <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">aoe_masked_ea</span>, fill <span class="op">=</span> <span class="va">aoe_colors</span><span class="op">$</span><span class="va">aoe_fill</span>, color <span class="op">=</span> <span class="va">aoe_colors</span><span class="op">$</span><span class="va">aoe_border</span>,</span>
<span>          linetype <span class="op">=</span> <span class="st">"dashed"</span>, linewidth <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">support_ea</span>, fill <span class="op">=</span> <span class="cn">NA</span>, color <span class="op">=</span> <span class="va">aoe_colors</span><span class="op">$</span><span class="va">support</span>, linewidth <span class="op">=</span> <span class="fl">1.2</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">coord_sf</a></span><span class="op">(</span>ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">bbox</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span> <span class="op">+</span> <span class="va">y_range</span> <span class="op">*</span> <span class="fl">0.2</span>, <span class="va">bbox</span><span class="op">[</span><span class="fl">4</span><span class="op">]</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_aoe</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<div class="svg-container"><button type="button" class="btn btn-primary btn-copy-svg" title="Copy SVG to clipboard" aria-label="Copy SVG to clipboard" data-bs-toggle="tooltip" data-bs-placement="left"><i class="fa fa-copy"></i></button>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='576.00pt' height='432.00pt' viewBox='0 0 576.00 432.00' class="r-plt inline-svg" style="max-width:100%;width:100%;height:auto;">
<g class='svglite'>
<defs>
  <style type='text/css'><![CDATA[
    /* theme-aware-processed */
    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite circle {
      fill: none;
      stroke: #3E3F3A;
      stroke-linecap: round;
      stroke-linejoin: round;
      stroke-miterlimit: 10.00;
    }
    .svglite > g > rect {
      fill: none;
      stroke: #3E3F3A;
      stroke-linecap: round;
      stroke-linejoin: round;
      stroke-miterlimit: 10.00;
    }
    .svglite text {
      white-space: pre;
      fill: #3E3F3A;
    }
    .svglite g.glyphgroup path {
      fill: inherit;
      stroke: none;
    }
  ]]></style>
</defs>
<rect width='100%' height='100%' style='stroke: none; fill: #F5F6F8;'/>
<defs>
  <clipPath id='cpMC4wMHw1NzYuMDB8MC4wMHw0MzIuMDA='>
    <rect x='0.00' y='0.00' width='576.00' height='432.00' />
  </clipPath>
</defs>
<g clip-path='url(#cpMC4wMHw1NzYuMDB8MC4wMHw0MzIuMDA=)'>
</g>
<defs>
  <clipPath id='cpMTE1LjIwfDQ2MC44MHwwLjAwfDQzMi4wMA=='>
    <rect x='115.20' y='0.00' width='345.61' height='432.00' />
  </clipPath>
</defs>
<g clip-path='url(#cpMTE1LjIwfDQ2MC44MHwwLjAwfDQzMi4wMA==)'>
<rect x='115.20' y='0.00' width='345.61' height='432.00' style='stroke-width: 0.00; stroke: none;' /> fill: #F5F6F8;' />
</g>
<g clip-path='url(#cpMC4wMHw1NzYuMDB8MC4wMHw0MzIuMDA=)'>
</g>
<defs>
  <clipPath id='cpMTI1LjE2fDQ1MC44NHw5Ljk2fDQyMi4wNA=='>
    <rect x='125.16' y='9.96' width='325.68' height='412.07' />
  </clipPath>
</defs>
<g clip-path='url(#cpMTI1LjE2fDQ1MC44NHw5Ljk2fDQyMi4wNA==)'>
<rect x='125.16' y='9.96' width='325.68' height='412.07' style='stroke-width: 0.00; stroke: none;' /> fill: #F5F6F8;' />
<path d='M 386.18 140.07 L 387.42 139.95 L 389.89 139.73 L 389.82 136.61 L 392.29 136.39 L 392.21 133.27 L 394.68 133.05 L 394.60 129.94 L 397.06 129.71 L 396.98 126.60 L 399.45 126.38 L 399.36 123.27 L 399.32 121.72 L 400.55 121.61 L 400.51 120.06 L 401.74 119.94 L 401.57 113.74 L 401.49 110.64 L 403.94 110.42 L 403.85 107.32 L 403.77 104.23 L 401.32 104.46 L 401.24 101.37 L 401.15 98.28 L 399.93 98.39 L 399.89 96.85 L 399.85 95.30 L 399.24 95.36 L 399.22 94.59 L 398.61 94.65 L 398.54 92.33 L 398.46 89.25 L 396.63 89.42 L 396.61 88.65 L 396.00 88.71 L 395.86 83.32 L 393.42 83.55 L 393.34 80.47 L 390.89 80.70 L 390.82 77.63 L 388.37 77.85 L 388.30 74.78 L 385.85 75.01 L 383.71 75.20 L 383.70 74.82 L 383.40 74.85 L 383.33 72.17 L 380.89 72.39 L 380.82 69.33 L 378.37 69.55 L 378.30 66.49 L 378.23 63.43 L 375.79 63.65 L 375.72 60.60 L 373.88 60.77 L 373.87 60.00 L 373.25 60.06 L 373.20 57.77 L 371.98 57.88 L 371.95 56.35 L 370.73 56.47 L 370.69 54.94 L 368.86 55.11 L 368.84 54.35 L 368.23 54.40 L 368.18 52.12 L 365.74 52.34 L 365.67 49.29 L 362.00 49.64 L 361.97 48.11 L 360.75 48.23 L 360.72 46.70 L 358.27 46.93 L 357.04 47.04 L 357.01 45.52 L 355.79 45.64 L 355.76 44.11 L 348.40 44.80 L 348.35 41.76 L 345.89 41.99 L 343.44 42.22 L 340.98 42.45 L 338.52 42.68 L 336.05 42.91 L 333.59 43.14 L 333.54 40.10 L 331.08 40.33 L 326.14 40.79 L 321.20 41.26 L 316.25 41.72 L 313.77 41.95 L 313.74 38.91 L 311.26 39.15 L 308.78 39.38 L 308.80 40.90 L 307.56 41.02 L 307.57 42.53 L 306.33 42.65 L 301.36 43.12 L 298.87 43.35 L 298.88 44.87 L 297.63 44.99 L 296.39 45.11 L 296.39 46.25 L 296.08 46.28 L 296.08 46.66 L 293.90 46.86 L 291.41 47.10 L 288.91 47.33 L 286.41 47.56 L 283.91 47.80 L 281.41 48.04 L 281.40 45.00 L 279.52 45.17 L 279.52 44.41 L 278.89 44.47 L 278.88 42.19 L 277.63 42.31 L 277.63 40.79 L 276.38 40.91 L 276.37 39.39 L 275.12 39.51 L 275.12 37.99 L 273.87 38.11 L 273.86 36.60 L 271.36 36.83 L 271.36 33.80 L 267.60 34.16 L 267.60 32.64 L 266.34 32.76 L 266.34 31.25 L 263.84 31.48 L 261.33 31.72 L 261.33 28.69 L 256.31 29.17 L 236.17 31.08 L 231.12 31.56 L 231.10 34.21 L 230.79 34.24 L 230.79 34.61 L 228.57 34.82 L 226.04 35.06 L 223.51 35.31 L 220.97 35.55 L 218.43 35.79 L 218.42 37.30 L 217.15 37.42 L 217.13 38.94 L 215.86 39.06 L 210.78 39.54 L 210.75 42.57 L 208.20 42.81 L 205.65 43.05 L 205.62 45.33 L 204.99 45.39 L 204.98 46.15 L 200.51 46.57 L 200.47 49.61 L 197.91 49.85 L 197.88 52.13 L 197.24 52.19 L 197.23 52.95 L 195.31 53.13 L 195.29 54.65 L 194.01 54.77 L 193.99 56.29 L 192.71 56.41 L 192.69 57.93 L 191.40 58.05 L 191.38 59.57 L 190.10 59.69 L 190.07 61.22 L 188.79 61.34 L 188.77 62.86 L 187.48 62.98 L 187.45 65.27 L 186.80 65.33 L 186.79 66.09 L 184.86 66.27 L 184.82 69.13 L 184.66 69.14 L 184.65 69.33 L 182.24 69.56 L 182.19 72.61 L 182.16 74.14 L 180.87 74.26 L 180.85 75.79 L 179.56 75.91 L 179.51 78.96 L 179.40 85.08 L 179.35 88.14 L 176.76 88.38 L 176.71 91.44 L 176.66 94.51 L 179.25 94.27 L 179.20 97.33 L 179.10 103.48 L 180.39 103.35 L 180.37 104.89 L 181.67 104.77 L 181.64 106.31 L 181.59 109.38 L 181.54 112.46 L 183.98 112.24 L 183.97 112.43 L 184.14 112.41 L 184.00 121.47 L 183.90 127.65 L 186.50 127.41 L 186.46 130.50 L 186.41 133.59 L 186.36 136.69 L 186.32 139.79 L 188.93 139.55 L 188.84 145.75 L 191.12 145.54 L 191.11 145.93 L 191.44 145.90 L 191.40 148.61 L 191.36 151.72 L 191.33 154.05 L 190.67 154.11 L 190.66 154.89 L 188.70 155.07 L 188.66 158.18 L 188.56 164.41 L 188.52 167.34 L 188.36 167.35 L 188.36 167.55 L 185.90 167.77 L 185.85 170.89 L 185.80 174.02 L 183.18 174.26 L 183.13 177.38 L 183.03 183.64 L 182.98 186.77 L 180.35 187.01 L 180.30 190.14 L 180.25 193.28 L 180.20 196.42 L 180.15 199.56 L 177.50 199.80 L 177.45 202.94 L 177.35 209.23 L 177.25 215.53 L 177.16 221.05 L 176.49 221.11 L 176.48 221.90 L 174.49 222.08 L 174.43 225.23 L 174.41 226.81 L 173.08 226.93 L 173.05 228.51 L 171.72 228.63 L 171.64 233.37 L 170.31 233.49 L 170.28 235.07 L 168.94 235.20 L 168.89 238.36 L 168.85 240.73 L 168.18 240.80 L 168.16 241.59 L 166.16 241.77 L 166.06 247.31 L 165.39 247.37 L 165.38 248.17 L 160.69 248.59 L 160.63 251.76 L 157.95 252.00 L 157.89 255.18 L 155.20 255.42 L 155.14 258.59 L 152.45 258.84 L 152.39 262.01 L 149.70 262.25 L 149.56 268.62 L 146.87 268.86 L 146.80 272.04 L 146.73 275.23 L 146.66 278.42 L 146.59 281.61 L 146.52 284.80 L 146.46 288.00 L 143.75 288.24 L 143.61 294.64 L 143.47 301.04 L 143.36 305.85 L 142.00 305.97 L 141.97 307.57 L 140.61 307.69 L 140.54 310.90 L 140.47 314.11 L 140.39 317.33 L 140.32 320.54 L 140.25 323.76 L 140.18 326.98 L 140.11 330.20 L 140.04 333.43 L 139.96 336.65 L 142.35 336.44 L 142.35 336.85 L 142.69 336.82 L 142.63 339.64 L 142.55 342.87 L 144.95 342.66 L 144.94 343.06 L 145.28 343.04 L 145.22 345.86 L 146.59 345.74 L 146.55 347.36 L 147.92 347.24 L 147.89 348.86 L 149.25 348.74 L 149.22 350.36 L 150.59 350.24 L 150.55 351.86 L 151.92 351.74 L 151.89 353.36 L 153.25 353.24 L 153.22 354.86 L 155.95 354.62 L 155.89 357.86 L 155.83 361.10 L 158.56 360.87 L 158.50 364.11 L 158.44 367.36 L 161.18 367.12 L 161.12 370.37 L 163.85 370.13 L 163.80 373.38 L 166.53 373.15 L 166.48 376.40 L 169.21 376.16 L 170.58 376.05 L 170.55 377.67 L 171.92 377.56 L 171.89 379.18 L 174.62 378.95 L 174.57 382.20 L 174.47 388.72 L 174.42 391.99 L 176.81 391.78 L 176.81 392.19 L 177.15 392.16 L 177.11 395.02 L 177.06 398.28 L 177.01 401.55 L 179.75 401.32 L 179.55 414.41 L 179.41 424.26 L 176.66 424.49 L 176.61 427.77 L 176.56 431.06 L 176.52 433.94 L 176.17 433.97 L 176.16 434.38 L 173.75 434.58 L 173.65 441.16 L 170.89 441.39 L 170.83 444.69 L 170.78 447.78 L 170.61 447.79 L 170.61 448.00 L 168.01 448.22 L 167.90 454.81 L 167.69 468.03 L 167.63 471.34 L 170.41 471.10 L 170.36 474.41 L 171.75 474.30 L 171.72 475.95 L 173.11 475.84 L 173.03 480.81 L 175.81 480.58 L 175.76 483.89 L 178.54 483.66 L 178.50 486.98 L 182.66 486.64 L 182.64 488.30 L 184.03 488.18 L 184.01 489.84 L 186.79 489.61 L 188.17 489.49 L 188.15 491.16 L 189.54 491.04 L 189.52 492.70 L 195.07 492.24 L 195.03 495.57 L 197.80 495.34 L 200.57 495.11 L 203.34 494.88 L 206.11 494.65 L 208.88 494.42 L 211.64 494.19 L 214.41 493.96 L 217.17 493.73 L 219.93 493.50 L 219.94 491.01 L 220.63 490.95 L 220.64 490.12 L 233.71 489.03 L 243.32 488.23 L 243.31 489.89 L 244.68 489.78 L 244.68 491.44 L 247.42 491.21 L 250.16 490.98 L 251.52 490.87 L 251.52 492.53 L 252.89 492.42 L 252.89 494.08 L 255.62 493.86 L 258.36 493.63 L 258.36 496.96 L 261.09 496.73 L 263.82 496.50 L 266.55 496.28 L 269.28 496.05 L 272.01 495.82 L 274.74 495.60 L 277.46 495.37 L 280.18 495.14 L 282.90 494.91 L 285.62 494.69 L 288.33 494.46 L 288.33 492.79 L 289.68 492.68 L 289.68 491.01 L 293.74 490.67 L 296.45 490.45 L 296.43 487.12 L 299.14 486.89 L 301.84 486.66 L 301.83 484.17 L 302.50 484.11 L 302.50 483.28 L 309.92 482.66 L 312.61 482.43 L 312.58 479.10 L 315.27 478.88 L 317.96 478.65 L 320.65 478.42 L 320.62 475.10 L 323.30 474.87 L 323.28 473.21 L 324.62 473.10 L 324.61 471.44 L 325.95 471.32 L 328.63 471.10 L 328.59 467.77 L 331.26 467.55 L 331.20 461.74 L 331.86 461.68 L 331.85 460.85 L 333.86 460.68 L 333.82 457.37 L 333.78 454.05 L 336.44 453.83 L 336.36 447.20 L 336.32 443.89 L 334.99 444.01 L 334.97 442.35 L 333.64 442.47 L 333.62 440.81 L 333.58 437.51 L 333.54 434.20 L 333.50 430.90 L 333.46 427.60 L 330.81 427.83 L 330.69 417.94 L 333.34 417.71 L 333.30 414.42 L 335.95 414.20 L 338.59 413.97 L 338.55 410.68 L 341.19 410.45 L 343.83 410.23 L 343.79 407.35 L 344.12 407.32 L 344.11 406.91 L 346.42 406.71 L 349.05 406.49 L 349.01 403.20 L 351.64 402.97 L 351.59 399.69 L 354.21 399.46 L 354.16 396.18 L 354.13 394.54 L 355.45 394.43 L 355.42 392.79 L 356.73 392.67 L 356.68 389.40 L 359.30 389.17 L 359.24 385.89 L 359.19 382.62 L 359.16 380.98 L 360.47 380.87 L 360.44 379.23 L 361.74 379.12 L 361.63 372.58 L 361.40 359.53 L 361.35 356.27 L 358.75 356.49 L 358.69 353.24 L 357.39 353.35 L 357.36 351.72 L 356.06 351.84 L 355.98 346.96 L 353.38 347.18 L 353.33 343.93 L 350.73 344.16 L 349.43 344.27 L 349.40 342.65 L 348.10 342.76 L 348.08 341.14 L 345.47 341.36 L 345.43 338.12 L 348.03 337.89 L 347.98 334.65 L 350.58 334.42 L 350.53 331.18 L 353.12 330.95 L 353.07 327.71 L 353.03 325.28 L 353.68 325.22 L 353.67 324.41 L 355.61 324.24 L 355.56 321.01 L 355.52 318.58 L 356.16 318.53 L 356.15 317.72 L 358.09 317.55 L 358.03 314.31 L 357.98 311.08 L 357.92 307.86 L 357.87 304.63 L 357.83 302.21 L 358.47 302.15 L 358.46 301.35 L 358.13 301.38 L 358.13 300.97 L 357.81 301.00 L 357.76 298.18 L 357.70 294.96 L 357.65 291.75 L 357.59 288.53 L 355.02 288.76 L 354.91 282.33 L 352.34 282.56 L 352.29 279.35 L 349.72 279.58 L 349.67 276.37 L 347.10 276.60 L 347.05 273.39 L 349.62 273.17 L 349.57 269.96 L 352.14 269.74 L 352.08 266.53 L 352.06 264.94 L 353.34 264.82 L 353.31 263.22 L 354.59 263.11 L 354.55 260.31 L 354.87 260.28 L 354.86 259.88 L 357.10 259.68 L 357.04 256.49 L 357.01 254.89 L 358.29 254.78 L 358.26 253.18 L 359.54 253.07 L 359.48 249.88 L 359.44 247.49 L 360.08 247.43 L 360.06 246.63 L 361.97 246.46 L 361.92 243.28 L 361.86 240.09 L 364.40 239.86 L 364.34 236.68 L 364.22 230.32 L 364.10 223.98 L 363.99 217.63 L 366.52 217.41 L 366.45 214.24 L 366.41 211.87 L 367.04 211.81 L 367.03 211.02 L 368.92 210.85 L 368.79 204.52 L 368.54 191.90 L 368.29 179.32 L 368.04 166.76 L 367.98 163.63 L 366.73 163.75 L 366.70 162.18 L 365.45 162.29 L 365.42 160.73 L 365.36 157.99 L 365.68 157.96 L 365.67 157.57 L 367.86 157.37 L 367.79 154.25 L 372.79 153.79 L 372.74 151.45 L 373.36 151.39 L 373.34 150.61 L 375.21 150.44 L 377.70 150.22 L 377.67 148.65 L 378.91 148.54 L 378.88 146.98 L 382.60 146.64 L 382.53 143.52 L 385.01 143.30 L 384.97 141.74 L 386.21 141.62 L 386.18 140.07 Z' style='fill-rule: evenodd; stroke-width: 2.13; stroke: #A0AEC0; stroke-dasharray: 11.38,11.38; stroke-linecap: butt;' />
<path d='M 363.35 473.14 L 363.32 471.50 L 365.97 471.27 L 365.92 467.95 L 365.86 464.62 L 365.81 462.13 L 366.48 462.08 L 366.46 461.25 L 368.45 461.08 L 368.39 457.76 L 368.27 451.12 L 368.15 444.50 L 368.03 437.88 L 367.91 431.27 L 370.54 431.05 L 370.49 427.95 L 370.65 427.94 L 370.65 427.73 L 373.11 427.52 L 373.08 425.87 L 374.39 425.76 L 374.36 424.11 L 375.67 423.99 L 375.64 422.34 L 376.95 422.23 L 376.92 420.58 L 378.23 420.47 L 378.19 418.82 L 379.50 418.71 L 379.47 417.06 L 380.78 416.95 L 380.74 415.30 L 382.05 415.19 L 382.02 413.54 L 383.32 413.43 L 383.26 410.55 L 383.59 410.52 L 383.58 410.11 L 385.86 409.91 L 385.79 406.62 L 385.76 404.98 L 387.06 404.87 L 387.03 403.22 L 388.33 403.11 L 388.26 399.82 L 390.86 399.60 L 390.78 396.31 L 390.71 393.03 L 393.31 392.81 L 393.23 389.52 L 393.08 382.97 L 395.67 382.74 L 395.60 379.47 L 395.52 376.19 L 395.45 372.92 L 395.37 369.65 L 395.29 366.39 L 395.22 363.12 L 395.14 359.86 L 395.07 356.60 L 394.99 353.34 L 392.41 353.56 L 392.19 343.80 L 389.62 344.02 L 389.54 340.77 L 389.47 337.52 L 386.90 337.75 L 386.75 331.25 L 389.32 331.03 L 389.25 327.79 L 389.18 324.54 L 389.11 321.71 L 389.43 321.68 L 389.42 321.28 L 391.67 321.08 L 391.59 317.84 L 391.29 304.92 L 391.00 292.02 L 390.85 285.59 L 390.77 282.38 L 388.23 282.60 L 388.15 279.39 L 388.08 276.18 L 386.17 276.35 L 386.16 275.55 L 385.52 275.60 L 385.47 273.20 L 388.01 272.97 L 387.93 269.77 L 387.87 266.76 L 388.02 266.75 L 388.02 266.55 L 390.40 266.34 L 390.25 259.94 L 392.78 259.71 L 392.71 256.51 L 392.63 253.32 L 395.16 253.09 L 395.00 246.71 L 394.92 243.52 L 397.45 243.29 L 397.37 240.11 L 397.29 236.92 L 397.21 233.74 L 397.13 230.56 L 397.05 227.38 L 396.99 225.00 L 397.62 224.94 L 397.60 224.15 L 399.48 223.98 L 399.40 220.81 L 399.32 217.64 L 401.82 217.41 L 401.74 214.24 L 401.66 211.07 L 401.58 207.91 L 401.50 204.75 L 401.41 201.59 L 401.33 198.43 L 401.25 195.27 L 401.17 192.12 L 401.09 188.96 L 401.00 185.81 L 400.92 182.66 L 400.84 179.52 L 400.76 176.38 L 400.68 173.23 L 403.16 173.01 L 403.07 169.87 L 405.55 169.65 L 405.51 168.08 L 406.75 167.96 L 406.71 166.40 L 407.94 166.28 L 410.42 166.06 L 410.33 162.92 L 412.80 162.70 L 412.73 160.35 L 413.35 160.30 L 413.33 159.51 L 415.18 159.34 L 415.13 157.78 L 416.36 157.67 L 416.32 156.10 L 417.55 155.99 L 417.50 154.43 L 418.73 154.31 L 418.69 152.75 L 419.92 152.64 L 419.87 151.08 L 421.10 150.96 L 421.05 149.40 L 422.28 149.29 L 424.73 149.07 L 424.64 145.94 L 424.59 144.38 L 425.81 144.27 L 425.76 142.71 L 426.99 142.60 L 426.94 141.04 L 428.16 140.93 L 428.11 139.37 L 429.34 139.26 L 429.24 136.14 L 431.68 135.92 L 431.48 129.69 L 433.91 129.47 L 433.81 126.36 L 433.71 123.25 L 433.66 121.69 L 434.87 121.58 L 434.82 120.03 L 436.04 119.92 L 435.93 116.81 L 435.72 110.61 L 435.31 98.24 L 435.10 92.06 L 432.68 92.29 L 432.58 89.20 L 432.48 86.12 L 432.37 83.04 L 429.96 83.26 L 429.86 80.19 L 429.75 77.11 L 427.34 77.34 L 427.24 74.26 L 427.14 71.19 L 424.73 71.42 L 424.63 68.35 L 422.82 68.51 L 422.79 67.75 L 422.19 67.80 L 422.12 65.51 L 420.91 65.62 L 420.86 64.08 L 419.66 64.20 L 419.61 62.66 L 419.51 59.60 L 417.10 59.83 L 417.01 56.77 L 414.59 56.99 L 414.50 53.93 L 412.09 54.16 L 410.88 54.27 L 410.83 52.74 L 409.63 52.85 L 409.58 51.33 L 407.20 51.55 L 407.20 51.50 L 407.16 51.50 L 407.08 48.50 L 405.87 48.61 L 405.83 47.09 L 404.62 47.20 L 404.58 45.67 L 404.49 42.63 L 402.07 42.85 L 401.99 39.81 L 399.65 40.02 L 399.65 39.93 L 399.57 39.94 L 399.49 36.99 L 397.38 37.18 L 397.36 36.80 L 397.06 36.83 L 396.99 34.17 L 394.88 34.37 L 394.87 33.99 L 394.56 34.02 L 394.49 31.36 L 392.08 31.58 L 392.00 28.55 L 389.58 28.77 L 389.50 25.74 L 387.09 25.97 L 385.88 26.08 L 385.84 24.56 L 384.63 24.68 L 384.59 23.16 L 382.17 23.39 L 382.10 20.36 L 379.68 20.58 L 378.47 20.70 L 378.43 19.18 L 377.22 19.30 L 377.19 17.78 L 374.76 18.01 L 373.55 18.12 L 373.52 16.61 L 372.30 16.72 L 372.27 15.21 L 369.85 15.44 L 367.42 15.67 L 367.35 12.65 L 364.93 12.87 L 360.07 13.33 L 360.01 10.31 L 357.58 10.54 L 355.14 10.77 L 352.71 11.00 L 350.27 11.22 L 347.83 11.45 L 347.78 8.44 L 345.34 8.67 L 335.57 9.59 L 330.67 10.05 L 330.63 7.03 L 328.18 7.26 L 325.73 7.50 L 323.27 7.73 L 320.82 7.96 L 318.36 8.19 L 315.90 8.42 L 313.44 8.66 L 310.97 8.89 L 308.51 9.12 L 308.48 6.11 L 306.02 6.34 L 306.04 9.36 L 303.57 9.59 L 301.10 9.82 L 298.63 10.06 L 296.16 10.29 L 293.68 10.53 L 291.83 10.70 L 291.82 9.95 L 291.20 10.01 L 291.19 7.75 L 288.71 7.98 L 288.70 4.97 L 286.22 5.21 L 283.74 5.44 L 283.73 2.43 L 281.25 2.67 L 278.77 2.91 L 278.76 -0.10 L 276.27 0.14 L 273.79 0.37 L 272.55 0.49 L 272.55 -1.01 L 271.30 -0.89 L 271.30 -2.39 L 266.33 -1.92 L 263.84 -1.68 L 263.84 -4.69 L 261.35 -4.45 L 258.86 -4.21 L 256.37 -3.97 L 253.87 -3.73 L 251.38 -3.49 L 248.88 -3.26 L 246.38 -3.02 L 245.13 -2.90 L 245.13 -4.40 L 243.88 -4.28 L 243.89 -5.78 L 241.39 -5.54 L 238.88 -5.30 L 238.87 -2.30 L 236.36 -2.06 L 233.85 -1.82 L 231.34 -1.58 L 228.83 -1.34 L 226.32 -1.10 L 223.80 -0.86 L 223.79 0.64 L 222.53 0.76 L 222.52 2.27 L 221.26 2.39 L 216.22 2.87 L 211.17 3.35 L 208.64 3.60 L 208.61 6.60 L 206.08 6.84 L 203.55 7.08 L 201.01 7.33 L 201.01 7.45 L 204.39 10.27 L 210.93 11.54 L 210.33 14.01 L 204.63 22.05 L 204.67 27.37 L 207.27 28.04 L 217.43 23.89 L 218.07 27.04 L 217.27 37.11 L 221.96 41.69 L 219.65 45.83 L 217.30 47.65 L 216.92 51.47 L 224.13 52.39 L 212.66 65.40 L 213.05 77.71 L 214.54 79.28 L 218.92 78.22 L 212.97 86.63 L 212.37 91.86 L 214.72 96.50 L 220.01 97.08 L 216.75 100.65 L 216.99 107.80 L 220.73 129.22 L 224.39 139.35 L 225.22 144.66 L 223.56 170.57 L 220.72 178.44 L 218.28 181.93 L 212.08 208.79 L 211.19 214.97 L 213.27 217.14 L 214.05 219.95 L 194.97 264.25 L 188.64 273.22 L 184.49 275.87 L 181.11 279.92 L 182.33 286.94 L 178.45 297.45 L 177.23 309.21 L 174.47 317.51 L 174.10 321.71 L 174.36 326.99 L 181.46 329.66 L 194.94 326.36 L 197.75 319.26 L 206.20 305.27 L 211.49 301.45 L 216.10 300.54 L 207.17 306.67 L 203.30 314.02 L 204.64 321.80 L 201.89 326.13 L 197.48 329.97 L 192.33 330.60 L 187.88 332.95 L 190.62 342.13 L 189.93 349.18 L 191.54 349.97 L 208.20 344.42 L 215.27 344.02 L 223.19 351.37 L 210.21 349.52 L 214.39 360.97 L 214.84 369.97 L 209.97 387.41 L 213.38 394.18 L 215.18 404.99 L 213.44 415.87 L 213.60 428.42 L 201.90 459.24 L 205.77 460.54 L 211.23 455.96 L 218.03 456.10 L 226.85 452.54 L 233.89 454.23 L 255.50 456.09 L 267.76 461.66 L 274.33 461.63 L 295.47 448.93 L 315.24 445.64 L 327.68 446.32 L 330.47 445.01 L 334.49 440.00 L 334.79 442.30 L 333.28 446.58 L 357.93 464.83 L 363.35 473.14 Z' style='fill-rule: evenodd; fill: #5A7BA6; fill-opacity: 0.063; stroke-width: 2.13; stroke: #5A7BA6; stroke-dasharray: 11.38,11.38; stroke-linecap: butt;' />
<path d='M 212.97 86.63 L 212.37 91.86 L 214.72 96.50 L 220.01 97.08 L 216.75 100.65 L 216.99 107.80 L 220.73 129.22 L 224.39 139.35 L 225.22 144.66 L 225.44 149.07 L 224.29 157.84 L 223.56 170.57 L 220.72 178.44 L 218.28 181.93 L 212.08 208.79 L 211.19 214.97 L 213.27 217.14 L 214.05 219.95 L 203.88 242.77 L 194.97 264.25 L 188.64 273.22 L 184.49 275.87 L 181.11 279.92 L 182.11 284.13 L 182.33 286.94 L 178.45 297.45 L 177.23 309.21 L 174.47 317.51 L 174.10 321.71 L 174.36 326.99 L 178.21 328.86 L 181.46 329.66 L 187.83 328.60 L 194.94 326.36 L 197.75 319.26 L 206.20 305.27 L 211.49 301.45 L 216.10 300.54 L 207.17 306.67 L 203.30 314.02 L 204.64 321.80 L 201.89 326.13 L 197.48 329.97 L 192.33 330.60 L 187.88 332.95 L 190.62 342.13 L 189.93 349.18 L 191.54 349.97 L 197.09 348.72 L 208.20 344.42 L 211.44 344.62 L 215.27 344.02 L 219.21 346.83 L 223.19 351.37 L 210.21 349.52 L 214.39 360.97 L 214.84 369.97 L 209.97 387.41 L 213.38 394.18 L 215.18 404.99 L 213.44 415.87 L 213.60 428.42 L 206.45 448.90 L 201.90 459.24 L 205.77 460.54 L 211.23 455.96 L 218.03 456.10 L 226.85 452.54 L 233.89 454.23 L 255.50 456.09 L 267.76 461.66 L 274.33 461.63 L 295.47 448.93 L 300.89 448.03 L 296.99 428.76 L 295.17 421.36 L 294.68 416.55 L 298.29 405.45 L 302.27 400.91 L 307.54 391.55 L 314.04 383.74 L 320.96 381.84 L 324.00 380.67 L 326.50 374.64 L 327.88 369.51 L 326.82 369.01 L 318.77 370.14 L 304.11 348.80 L 304.53 345.38 L 306.31 340.29 L 307.45 333.87 L 307.71 328.81 L 311.42 324.44 L 317.12 320.00 L 321.88 313.73 L 324.23 307.64 L 324.67 302.10 L 321.90 298.20 L 314.05 296.09 L 305.87 280.40 L 304.00 270.56 L 302.36 269.54 L 297.37 265.08 L 292.57 256.68 L 291.87 255.38 L 296.76 253.87 L 316.95 253.63 L 321.14 251.73 L 321.78 251.07 L 325.38 244.47 L 329.09 233.66 L 329.92 227.07 L 328.67 224.36 L 321.95 217.78 L 321.64 215.82 L 322.67 212.66 L 326.58 209.26 L 331.86 205.38 L 334.71 202.05 L 333.99 199.49 L 332.40 196.81 L 332.12 194.31 L 333.05 191.20 L 333.26 180.64 L 333.90 177.91 L 332.74 168.34 L 331.35 160.52 L 327.06 150.42 L 327.79 148.16 L 329.69 146.25 L 335.93 142.65 L 340.84 134.28 L 348.02 127.24 L 357.45 121.51 L 363.98 115.21 L 366.52 110.43 L 368.35 109.14 L 367.77 106.94 L 366.46 103.76 L 362.61 100.69 L 357.70 98.98 L 352.29 99.15 L 348.93 98.58 L 347.91 96.14 L 348.17 89.50 L 347.78 82.94 L 346.69 79.93 L 344.16 77.69 L 339.22 78.37 L 334.92 76.57 L 331.67 76.18 L 329.82 77.67 L 320.24 77.36 L 316.25 76.35 L 313.45 75.06 L 311.68 75.82 L 310.68 77.10 L 310.52 79.11 L 309.89 81.77 L 306.49 84.19 L 298.66 86.64 L 292.33 86.50 L 286.51 84.82 L 284.64 83.58 L 281.83 82.47 L 270.02 83.89 L 268.60 82.87 L 264.53 85.34 L 258.51 88.26 L 255.14 88.43 L 253.92 87.81 L 253.47 86.49 L 250.96 81.91 L 251.62 79.48 L 256.47 72.42 L 255.93 70.73 L 253.95 68.44 L 252.19 65.13 L 251.68 63.44 L 248.61 63.14 L 245.34 64.86 L 232.85 68.36 L 229.85 69.63 L 224.42 73.02 L 218.92 78.22 L 212.97 86.63 Z' style='fill-rule: evenodd; stroke-width: 2.56; stroke: #2D3748; stroke-linecap: butt;' />
</g>
<g clip-path='url(#cpMC4wMHw1NzYuMDB8MC4wMHw0MzIuMDA=)'>
</g>
</g>
</svg></div><p class="caption">
Portugal with land-masked AoE. The halo extends into Spain but not into
the Atlantic.
</p>
</div>
<p>The <code>area = 1</code> parameter ensures the halo has equal land
area to the core, even after the ocean is masked out. Without this,
coastline clipping would reduce the effective halo area.</p>
</div>
</div>
<div class="section level2">
<h2 id="scale-parameter">Scale Parameter<a class="anchor" aria-label="anchor" href="#scale-parameter"></a>
</h2>
<p>The <code>scale</code> parameter controls halo size as a proportion
of core area.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Default: equal core/halo areas (scale = sqrt(2) - 1)</span></span>
<span><span class="va">result_default</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe.html">aoe</a></span><span class="op">(</span><span class="va">pts</span>, <span class="va">support</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Scale = 1: larger halo (3:1 area ratio)</span></span>
<span><span class="va">result_large</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe.html">aoe</a></span><span class="op">(</span><span class="va">pts</span>, <span class="va">support</span>, scale <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th>Scale</th>
<th>Halo:Core Area</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>
<code>sqrt(2) - 1</code> (default)</td>
<td>1:1</td>
</tr>
<tr class="even">
<td><code>1</code></td>
<td>3:1</td>
</tr>
<tr class="odd">
<td><code>0.5</code></td>
<td>1.25:1</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="area-parameter-target-halo-area">Area Parameter (Target Halo Area)<a class="anchor" aria-label="anchor" href="#area-parameter-target-halo-area"></a>
</h2>
<p>Sometimes you need a specific halo area regardless of masking. The
<code>area</code> parameter specifies the target halo area as a
proportion of the original support:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Halo area = original area (same as scale = sqrt(2) - 1 without mask)</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe.html">aoe</a></span><span class="op">(</span><span class="va">pts</span>, <span class="va">support</span>, area <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Halo area = half of original</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe.html">aoe</a></span><span class="op">(</span><span class="va">pts</span>, <span class="va">support</span>, area <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span></span></code></pre></div>
<p>Unlike <code>scale</code>, <code>area</code> accounts for masking:
the function finds the scale that produces the target halo area
<em>after</em> mask intersection. This is useful for coastal regions
where scale alone would produce inconsistent effective areas.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Target area = 1 means halo = original, even after coastline clipping</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe.html">aoe</a></span><span class="op">(</span><span class="va">pts</span>, <span class="va">support</span>, area <span class="op">=</span> <span class="fl">1</span>, mask <span class="op">=</span> <span class="st">"land"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="adaptive-expansion-with-aoe_expand">Adaptive Expansion with <code>aoe_expand()</code><a class="anchor" aria-label="anchor" href="#adaptive-expansion-with-aoe_expand"></a>
</h2>
<p>When some supports have too few points at baseline AoE,
<code><a href="../reference/aoe_expand.html">aoe_expand()</a></code> finds the minimum scale needed to capture a
target number of points:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create sparse data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">42</span><span class="op">)</span></span>
<span><span class="va">pts_sparse</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">15</span><span class="op">)</span>,</span>
<span>  geometry <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html" class="external-link">st_sfc</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, <span class="kw">function</span><span class="op">(</span><span class="va">i</span><span class="op">)</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">20</span>, <span class="fl">80</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">20</span>, <span class="fl">80</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="kw">function</span><span class="op">(</span><span class="va">i</span><span class="op">)</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span>, <span class="op">-</span><span class="fl">50</span>, <span class="fl">150</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span>, <span class="op">-</span><span class="fl">50</span>, <span class="fl">150</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span><span class="op">)</span>,</span>
<span>  crs <span class="op">=</span> <span class="fl">32631</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Expand until at least 10 points are captured</span></span>
<span><span class="va">result_expand</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe_expand.html">aoe_expand</a></span><span class="op">(</span><span class="va">pts_sparse</span>, <span class="va">support</span>, min_points <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<p>Two safety caps prevent unreasonable expansion:</p>
<ul>
<li><p><code>max_area = 2</code> (default): halo area cannot exceed 2×
the original</p></li>
<li><p><code>max_dist</code>: maximum expansion distance in CRS
units</p></li>
</ul>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Strict caps</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe_expand.html">aoe_expand</a></span><span class="op">(</span><span class="va">pts</span>, <span class="va">support</span>,</span>
<span>                     min_points <span class="op">=</span> <span class="fl">50</span>,</span>
<span>                     max_area <span class="op">=</span> <span class="fl">1.5</span>,    <span class="co"># halo ≤ 1.5× original</span></span>
<span>                     max_dist <span class="op">=</span> <span class="fl">500</span><span class="op">)</span>    <span class="co"># max 500m expansion</span></span></code></pre></div>
<p>Check expansion details:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">info</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">result_expand</span>, <span class="st">"expansion_info"</span><span class="op">)</span></span>
<span><span class="va">info</span></span>
<span><span class="co">#&gt;   support_id scale_used points_captured target_reached cap_hit</span></span>
<span><span class="co">#&gt; 1          1  0.6412593              10           TRUE    none</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="balanced-sampling-with-aoe_sample">Balanced Sampling with <code>aoe_sample()</code><a class="anchor" aria-label="anchor" href="#balanced-sampling-with-aoe_sample"></a>
</h2>
<p>Core regions often dominate due to point density.
<code><a href="../reference/aoe_sample.html">aoe_sample()</a></code> provides stratified sampling to balance
core/halo representation:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create imbalanced data (many core, few halo)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">42</span><span class="op">)</span></span>
<span><span class="va">pts_imbal</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">60</span><span class="op">)</span>,</span>
<span>  geometry <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html" class="external-link">st_sfc</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">50</span>, <span class="kw">function</span><span class="op">(</span><span class="va">i</span><span class="op">)</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span>, <span class="fl">90</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span>, <span class="fl">90</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="kw">function</span><span class="op">(</span><span class="va">i</span><span class="op">)</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">110</span>, <span class="fl">140</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span>, <span class="fl">90</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span><span class="op">)</span>,</span>
<span>  crs <span class="op">=</span> <span class="fl">32631</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">result_imbal</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe.html">aoe</a></span><span class="op">(</span><span class="va">pts_imbal</span>, <span class="va">support</span>, scale <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Default: balance core/halo (downsamples core to match halo)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span></span>
<span><span class="va">balanced</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe_sample.html">aoe_sample</a></span><span class="op">(</span><span class="va">result_imbal</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">balanced</span><span class="op">$</span><span class="va">aoe_class</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; core halo </span></span>
<span><span class="co">#&gt;   10   10</span></span></code></pre></div>
<p>Custom ratios and fixed sample sizes:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Fixed n with 70/30 split</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span></span>
<span><span class="va">sampled</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe_sample.html">aoe_sample</a></span><span class="op">(</span><span class="va">result_imbal</span>, n <span class="op">=</span> <span class="fl">20</span>, ratio <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>core <span class="op">=</span> <span class="fl">0.7</span>, halo <span class="op">=</span> <span class="fl">0.3</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">sampled</span><span class="op">$</span><span class="va">aoe_class</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; core halo </span></span>
<span><span class="co">#&gt;   14    6</span></span></code></pre></div>
<p>For multiple supports, use <code>by = "support"</code> to sample
within each:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sampled</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe_sample.html">aoe_sample</a></span><span class="op">(</span><span class="va">result_multi</span>, by <span class="op">=</span> <span class="st">"support"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="border-classification-with-aoe_border">Border Classification with <code>aoe_border()</code><a class="anchor" aria-label="anchor" href="#border-classification-with-aoe_border"></a>
</h2>
<p>When your study involves a boundary <em>line</em> rather than a
polygon (e.g., a river, mountain range, or political border), use
<code><a href="../reference/aoe_border.html">aoe_border()</a></code> to classify points by their distance from and
side of the border.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create a diagonal border line</span></span>
<span><span class="va">border_line</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>  geometry <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html" class="external-link">st_sfc</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_linestring</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>,</span>
<span>      <span class="fl">100</span>, <span class="fl">100</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="fl">2</span>, byrow <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  crs <span class="op">=</span> <span class="fl">32631</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create points on both sides</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">42</span><span class="op">)</span></span>
<span><span class="va">pts_border</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">30</span><span class="op">)</span>,</span>
<span>  geometry <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html" class="external-link">st_sfc</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="co"># Points on side 1 (above the line)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">15</span>, <span class="kw">function</span><span class="op">(</span><span class="va">i</span><span class="op">)</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span>, <span class="fl">90</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span>, <span class="fl">90</span><span class="op">)</span> <span class="op">+</span> <span class="fl">20</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    <span class="co"># Points on side 2 (below the line)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">15</span>, <span class="kw">function</span><span class="op">(</span><span class="va">i</span><span class="op">)</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span>, <span class="fl">90</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span>, <span class="fl">90</span><span class="op">)</span> <span class="op">-</span> <span class="fl">20</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span><span class="op">)</span>,</span>
<span>  crs <span class="op">=</span> <span class="fl">32631</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Classify by distance from border</span></span>
<span><span class="va">result_border</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe_border.html">aoe_border</a></span><span class="op">(</span></span>
<span>  <span class="va">pts_border</span>, <span class="va">border_line</span>,</span>
<span>  width <span class="op">=</span> <span class="fl">30</span>,</span>
<span>  side_names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"north"</span>, <span class="st">"south"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Extract geometries for ggplot2</span></span>
<span><span class="va">geoms</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">result_border</span>, <span class="st">"border_geometries"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Plot with ggplot2</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co"># Halo zones (background)</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">geoms</span><span class="op">$</span><span class="va">side1_halo</span>, fill <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">aoe_colors</span><span class="op">$</span><span class="va">side_a</span>, <span class="st">"20"</span><span class="op">)</span>, color <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">geoms</span><span class="op">$</span><span class="va">side2_halo</span>, fill <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">aoe_colors</span><span class="op">$</span><span class="va">side_b</span>, <span class="st">"20"</span><span class="op">)</span>, color <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co"># Core zones</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">geoms</span><span class="op">$</span><span class="va">side1_core</span>, fill <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">aoe_colors</span><span class="op">$</span><span class="va">side_a</span>, <span class="st">"40"</span><span class="op">)</span>, color <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">geoms</span><span class="op">$</span><span class="va">side2_core</span>, fill <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">aoe_colors</span><span class="op">$</span><span class="va">side_b</span>, <span class="st">"40"</span><span class="op">)</span>, color <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co"># Border line</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">geoms</span><span class="op">$</span><span class="va">border</span>, color <span class="op">=</span> <span class="va">aoe_colors</span><span class="op">$</span><span class="va">support</span>, linewidth <span class="op">=</span> <span class="fl">1.5</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co"># Points</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">result_border</span>,</span>
<span>          <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="va">side</span>, shape <span class="op">=</span> <span class="va">aoe_class</span><span class="op">)</span>, size <span class="op">=</span> <span class="fl">3</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_color_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"north"</span> <span class="op">=</span> <span class="va">aoe_colors</span><span class="op">$</span><span class="va">side_a</span>, <span class="st">"south"</span> <span class="op">=</span> <span class="va">aoe_colors</span><span class="op">$</span><span class="va">side_b</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_shape_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"core"</span> <span class="op">=</span> <span class="fl">16</span>, <span class="st">"halo"</span> <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>                     labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Core"</span>, <span class="st">"Halo"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"Side"</span>, shape <span class="op">=</span> <span class="st">"Class"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_aoe</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<div class="svg-container"><button type="button" class="btn btn-primary btn-copy-svg" title="Copy SVG to clipboard" aria-label="Copy SVG to clipboard" data-bs-toggle="tooltip" data-bs-placement="left"><i class="fa fa-copy"></i></button>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='576.00pt' height='432.00pt' viewBox='0 0 576.00 432.00' class="r-plt inline-svg" style="max-width:100%;width:100%;height:auto;">
<g class='svglite'>
<defs>
  <style type='text/css'><![CDATA[
    /* theme-aware-processed */
    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite circle {
      fill: none;
      stroke: #3E3F3A;
      stroke-linecap: round;
      stroke-linejoin: round;
      stroke-miterlimit: 10.00;
    }
    .svglite > g > rect {
      fill: none;
      stroke: #3E3F3A;
      stroke-linecap: round;
      stroke-linejoin: round;
      stroke-miterlimit: 10.00;
    }
    .svglite text {
      white-space: pre;
      fill: #3E3F3A;
    }
    .svglite g.glyphgroup path {
      fill: inherit;
      stroke: none;
    }
  ]]></style>
</defs>
<rect width='100%' height='100%' style='stroke: none; fill: #F5F6F8;'/>
<defs>
  <clipPath id='cpMC4wMHw1NzYuMDB8MC4wMHw0MzIuMDA='>
    <rect x='0.00' y='0.00' width='576.00' height='432.00' />
  </clipPath>
</defs>
<g clip-path='url(#cpMC4wMHw1NzYuMDB8MC4wMHw0MzIuMDA=)'>
</g>
<defs>
  <clipPath id='cpNDQuMDd8NTMxLjkzfDAuMDB8NDMyLjAw'>
    <rect x='44.07' y='0.00' width='487.86' height='432.00' />
  </clipPath>
</defs>
<g clip-path='url(#cpNDQuMDd8NTMxLjkzfDAuMDB8NDMyLjAw)'>
<rect x='44.07' y='0.00' width='487.86' height='432.00' style='stroke-width: 0.00; stroke: none;' /> fill: #F5F6F8;' />
</g>
<g clip-path='url(#cpMC4wMHw1NzYuMDB8MC4wMHw0MzIuMDA=)'>
</g>
<defs>
  <clipPath id='cpNTQuMDN8NDY2LjExfDkuOTZ8NDIyLjA0'>
    <rect x='54.03' y='9.96' width='412.07' height='412.07' />
  </clipPath>
</defs>
<g clip-path='url(#cpNTQuMDN8NDY2LjExfDkuOTZ8NDIyLjA0)'>
<rect x='54.03' y='9.96' width='412.07' height='412.07' style='stroke-width: 0.00; stroke: none;' /> fill: #F5F6F8;' />
<path d='M 280.91 51.46 L 285.15 48.21 L 289.56 45.18 L 294.12 42.38 L 298.82 39.83 L 303.65 37.53 L 308.59 35.48 L 313.64 33.69 L 318.76 32.17 L 323.97 30.93 L 329.22 29.95 L 334.53 29.25 L 339.86 28.83 L 345.21 28.69 L 350.55 28.83 L 355.89 29.25 L 361.19 29.95 L 366.45 30.93 L 371.65 32.17 L 376.78 33.69 L 381.82 35.48 L 386.76 37.53 L 391.59 39.83 L 396.29 42.38 L 400.85 45.18 L 405.26 48.21 L 409.50 51.46 L 413.57 54.94 L 417.45 58.62 L 381.33 94.74 L 379.39 92.90 L 377.36 91.16 L 375.23 89.53 L 373.03 88.02 L 370.75 86.62 L 368.40 85.34 L 365.98 84.19 L 363.51 83.17 L 360.99 82.28 L 358.43 81.52 L 355.83 80.89 L 353.20 80.41 L 350.55 80.06 L 347.88 79.85 L 345.21 79.78 L 342.53 79.85 L 339.87 80.06 L 337.22 80.41 L 334.59 80.89 L 331.99 81.52 L 329.42 82.28 L 326.90 83.17 L 324.43 84.19 L 322.02 85.34 L 319.67 86.62 L 317.39 88.02 L 315.18 89.53 L 313.06 91.16 L 311.03 92.90 L 309.09 94.74 L 138.81 265.02 L 136.97 266.96 L 135.23 268.99 L 133.60 271.11 L 132.09 273.32 L 130.69 275.60 L 129.41 277.95 L 128.26 280.36 L 127.24 282.83 L 126.34 285.35 L 125.59 287.92 L 124.96 290.52 L 124.47 293.15 L 124.12 295.80 L 123.91 298.47 L 123.84 301.14 L 123.91 303.81 L 124.12 306.48 L 124.47 309.13 L 124.96 311.76 L 125.59 314.36 L 126.34 316.93 L 127.24 319.45 L 128.26 321.92 L 129.41 324.33 L 130.69 326.68 L 132.09 328.96 L 133.60 331.17 L 135.23 333.29 L 136.97 335.32 L 138.81 337.26 L 102.69 373.38 L 99.00 369.50 L 95.53 365.44 L 92.27 361.19 L 89.24 356.78 L 86.45 352.22 L 83.90 347.52 L 81.59 342.69 L 79.55 337.75 L 77.76 332.71 L 76.24 327.58 L 74.99 322.38 L 74.02 317.12 L 73.32 311.82 L 72.90 306.49 L 72.76 301.14 L 72.90 295.79 L 73.32 290.46 L 74.02 285.16 L 74.99 279.90 L 76.24 274.70 L 77.76 269.57 L 79.55 264.53 L 81.59 259.58 L 83.90 254.76 L 86.45 250.06 L 89.24 245.50 L 92.27 241.09 L 95.53 236.84 L 99.00 232.78 L 102.69 228.90 L 272.96 58.62 L 276.84 54.94 L 280.91 51.46 Z' style='fill-rule: evenodd; fill: #2B6CB0; fill-opacity: 0.13; stroke-width: 0.47; stroke: none; stroke-linecap: butt;' />
<path d='M 424.61 66.56 L 427.86 70.81 L 430.89 75.22 L 433.69 79.78 L 436.24 84.48 L 438.54 89.31 L 440.59 94.25 L 442.37 99.29 L 443.89 104.42 L 445.14 109.62 L 446.12 114.88 L 446.81 120.18 L 447.23 125.51 L 447.37 130.86 L 447.23 136.21 L 446.81 141.54 L 446.12 146.84 L 445.14 152.10 L 443.89 157.30 L 442.37 162.43 L 440.59 167.47 L 438.54 172.42 L 436.24 177.24 L 433.69 181.94 L 430.89 186.50 L 427.86 190.91 L 424.61 195.16 L 421.13 199.22 L 417.45 203.10 L 247.17 373.38 L 243.29 377.06 L 239.22 380.54 L 234.98 383.79 L 230.57 386.82 L 226.01 389.62 L 221.31 392.17 L 216.48 394.47 L 211.54 396.52 L 206.50 398.31 L 201.37 399.83 L 196.17 401.07 L 190.91 402.05 L 185.61 402.75 L 180.28 403.17 L 174.93 403.31 L 169.58 403.17 L 164.25 402.75 L 158.95 402.05 L 153.69 401.07 L 148.49 399.83 L 143.36 398.31 L 138.31 396.52 L 133.37 394.47 L 128.55 392.17 L 123.84 389.62 L 119.28 386.82 L 114.88 383.79 L 110.63 380.54 L 106.57 377.06 L 102.69 373.38 L 102.69 373.38 L 138.81 337.26 L 138.81 337.26 L 140.75 339.10 L 142.78 340.84 L 144.90 342.47 L 147.11 343.98 L 149.39 345.38 L 151.74 346.66 L 154.15 347.81 L 156.62 348.83 L 159.14 349.72 L 161.71 350.48 L 164.31 351.11 L 166.94 351.59 L 169.59 351.94 L 172.25 352.15 L 174.93 352.22 L 177.60 352.15 L 180.27 351.94 L 182.92 351.59 L 185.55 351.11 L 188.15 350.48 L 190.71 349.72 L 193.24 348.83 L 195.71 347.81 L 198.12 346.66 L 200.47 345.38 L 202.75 343.98 L 204.95 342.47 L 207.08 340.84 L 209.11 339.10 L 211.05 337.26 L 381.33 166.98 L 383.17 165.04 L 384.91 163.01 L 386.53 160.89 L 388.05 158.68 L 389.45 156.40 L 390.72 154.05 L 391.87 151.64 L 392.90 149.17 L 393.79 146.65 L 394.55 144.08 L 395.17 141.48 L 395.66 138.85 L 396.01 136.20 L 396.22 133.53 L 396.29 130.86 L 396.22 128.19 L 396.01 125.52 L 395.66 122.87 L 395.17 120.24 L 394.55 117.64 L 393.79 115.07 L 392.90 112.55 L 391.87 110.08 L 390.72 107.67 L 389.45 105.32 L 388.05 103.04 L 386.53 100.83 L 384.91 98.71 L 383.17 96.68 L 381.33 94.74 L 417.45 58.62 L 421.13 62.50 L 424.61 66.56 Z' style='fill-rule: evenodd; fill: #C05621; fill-opacity: 0.13; stroke-width: 0.47; stroke: none; stroke-linecap: butt;' />
<path d='M 311.03 92.90 L 313.06 91.16 L 315.18 89.53 L 317.39 88.02 L 319.67 86.62 L 322.02 85.34 L 324.43 84.19 L 326.90 83.17 L 329.42 82.28 L 331.99 81.52 L 334.59 80.89 L 337.22 80.41 L 339.87 80.06 L 342.53 79.85 L 345.21 79.78 L 347.88 79.85 L 350.55 80.06 L 353.20 80.41 L 355.83 80.89 L 358.43 81.52 L 360.99 82.28 L 363.51 83.17 L 365.98 84.19 L 368.40 85.34 L 370.75 86.62 L 373.03 88.02 L 375.23 89.53 L 377.36 91.16 L 379.39 92.90 L 381.33 94.74 L 138.81 337.26 L 136.97 335.32 L 135.23 333.29 L 133.60 331.17 L 132.09 328.96 L 130.69 326.68 L 129.41 324.33 L 128.26 321.92 L 127.24 319.45 L 126.34 316.93 L 125.59 314.36 L 124.96 311.76 L 124.47 309.13 L 124.12 306.48 L 123.91 303.81 L 123.84 301.14 L 123.91 298.47 L 124.12 295.80 L 124.47 293.15 L 124.96 290.52 L 125.59 287.92 L 126.34 285.35 L 127.24 282.83 L 128.26 280.36 L 129.41 277.95 L 130.69 275.60 L 132.09 273.32 L 133.60 271.11 L 135.23 268.99 L 136.97 266.96 L 138.81 265.02 L 309.09 94.74 L 311.03 92.90 Z' style='fill-rule: evenodd; fill: #2B6CB0; fill-opacity: 0.25; stroke-width: 0.47; stroke: none; stroke-linecap: butt;' />
<path d='M 383.17 96.68 L 384.91 98.71 L 386.53 100.83 L 388.05 103.04 L 389.45 105.32 L 390.72 107.67 L 391.87 110.08 L 392.90 112.55 L 393.79 115.07 L 394.55 117.64 L 395.17 120.24 L 395.66 122.87 L 396.01 125.52 L 396.22 128.19 L 396.29 130.86 L 396.22 133.53 L 396.01 136.20 L 395.66 138.85 L 395.17 141.48 L 394.55 144.08 L 393.79 146.65 L 392.90 149.17 L 391.87 151.64 L 390.72 154.05 L 389.45 156.40 L 388.05 158.68 L 386.53 160.89 L 384.91 163.01 L 383.17 165.04 L 381.33 166.98 L 211.05 337.26 L 209.11 339.10 L 207.08 340.84 L 204.95 342.47 L 202.75 343.98 L 200.47 345.38 L 198.12 346.66 L 195.71 347.81 L 193.24 348.83 L 190.71 349.72 L 188.15 350.48 L 185.55 351.11 L 182.92 351.59 L 180.27 351.94 L 177.60 352.15 L 174.93 352.22 L 172.25 352.15 L 169.59 351.94 L 166.94 351.59 L 164.31 351.11 L 161.71 350.48 L 159.14 349.72 L 156.62 348.83 L 154.15 347.81 L 151.74 346.66 L 149.39 345.38 L 147.11 343.98 L 144.90 342.47 L 142.78 340.84 L 140.75 339.10 L 138.81 337.26 L 138.81 337.26 L 381.33 94.74 L 383.17 96.68 Z' style='fill-rule: evenodd; fill: #C05621; fill-opacity: 0.25; stroke-width: 0.47; stroke: none; stroke-linecap: butt;' />
<polyline points='174.93,301.14 345.21,130.86 ' style='stroke-width: 3.20; stroke: #2D3748; stroke-linecap: butt;' />
<circle cx='316.57' cy='122.40' r='3.56' style='stroke-width: 0.71; stroke: none; stroke-linecap: butt; fill: #2B6CB0;' />
<circle cx='230.94' cy='136.93' r='3.56' style='stroke-width: 0.71; stroke: #2B6CB0; stroke-linecap: butt;' />
<circle cx='279.38' cy='179.34' r='3.56' style='stroke-width: 0.71; stroke: none; stroke-linecap: butt; fill: #2B6CB0;' />
<circle cx='292.30' cy='231.71' r='3.56' style='stroke-width: 0.71; stroke: none; stroke-linecap: butt; fill: #C05621;' />
<circle cx='281.45' cy='154.01' r='3.56' style='stroke-width: 0.71; stroke: none; stroke-linecap: butt; fill: #2B6CB0;' />
<circle cx='254.31' cy='152.10' r='3.56' style='stroke-width: 0.71; stroke: none; stroke-linecap: butt; fill: #2B6CB0;' />
<circle cx='319.28' cy='215.26' r='3.56' style='stroke-width: 0.71; stroke: none; stroke-linecap: butt; fill: #C05621;' />
<circle cx='254.93' cy='122.00' r='3.56' style='stroke-width: 0.71; stroke: #2B6CB0; stroke-linecap: butt;' />
<circle cx='325.21' cy='234.05' r='3.56' style='stroke-width: 0.71; stroke: #C05621; stroke-linecap: butt;' />
<circle cx='256.66' cy='173.73' r='3.56' style='stroke-width: 0.71; stroke: none; stroke-linecap: butt; fill: #2B6CB0;' />
<circle cx='315.11' cy='231.16' r='3.56' style='stroke-width: 0.71; stroke: none; stroke-linecap: butt; fill: #C05621;' />
<circle cx='326.67' cy='121.10' r='3.56' style='stroke-width: 0.71; stroke: none; stroke-linecap: butt; fill: #2B6CB0;' />
<circle cx='203.19' cy='180.01' r='3.56' style='stroke-width: 0.71; stroke: #2B6CB0; stroke-linecap: butt;' />
<circle cx='245.11' cy='126.67' r='3.56' style='stroke-width: 0.71; stroke: #2B6CB0; stroke-linecap: butt;' />
<circle cx='252.84' cy='136.17' r='3.56' style='stroke-width: 0.71; stroke: #2B6CB0; stroke-linecap: butt;' />
<circle cx='292.43' cy='207.68' r='3.56' style='stroke-width: 0.71; stroke: none; stroke-linecap: butt; fill: #C05621;' />
<circle cx='244.83' cy='224.83' r='3.56' style='stroke-width: 0.71; stroke: none; stroke-linecap: butt; fill: #2B6CB0;' />
<circle cx='192.49' cy='204.70' r='3.56' style='stroke-width: 0.71; stroke: #2B6CB0; stroke-linecap: butt;' />
<circle cx='192.96' cy='289.88' r='3.56' style='stroke-width: 0.71; stroke: none; stroke-linecap: butt; fill: #C05621;' />
<circle cx='315.46' cy='234.83' r='3.56' style='stroke-width: 0.71; stroke: #C05621; stroke-linecap: butt;' />
<circle cx='243.66' cy='258.81' r='3.56' style='stroke-width: 0.71; stroke: none; stroke-linecap: butt; fill: #C05621;' />
<circle cx='197.06' cy='185.55' r='3.56' style='stroke-width: 0.71; stroke: #2B6CB0; stroke-linecap: butt;' />
<circle cx='250.77' cy='187.72' r='3.56' style='stroke-width: 0.71; stroke: none; stroke-linecap: butt; fill: #2B6CB0;' />
<circle cx='312.89' cy='230.99' r='3.56' style='stroke-width: 0.71; stroke: none; stroke-linecap: butt; fill: #C05621;' />
<circle cx='324.22' cy='233.87' r='3.56' style='stroke-width: 0.71; stroke: #C05621; stroke-linecap: butt;' />
<circle cx='237.38' cy='270.93' r='3.56' style='stroke-width: 0.71; stroke: none; stroke-linecap: butt; fill: #C05621;' />
<circle cx='246.24' cy='211.27' r='3.56' style='stroke-width: 0.71; stroke: none; stroke-linecap: butt; fill: #2B6CB0;' />
<circle cx='197.26' cy='216.16' r='3.56' style='stroke-width: 0.71; stroke: none; stroke-linecap: butt; fill: #2B6CB0;' />
<circle cx='284.22' cy='294.84' r='3.56' style='stroke-width: 0.71; stroke: #C05621; stroke-linecap: butt;' />
<circle cx='227.52' cy='248.09' r='3.56' style='stroke-width: 0.71; stroke: none; stroke-linecap: butt; fill: #2B6CB0;' />
</g>
<g clip-path='url(#cpMC4wMHw1NzYuMDB8MC4wMHw0MzIuMDA=)'>
<rect x='471.77' y='160.75' width='50.20' height='51.65' style='stroke-width: 0.00; stroke: none;' /> fill: #F5F6F8;' />
<text x='471.77' y='170.60' style='font-size: 12.00px; font-weight: bold;fill: #2D3748; font-family: "Roboto", -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif;' textLength='25.33px' lengthAdjust='spacingAndGlyphs'>Side</text>
<rect x='471.77' y='177.84' width='17.28' height='17.28' style='stroke-width: 0.00; stroke: none;' /> fill: #F5F6F8;' />
<circle cx='480.41' cy='186.48' r='3.56' style='stroke-width: 0.71; stroke: #2B6CB0; fill: #2B6CB0;' />
<rect x='471.77' y='195.12' width='17.28' height='17.28' style='stroke-width: 0.00; stroke: none;' /> fill: #F5F6F8;' />
<circle cx='480.41' cy='203.76' r='3.56' style='stroke-width: 0.71; stroke: #C05621; fill: #C05621;' />
<text x='495.03' y='190.42' style='font-size: 11.00px;fill: #2D3748; font-family: "Roboto", -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif;' textLength='25.09px' lengthAdjust='spacingAndGlyphs'>north</text>
<text x='495.03' y='207.70' style='font-size: 11.00px;fill: #2D3748; font-family: "Roboto", -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif;' textLength='26.94px' lengthAdjust='spacingAndGlyphs'>south</text>
<rect x='471.77' y='219.60' width='47.10' height='51.65' style='stroke-width: 0.00; stroke: none;' /> fill: #F5F6F8;' />
<text x='471.77' y='229.46' style='font-size: 12.00px; font-weight: bold;fill: #2D3748; font-family: "Roboto", -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif;' textLength='32.02px' lengthAdjust='spacingAndGlyphs'>Class</text>
<rect x='471.77' y='236.69' width='17.28' height='17.28' style='stroke-width: 0.00; stroke: none;' /> fill: #F5F6F8;' />
<circle cx='480.41' cy='245.33' r='3.56' style='stroke-width: 0.71; stroke: none; fill: #000000;' />
<rect x='471.77' y='253.97' width='17.28' height='17.28' style='stroke-width: 0.00; stroke: none;' /> fill: #F5F6F8;' />
<circle cx='480.41' cy='262.61' r='3.56' style='stroke-width: 0.71;' />
<text x='495.03' y='249.27' style='font-size: 11.00px;fill: #2D3748; font-family: "Roboto", -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif;' textLength='23.84px' lengthAdjust='spacingAndGlyphs'>Core</text>
<text x='495.03' y='266.55' style='font-size: 11.00px;fill: #2D3748; font-family: "Roboto", -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif;' textLength='22.62px' lengthAdjust='spacingAndGlyphs'>Halo</text>
</g>
</g>
</svg></div><p class="caption">
Border classification. Points are classified by side (blue vs orange)
and distance (core vs halo) from the border line.
</p>
</div>
<p>The <code><a href="../reference/aoe_border.html">aoe_border()</a></code> function:</p>
<ul>
<li><p>Creates symmetric buffer zones on both sides of the
border</p></li>
<li><p>Classifies points as “core” (near border) or “halo” (farther
away)</p></li>
<li><p>Assigns each point to a side based on position relative to the
line</p></li>
</ul>
<div class="section level3">
<h3 id="area-based-border-zones">Area-Based Border Zones<a class="anchor" aria-label="anchor" href="#area-based-border-zones"></a>
</h3>
<p>Use the <code>area</code> parameter to specify target zone areas
instead of fixed widths:</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Each side's core zone has area 5000 (in CRS units²)</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe_border.html">aoe_border</a></span><span class="op">(</span><span class="va">pts</span>, <span class="va">border</span>, area <span class="op">=</span> <span class="fl">5000</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="sampling-from-border-results">Sampling from Border Results<a class="anchor" aria-label="anchor" href="#sampling-from-border-results"></a>
</h3>
<p><code><a href="../reference/aoe_sample.html">aoe_sample()</a></code> also works with border results, allowing
stratification by side or class:</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Balance by side (equal north/south)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span></span>
<span><span class="va">balanced_side</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe_sample.html">aoe_sample</a></span><span class="op">(</span><span class="va">result_border</span>, ratio <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>north <span class="op">=</span> <span class="fl">0.5</span>, south <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">balanced_side</span><span class="op">$</span><span class="va">side</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; north south </span></span>
<span><span class="co">#&gt;    12    12</span></span>
<span></span>
<span><span class="co"># Balance by distance class</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span></span>
<span><span class="va">balanced_class</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aoe_sample.html">aoe_sample</a></span><span class="op">(</span><span class="va">result_border</span>, by <span class="op">=</span> <span class="st">"class"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">balanced_class</span><span class="op">$</span><span class="va">aoe_class</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; core halo </span></span>
<span><span class="co">#&gt;   11   11</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="diagnostics">Diagnostics<a class="anchor" aria-label="anchor" href="#diagnostics"></a>
</h2>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/aoe_summary.html">aoe_summary</a></span><span class="op">(</span><span class="va">result</span><span class="op">)</span></span>
<span><span class="co">#&gt;   support_id n_total n_core n_halo prop_core prop_halo</span></span>
<span><span class="co">#&gt; 1          1       4      3      1      0.75      0.25</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="summary">Summary<a class="anchor" aria-label="anchor" href="#summary"></a>
</h2>
<ul>
<li><p><code><a href="../reference/aoe.html">aoe()</a></code> classifies points as “core” or “halo”</p></li>
<li><p>Works with dataframes or sf objects</p></li>
<li><p>Pass country codes directly: <code>aoe(df, "AT")</code></p></li>
<li><p>Area-based halos enable consistent cross-country
comparisons</p></li>
<li><p>Use <code>mask</code> for coastlines and hard boundaries</p></li>
<li><p>Use <code>area</code> parameter for target halo area (accounts
for masking)</p></li>
<li><p>Use <code><a href="../reference/aoe_expand.html">aoe_expand()</a></code> for adaptive expansion to capture
minimum points</p></li>
<li><p>Use <code><a href="../reference/aoe_sample.html">aoe_sample()</a></code> for balanced core/halo
sampling</p></li>
<li><p>Use <code><a href="../reference/aoe_border.html">aoe_border()</a></code> for border/line-based
classification</p></li>
<li><p>Use <code><a href="../reference/aoe_summary.html">aoe_summary()</a></code> for diagnostics</p></li>
</ul>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Gilles Colling.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  
<script>
/* SVG Copy Button Functionality */
(function() {
  "use strict";

  // Initialize SVG copy buttons after DOM is ready
  document.addEventListener("DOMContentLoaded", function() {
    if (typeof ClipboardJS === "undefined") {
      console.warn("ClipboardJS not loaded - SVG copy buttons disabled");
      return;
    }

    // Initialize clipboard for SVG copy buttons
    var svgClipboard = new ClipboardJS(".btn-copy-svg", {
      text: function(trigger) {
        var container = trigger.closest(".svg-container");
        if (!container) return "";

        var svg = container.querySelector("svg");
        if (!svg) return "";

        // Clone SVG to avoid modifying the original
        var clone = svg.cloneNode(true);

        // Remove inline-svg class (not needed in copied version)
        clone.classList.remove("inline-svg");

        // Add XML declaration and serialize
        var serializer = new XMLSerializer();
        var svgString = serializer.serializeToString(clone);

        // Add XML declaration if not present
        if (!svgString.startsWith("<?xml")) {
          svgString = '<?xml version="1.0" encoding="UTF-8"?>\n' + svgString;
        }

        return svgString;
      }
    });

    // Handle success
    svgClipboard.on("success", function(e) {
      var btn = e.trigger;
      var originalTitle = btn.getAttribute("data-bs-original-title") || btn.getAttribute("title");

      // Update tooltip to show "Copied!"
      btn.setAttribute("data-bs-original-title", "Copied!");
      var tooltip = bootstrap.Tooltip.getInstance(btn);
      if (tooltip) {
        tooltip.show();
      }

      // Reset after delay
      setTimeout(function() {
        btn.setAttribute("data-bs-original-title", originalTitle);
      }, 1500);

      e.clearSelection();
    });

    // Handle error
    svgClipboard.on("error", function(e) {
      var btn = e.trigger;
      btn.setAttribute("data-bs-original-title", "Press Ctrl+C to copy");
      var tooltip = bootstrap.Tooltip.getInstance(btn);
      if (tooltip) {
        tooltip.show();
      }
    });

    // Initialize tooltips for SVG copy buttons
    var svgCopyButtons = document.querySelectorAll(".btn-copy-svg");
    svgCopyButtons.forEach(function(btn) {
      new bootstrap.Tooltip(btn, { container: "body" });
    });
  });
})();
</script>
</body>
</html>
