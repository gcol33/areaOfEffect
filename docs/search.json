[{"path":"https://gillescolling.com/areaOfEffect/articles/quickstart.html","id":"overview","dir":"Articles","previous_headings":"","what":"Overview","title":"Getting Started with areaOfEffect","text":"areaOfEffect package addresses common problem spatial ecology: political borders ecological boundaries. sampling within defined region (e.g., country protected area), observations near border influenced conditions outside region. Simply cropping data administrative boundaries introduces edge effects. area effect (AoE) correction expands spatial support outward, classifying points : Core: inside original support (fully representative) Halo: outside original inside expanded AoE (influenced external conditions) Pruned: outside AoE entirely (removed)","code":""},{"path":"https://gillescolling.com/areaOfEffect/articles/quickstart.html","id":"basic-usage","dir":"Articles","previous_headings":"","what":"Basic Usage","title":"Getting Started with areaOfEffect","text":"Create simple support polygon: Create observation points: Apply area effect: result contains points inside AoE, classification:","code":"library(areaOfEffect) library(sf) #> Linking to GEOS 3.13.1, GDAL 3.11.4, PROJ 9.7.0; sf_use_s2() is TRUE support <- st_as_sf(   data.frame(id = 1),   geometry = st_sfc(st_polygon(list(     cbind(c(0, 100, 100, 0, 0), c(0, 0, 100, 100, 0))   ))),   crs = 32631 ) pts <- st_as_sf(   data.frame(     id = 1:5,     value = c(10, 20, 15, 25, 30)   ),   geometry = st_sfc(     st_point(c(50, 50)),   # center     st_point(c(10, 10)),   # near corner     st_point(c(95, 50)),   # near edge     st_point(c(120, 50)),  # outside, in halo     st_point(c(250, 250))  # far outside   ),   crs = 32631 ) result <- aoe(pts, support) print(result) #> Area of Effect Result #> ───────────────────── #> Points:   4 (3 core, 1 halo) #> Supports: 1 #> Scale:    0.414 (multiplier 1.41, theoretical halo:core 1.00) #>  #> Simple feature collection with 4 features and 5 fields #> Geometry type: POINT #> Dimension:     XY #> Bounding box:  xmin: 10 ymin: 10 xmax: 120 ymax: 50 #> Projected CRS: WGS 84 / UTM zone 31N #>   point_id support_id aoe_class id value       geometry #> 1        1          1      core  1    10  POINT (50 50) #> 2        2          1      core  2    20  POINT (10 10) #> 3        3          1      core  3    15  POINT (95 50) #> 4        4          1      halo  4    25 POINT (120 50) result$aoe_class #> [1] \"core\" \"core\" \"core\" \"halo\""},{"path":"https://gillescolling.com/areaOfEffect/articles/quickstart.html","id":"understanding-the-transformation","dir":"Articles","previous_headings":"","what":"Understanding the Transformation","title":"Getting Started with areaOfEffect","text":"AoE constructed scaling support geometry outward reference point (default, centroid). fixed scale = 1, boundary vertex moved twice distance reference: p′=r+2(p−r)p' = r + 2(p - r) rr reference point pp boundary vertex. doubles effective spatial extent maintaining shape orientation original support.","code":""},{"path":"https://gillescolling.com/areaOfEffect/articles/quickstart.html","id":"multiple-supports","dir":"Articles","previous_headings":"","what":"Multiple Supports","title":"Getting Started with areaOfEffect","text":"working multiple administrative regions, can process : Points can appear multiple times (per support whose AoE contains ). support_id column indicates support classification refers .","code":"# Two adjacent regions supports <- st_as_sf(   data.frame(region = c(\"A\", \"B\")),   geometry = st_sfc(     st_polygon(list(cbind(c(0, 50, 50, 0, 0), c(0, 0, 100, 100, 0)))),     st_polygon(list(cbind(c(50, 100, 100, 50, 50), c(0, 0, 100, 100, 0))))   ),   crs = 32631 )  # Points that may fall in overlapping AoEs pts_multi <- st_as_sf(   data.frame(id = 1:3),   geometry = st_sfc(     st_point(c(25, 50)),   # inside A     st_point(c(50, 50)),   # on boundary     st_point(c(75, 50))    # inside B   ),   crs = 32631 )  result_multi <- aoe(pts_multi, supports) print(result_multi) #> Area of Effect Result #> ───────────────────── #> Points:   4 (4 core, 0 halo) #> Supports: 2 #> Scale:    0.414 (multiplier 1.41, theoretical halo:core 1.00) #>  #> Simple feature collection with 4 features and 4 fields #> Geometry type: POINT #> Dimension:     XY #> Bounding box:  xmin: 25 ymin: 50 xmax: 75 ymax: 50 #> Projected CRS: WGS 84 / UTM zone 31N #>   point_id support_id aoe_class id      geometry #> 1        1          1      core  1 POINT (25 50) #> 2        2          1      core  2 POINT (50 50) #> 3        2          2      core  2 POINT (50 50) #> 4        3          2      core  3 POINT (75 50)"},{"path":"https://gillescolling.com/areaOfEffect/articles/quickstart.html","id":"diagnostic-summary","dir":"Articles","previous_headings":"","what":"Diagnostic Summary","title":"Getting Started with areaOfEffect","text":"Use aoe_summary() get statistics support: returns counts proportions core vs halo points per support.","code":"aoe_summary(result) #>   support_id n_total n_core n_halo prop_core prop_halo #> 1          1       4      3      1      0.75      0.25"},{"path":"https://gillescolling.com/areaOfEffect/articles/quickstart.html","id":"using-a-mask","dir":"Articles","previous_headings":"","what":"Using a Mask","title":"Getting Started with areaOfEffect","text":"coastal regions, sea hard boundary crossed. Provide mask constrain AoE:","code":"# Land polygon (excludes sea) land <- st_read(\"path/to/land.shp\")  # AoE will be intersected with land result <- aoe(pts, support, mask = land)"},{"path":"https://gillescolling.com/areaOfEffect/articles/quickstart.html","id":"custom-reference-point","dir":"Articles","previous_headings":"","what":"Custom Reference Point","title":"Getting Started with areaOfEffect","text":"default, centroid support used reference point. single-support cases, can specify different reference: Note: custom reference allowed support single row. multiple supports, uses centroid.","code":"# Reference at origin corner ref <- st_as_sf(   data.frame(id = 1),   geometry = st_sfc(st_point(c(0, 0))),   crs = 32631 )  result_custom <- aoe(pts, support, reference = ref)"},{"path":"https://gillescolling.com/areaOfEffect/articles/quickstart.html","id":"accessing-metadata","dir":"Articles","previous_headings":"","what":"Accessing Metadata","title":"Getting Started with areaOfEffect","text":"result includes attributes metadata:","code":"# Scale used (always 1) attr(result, \"scale\") #> NULL"},{"path":"https://gillescolling.com/areaOfEffect/articles/quickstart.html","id":"why-fixed-scale","dir":"Articles","previous_headings":"","what":"Why Fixed Scale?","title":"Getting Started with areaOfEffect","text":"scale fixed 1 ensure: Reproducibility: analyses use definition Comparability: Results across studies directly comparable Interpretability: “applied AoE correction” unambiguous need explore different scales, functionality belongs separate analysis code, core AoE operator.","code":""},{"path":"https://gillescolling.com/areaOfEffect/articles/quickstart.html","id":"summary","dir":"Articles","previous_headings":"","what":"Summary","title":"Getting Started with areaOfEffect","text":"aoe() classifies points “core” “halo” based position relative original expanded support Multiple supports can processed (long format output) Points outside AoE automatically pruned Sea hard boundaries can enforced via mask argument Scale fixed 1 methodological consistency Use aoe_summary() diagnostic statistics","code":""},{"path":"https://gillescolling.com/areaOfEffect/articles/theory.html","id":"the-problem-border-truncation","dir":"Articles","previous_headings":"","what":"The Problem: Border Truncation","title":"The Area of Effect Concept","text":"analyzing spatial data within political administrative boundaries, fundamental assumption often violated: sampling region represents ecological extent processes studied. Consider sampling species occurrences within country. Observations near border influenced conditions outside country. forest spans border, river crosses , simply continuous nature climate habitat means truncating border introduces systematic bias. border truncation: artificial constraint ecological processes administrative boundaries.","code":""},{"path":"https://gillescolling.com/areaOfEffect/articles/theory.html","id":"what-aoe-is-not","dir":"Articles","previous_headings":"","what":"What AoE Is Not","title":"The Area of Effect Concept","text":"explaining AoE , ’s important clarify : - buffer: Buffers add fixed distance. AoE scales proportionally reference point. - distance-based operation: distance threshold decay function. - tunable parameter: Scale fixed 1. method, knob.","code":""},{"path":"https://gillescolling.com/areaOfEffect/articles/theory.html","id":"the-area-of-effect","dir":"Articles","previous_headings":"","what":"The Area of Effect","title":"The Area of Effect Concept","text":"area effect (AoE) spatial extent observations within support influenced external conditions. computed scaling support geometry outward reference point (typically centroid). scale fixed 1, transformation : p′=r+2(p−r)p' = r + 2(p - r) : - rr reference point (centroid) - pp vertex support boundary - p′p' transformed vertex doubles distance reference point boundary vertex, effectively expanding support twice spatial extent preserving shape orientation.","code":""},{"path":"https://gillescolling.com/areaOfEffect/articles/theory.html","id":"core-and-halo-classification","dir":"Articles","previous_headings":"","what":"Core and Halo Classification","title":"The Area of Effect Concept","text":"Points within AoE classified two categories: Core: Points inside original support. fully contained within sampling region represent “pure” observations unaffected border effects. Halo: Points outside original support inside expanded AoE. observations influenced conditions border zone may require different treatment analysis. Points outside AoE pruned (removed). distant meaningfully related support region. Point classification AoE. Core points (green) inside original support. Halo points (orange) expanded region. Points outside AoE pruned.","code":"#> Linking to GEOS 3.13.1, GDAL 3.11.4, PROJ 9.7.0; sf_use_s2() is TRUE"},{"path":"https://gillescolling.com/areaOfEffect/articles/theory.html","id":"the-scale-parameter","dir":"Articles","previous_headings":"","what":"The Scale Parameter","title":"The Area of Effect Concept","text":"scale parameter controls far AoE extends beyond original support. scale s, linear multiplier 1 + s, area multiplier (1 + s)². Two values special geometric meaning: sqrt(2) - 1 ≈ 0.414 (default): Equal core halo areas 1: Equal linear distance inside outside boundary","code":""},{"path":"https://gillescolling.com/areaOfEffect/articles/theory.html","id":"why-equal-area-is-the-default","dir":"Articles","previous_headings":"","what":"Why Equal Area is the Default","title":"The Area of Effect Concept","text":"default scale produces equal core halo areas. arbitrary—reflects philosophical position “influence” means.","code":""},{"path":"https://gillescolling.com/areaOfEffect/articles/theory.html","id":"the-symmetry-argument","dir":"Articles","previous_headings":"Why Equal Area is the Default","what":"The Symmetry Argument","title":"The Area of Effect Concept","text":"say point halo “influenced ” support region, ’re making claim spatial relevance. question : much relevance grant outside? Equal area says: outside matters much inside. maximally symmetric choice. ratio implies either: - core important halo (halo smaller), - External conditions dominate internal ones (halo larger) Without domain-specific knowledge justify asymmetry, equal weighting principled default.","code":""},{"path":"https://gillescolling.com/areaOfEffect/articles/theory.html","id":"the-information-theoretic-view","dir":"Articles","previous_headings":"Why Equal Area is the Default","what":"The Information-Theoretic View","title":"The Area of Effect Concept","text":"Consider AoE defining probability distribution space: “might conditions relevant support come ?” Equal areas means equal prior probability mass inside outside original boundary. maximum-entropy choice—encodes bias toward internal external dominance. Scale = 1 (“one full stamp” expansion) gives 1:3 ratio, implying outside three times relevant inside. may appropriate analyses (e.g., highly mobile species), ’s strong assumption make default.","code":""},{"path":"https://gillescolling.com/areaOfEffect/articles/theory.html","id":"the-geometric-inevitability","dir":"Articles","previous_headings":"Why Equal Area is the Default","what":"The Geometric Inevitability","title":"The Area of Effect Concept","text":"formula s = √2 - 1 tuned parameter. ’s unique solution constraint “core equals halo.” value emerges geometry : (1+s)2−1=1⟹s=2−1 (1 + s)^2 - 1 = 1 \\implies s = \\sqrt{2} - 1 ’s something satisfying default isn’t chosen derived. removes degree freedom analyst replaces principled constraint.","code":""},{"path":"https://gillescolling.com/areaOfEffect/articles/theory.html","id":"when-to-override","dir":"Articles","previous_headings":"Why Equal Area is the Default","what":"When to Override","title":"The Area of Effect Concept","text":"Use scale = 1 : - want classic “one full stamp” expansion - domain knowledge suggests external conditions dominate - ’re comparing previous work used convention Use custom scales : - empirical data influence decay - Sensitivity analysis requires exploring parameter space - Domain expertise justifies specific ratio","code":""},{"path":"https://gillescolling.com/areaOfEffect/articles/theory.html","id":"hard-vs-soft-boundaries","dir":"Articles","previous_headings":"","what":"Hard vs Soft Boundaries","title":"The Area of Effect Concept","text":"AoE distinguishes two types boundaries: Political borders (soft): Administrative lines ecological meaning. AoE freely crosses . country border stop species dispersing climate varying. Sea boundaries (hard): Physical barriers like coastlines true boundaries. optional mask argument enforces constraints intersecting AoE land polygon. Hard boundaries constrain AoE. dashed line shows theoretical AoE; solid gray area shows AoE applying land mask.","code":""},{"path":"https://gillescolling.com/areaOfEffect/articles/theory.html","id":"multiple-supports","dir":"Articles","previous_headings":"","what":"Multiple Supports","title":"The Area of Effect Concept","text":"Real-world analyses often involve multiple administrative regions (countries, provinces, protected areas). AoE handles naturally: support processed independently uses centroid reference Points can fall within multiple AoEs (regions adjacent) Output long format: one row per point-support combination enables cross-border analyses studies nested administrative structures without repeated preprocessing.","code":""},{"path":"https://gillescolling.com/areaOfEffect/articles/theory.html","id":"summary","dir":"Articles","previous_headings":"","what":"Summary","title":"The Area of Effect Concept","text":"area effect provides principled correction border truncation spatial analysis: Principled default: Scale = √2 − 1, giving equal core halo areas Geometric derivation: default emerges symmetry, tuning Categorical output: Core, halo, pruned Soft/hard boundaries: Political borders ignored, physical barriers respected Multiple supports: Process many regions result reproducible, interpretable method can consistently applied across studies.","code":""},{"path":"https://gillescolling.com/areaOfEffect/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Gilles Colling. Author, maintainer, copyright holder.","code":""},{"path":"https://gillescolling.com/areaOfEffect/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Colling G (2026). areaOfEffect: Spatial Support Scale. R package version 0.1.0, https://gillescolling.com/areaOfEffect/.","code":"@Manual{,   title = {areaOfEffect: Spatial Support at Scale},   author = {Gilles Colling},   year = {2026},   note = {R package version 0.1.0},   url = {https://gillescolling.com/areaOfEffect/}, }"},{"path":[]},{"path":"https://gillescolling.com/areaOfEffect/CODE_OF_CONDUCT.html","id":"our-pledge","dir":"","previous_headings":"","what":"Our Pledge","title":"Code of Conduct","text":"aim maintain open, friendly, professional environment within areaOfEffect project. Everyone taking part (contributors, maintainers, users) feel welcome respected, regardless background, identity, experience level.","code":""},{"path":"https://gillescolling.com/areaOfEffect/CODE_OF_CONDUCT.html","id":"our-standards","dir":"","previous_headings":"","what":"Our Standards","title":"Code of Conduct","text":"Examples behavior helps create good environment: Communicating clearly respectfully open different opinions approaches Offering constructive feedback Helping others learn contribute Staying focused collaboration shared goals Examples behavior acceptable: Personal attacks insulting language Disrespectful dismissive comments Sharing private information without consent form harassment hostility toward others","code":""},{"path":"https://gillescolling.com/areaOfEffect/CODE_OF_CONDUCT.html","id":"responsibilities","dir":"","previous_headings":"","what":"Responsibilities","title":"Code of Conduct","text":"Project maintainers responsible clarifying standards acceptable behavior taking fair action necessary. may edit, remove, reject contributions violate Code Conduct disrupt collaboration.","code":""},{"path":"https://gillescolling.com/areaOfEffect/CODE_OF_CONDUCT.html","id":"scope","dir":"","previous_headings":"","what":"Scope","title":"Code of Conduct","text":"Code Conduct applies project spaces, including discussions, issues, pull requests, community interactions related areaOfEffect.","code":""},{"path":"https://gillescolling.com/areaOfEffect/CODE_OF_CONDUCT.html","id":"enforcement","dir":"","previous_headings":"","what":"Enforcement","title":"Code of Conduct","text":"experience witness behavior violates Code Conduct, please contact maintainer privately. Reports handled discretion, maintainers take appropriate action needed.","code":""},{"path":"https://gillescolling.com/areaOfEffect/CODE_OF_CONDUCT.html","id":"attribution","dir":"","previous_headings":"","what":"Attribution","title":"Code of Conduct","text":"Code Conduct adapted Contributor Covenant, version 2.1, simplified better fit tone open scientific software project. Contact: gilles.colling051@gmail.com","code":""},{"path":"https://gillescolling.com/areaOfEffect/CONTRIBUTING.html","id":null,"dir":"","previous_headings":"","what":"Contribution Guidelines","title":"Contribution Guidelines","text":"First , thank much taking time contribute areaOfEffect project! document provides guidelines contributing areaOfEffect—codebase documentation. guidelines meant guide , restrict . doubt, use best judgment feel free propose improvements issue pull request.","code":""},{"path":"https://gillescolling.com/areaOfEffect/CONTRIBUTING.html","id":"table-of-contents","dir":"","previous_headings":"","what":"Table Of Contents","title":"Contribution Guidelines","text":"Code Conduct Obtaining source Setting R environment Installing source Testing Install dependencies Building documentation Design docs Project organization Contributing workflow Style guidelines Pull request checklist Reporting bugs","code":""},{"path":"https://gillescolling.com/areaOfEffect/CONTRIBUTING.html","id":"code-of-conduct","dir":"","previous_headings":"","what":"Code of Conduct","title":"Contribution Guidelines","text":"project everyone participating governed Code Conduct (CODE_OF_CONDUCT.md). participating, expected uphold code maintain respectful, inclusive environment.","code":""},{"path":"https://gillescolling.com/areaOfEffect/CONTRIBUTING.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Contribution Guidelines","text":"installation guide focused development. regular installation, please see README.","code":""},{"path":"https://gillescolling.com/areaOfEffect/CONTRIBUTING.html","id":"obtaining-the-source","dir":"","previous_headings":"Installation","what":"Obtaining the source","title":"Contribution Guidelines","text":"Clone areaOfEffect repository: work development branch:","code":"git clone https://github.com/gcol33/areaOfEffect.git cd areaOfEffect git checkout dev git pull origin dev"},{"path":"https://gillescolling.com/areaOfEffect/CONTRIBUTING.html","id":"setting-up-your-r-environment","dir":"","previous_headings":"Installation","what":"Setting up your R environment","title":"Contribution Guidelines","text":"areaOfEffect R package depends sf package spatial operations. Install required tools R (>= 4.0) Git editor IDE (RStudio, VS Code, etc.) Install development dependencies Load development build","code":"install.packages(c(\"devtools\", \"roxygen2\", \"testthat\", \"rmarkdown\", \"knitr\", \"pkgdown\", \"sf\")) devtools::load_all()"},{"path":"https://gillescolling.com/areaOfEffect/CONTRIBUTING.html","id":"installing-from-source","dir":"","previous_headings":"Installation","what":"Installing from source","title":"Contribution Guidelines","text":"Build install package locally: Regenerate documentation :","code":"devtools::install() devtools::document()"},{"path":"https://gillescolling.com/areaOfEffect/CONTRIBUTING.html","id":"testing","dir":"","previous_headings":"","what":"Testing","title":"Contribution Guidelines","text":"areaOfEffect uses testthat testing. tests located tests/testthat/. Run full test suite: Run complete package check: Run subset tests development: Guidelines: - Keep tests fast reproducible. - Use set.seed() random data. - Include edge cases expected failures. - Prefer small examples large datasets.","code":"devtools::test() devtools::check() testthat::test_dir(\"tests/testthat\") testthat::test_file(\"tests/testthat/test-aoe.R\")"},{"path":[]},{"path":"https://gillescolling.com/areaOfEffect/CONTRIBUTING.html","id":"install-dependencies","dir":"","previous_headings":"Documentation","what":"Install dependencies","title":"Contribution Guidelines","text":"","code":"install.packages(c(\"rmarkdown\", \"knitr\", \"pkgdown\"))"},{"path":"https://gillescolling.com/areaOfEffect/CONTRIBUTING.html","id":"building-the-documentation","dir":"","previous_headings":"Documentation","what":"Building the documentation","title":"Contribution Guidelines","text":"Build vignettes: Build pkgdown site locally: generated site saved docs/ directory. Open docs/index.html browser view .","code":"devtools::build_vignettes() pkgdown::build_site()"},{"path":"https://gillescolling.com/areaOfEffect/CONTRIBUTING.html","id":"design-of-the-docs","dir":"","previous_headings":"Documentation","what":"Design of the docs","title":"Contribution Guidelines","text":"Function documentation: man/ (generated roxygen2) Tutorials examples: vignettes/ Website configuration: _pkgdown.yml Package overview: README.md Changelog: NEWS.md","code":""},{"path":"https://gillescolling.com/areaOfEffect/CONTRIBUTING.html","id":"project-organization","dir":"","previous_headings":"","what":"Project organization","title":"Contribution Guidelines","text":"","code":"areaOfEffect/ ├── .github/                <- Continuous integration workflows ├── .gitignore ├── .Rbuildignore ├── areaOfEffect.Rproj ├── DESCRIPTION             <- Package metadata ├── NAMESPACE               <- Function exports and imports ├── LICENSE ├── LICENSE.md ├── NEWS.md ├── README.md ├── _pkgdown.yml ├── R/                      <- R source files ├── man/                    <- Generated documentation ├── vignettes/              <- Long-form documentation and usage examples ├── tests/ │   └── testthat/           <- Unit tests ├── docs/                   <- pkgdown website (generated) └── areaOfEffect.Rcheck/    <- Artifacts from local package checks (ignored)"},{"path":"https://gillescolling.com/areaOfEffect/CONTRIBUTING.html","id":"contributing-workflow","dir":"","previous_headings":"","what":"Contributing workflow","title":"Contribution Guidelines","text":"Create feature branch Make focused commits clear messages. Run tests checks committing: Update documentation roxygen2 NEWS.md. Update vignettes/examples user-facing behavior changes. Open pull request short description change. Respond review feedback constructively.","code":"git checkout -b feature/my-feature devtools::test() devtools::check()"},{"path":[]},{"path":"https://gillescolling.com/areaOfEffect/CONTRIBUTING.html","id":"r-code","dir":"","previous_headings":"Style guidelines","what":"R code","title":"Contribution Guidelines","text":"Use descriptive names consistent indentation. Prefer vectorized operations loops. Validate inputs early clear error messages. Document exported functions roxygen2.","code":""},{"path":"https://gillescolling.com/areaOfEffect/CONTRIBUTING.html","id":"tests","dir":"","previous_headings":"Style guidelines","what":"Tests","title":"Contribution Guidelines","text":"Add update tests functionality changes. Keep tests minimal reproducible. Avoid external dependencies unless essential.","code":""},{"path":"https://gillescolling.com/areaOfEffect/CONTRIBUTING.html","id":"pull-request-checklist","dir":"","previous_headings":"","what":"Pull request checklist","title":"Contribution Guidelines","text":"Tests pass (devtools::test() devtools::check()) Documentation updated (roxygen + NEWS.md) Vignettes/examples updated needed unrelated formatting changes PR description clearly explains change","code":""},{"path":"https://gillescolling.com/areaOfEffect/CONTRIBUTING.html","id":"reporting-bugs","dir":"","previous_headings":"","what":"Reporting bugs","title":"Contribution Guidelines","text":"reporting issue, please include: - minimal reproducible example (reprex) - Output sessionInfo() - Expected vs. actual results - R operating system version contributing areaOfEffect, agree code released license package.","code":""},{"path":[]},{"path":"https://gillescolling.com/areaOfEffect/IMPLEMENTATION_PLAN.html","id":"overview","dir":"","previous_headings":"","what":"Overview","title":"areaOfEffect Implementation Plan","text":"plan outlines improvements areaOfEffect package, focusing : 1. Better output structure (S3 class methods) 2. Geometry access (aoe_geometry()) 3. ID preservation 4. Diagnostic helpers (aoe_area()) 5. Visualization (plot() method) changes maintain backwards compatibility existing API.","code":""},{"path":[]},{"path":"https://gillescolling.com/areaOfEffect/IMPLEMENTATION_PLAN.html","id":"id_11-create-aoe_result-s3-class","dir":"","previous_headings":"Phase 1: S3 Class Infrastructure","what":"1.1 Create aoe_result S3 class","title":"areaOfEffect Implementation Plan","text":"File: R/aoe_class.R Attributes stored: - aoe_geometries: list sf objects (original support, AoE, masked AoE per support) - aoe_scale: numeric (always 1) - aoe_n_supports: integer","code":"# Constructor (internal) new_aoe_result <- function(points, geometries, scale, n_supports) {    structure(      points,     class = c(\"aoe_result\", \"sf\", \"data.frame\"), +    aoe_geometries = geometries,     aoe_scale = scale,     aoe_n_supports = n_supports   ) }"},{"path":"https://gillescolling.com/areaOfEffect/IMPLEMENTATION_PLAN.html","id":"id_12-modify-aoe-to-return-aoe_result","dir":"","previous_headings":"Phase 1: S3 Class Infrastructure","what":"1.2 Modify aoe() to return aoe_result","title":"areaOfEffect Implementation Plan","text":"Changes R/aoe.R: Collect geometries processing: Wrap result new_aoe_result() Add point_id column preserving original row identifiers Column structure change: | Column | Description | |——–|————-| | point_id | Original point identifier (row name index) | | support_id | support classification refers | | aoe_class | “core” “halo” | | geometry | Point geometry (sf) | | (original columns) | columns input points |","code":"# In process_single_support(), also return: # - original support geometry # - scaled AoE geometry (before mask) # - final AoE geometry (after mask, if applicable)"},{"path":[]},{"path":"https://gillescolling.com/areaOfEffect/IMPLEMENTATION_PLAN.html","id":"id_21-printaoe_result","dir":"","previous_headings":"Phase 2: Print Method","what":"2.1 print.aoe_result()","title":"areaOfEffect Implementation Plan","text":"File: R/aoe_class.R Example output:","code":"#' @export print.aoe_result <- function(x, ...) {   n_points <- nrow(x)   n_supports <- attr(x, \"aoe_n_supports\")   n_core <- sum(x$aoe_class == \"core\")   n_halo <- sum(x$aoe_class == \"halo\")     cat(\"Area of Effect Result\\n\")   cat(\"─────────────────────\\n\")   cat(sprintf(\"Points:   %d (%d core, %d halo)\\n\", n_points, n_core, n_halo))   cat(sprintf(\"Supports: %d\\n\", n_supports))   cat(sprintf(\"Scale:    %d (fixed)\\n\", attr(x, \"aoe_scale\")))   cat(\"\\n\")    # Print first few rows as sf   NextMethod() } Area of Effect Result ───────────────────── Points:   847 (612 core, 235 halo) Supports: 3 Scale:    1 (fixed)  Simple feature collection with 847 features and 4 fields Geometry type: POINT ..."},{"path":[]},{"path":"https://gillescolling.com/areaOfEffect/IMPLEMENTATION_PLAN.html","id":"id_31-enhance-aoe_summary--summaryaoe_result","dir":"","previous_headings":"Phase 3: Summary Method","what":"3.1 Enhance aoe_summary() → summary.aoe_result()","title":"areaOfEffect Implementation Plan","text":"File: R/aoe_class.R Keep aoe_summary() standalone function, also register S3 method. Example output:","code":"#' @export summary.aoe_result <- function(object, ...) {   # Return aoe_summary_result S3 class   result <- aoe_summary(object)   class(result) <- c(\"aoe_summary_result\", \"data.frame\")    # Add area information if geometries available   geoms <- attr(object, \"aoe_geometries\")   if (!is.null(geoms)) {     result$area_original <- vapply(geoms, function(g) {       as.numeric(sf::st_area(g$original))     }, numeric(1))     result$area_aoe <- vapply(geoms, function(g) {       as.numeric(sf::st_area(g$aoe_final))     }, numeric(1))     result$area_ratio <- result$area_aoe / result$area_original   }    result }  #' @export print.aoe_summary_result <- function(x, ...) {   cat(\"Area of Effect Summary\\n\")   cat(\"──────────────────────\\n\\n\")    # Format nicely   print.data.frame(x, row.names = FALSE) } Area of Effect Summary ──────────────────────   support_id n_total n_core n_halo prop_core prop_halo  area_original     area_aoe area_ratio           A     312    245     67      0.79      0.21   1.234e+10     4.936e+10       4.00           B     298    201     97      0.67      0.33   8.921e+09     3.568e+10       4.00           C     237    166     71      0.70      0.30   5.443e+09     2.177e+10       4.00"},{"path":[]},{"path":"https://gillescolling.com/areaOfEffect/IMPLEMENTATION_PLAN.html","id":"id_41-aoe_geometry-function","dir":"","previous_headings":"Phase 4: Geometry Access","what":"4.1 aoe_geometry() function","title":"areaOfEffect Implementation Plan","text":"File: R/aoe_geometry.R Usage:","code":"#' Extract AoE Geometries #' #' @param x An `aoe_result` object #' @param which Which geometry to extract: \"original\", \"aoe\", or \"both\" #' @param support_id Optional: filter to specific support(s) #' #' @return An sf object with polygon geometries #' @export aoe_geometry <- function(x, which = c(\"aoe\", \"original\", \"both\"),                          support_id = NULL) {   which <- match.arg(which)   geoms <- attr(x, \"aoe_geometries\")    if (is.null(geoms)) {     stop(\"No geometries stored. Rerun aoe() with store_geometry = TRUE\",          call. = FALSE)   }    # Filter by support_id if specified   if (!is.null(support_id)) {     geoms <- geoms[names(geoms) %in% as.character(support_id)]   }    # Extract requested geometries   result <- switch(which,     \"original\" = do.call(rbind, lapply(names(geoms), function(sid) {       sf::st_sf(         support_id = sid,         type = \"original\",         geometry = geoms[[sid]]$original       )     })),     \"aoe\" = do.call(rbind, lapply(names(geoms), function(sid) {       sf::st_sf(         support_id = sid,         type = \"aoe\",         geometry = geoms[[sid]]$aoe_final       )     })),     \"both\" = do.call(rbind, lapply(names(geoms), function(sid) {       rbind(         sf::st_sf(support_id = sid, type = \"original\",                   geometry = geoms[[sid]]$original),         sf::st_sf(support_id = sid, type = \"aoe\",                   geometry = geoms[[sid]]$aoe_final)       )     }))   )    result } result <- aoe(pts, supports)  # Get AoE polygons aoe_polys <- aoe_geometry(result, \"aoe\")  # Get both for comparison both <- aoe_geometry(result, \"both\")  # Filter to one support region_a <- aoe_geometry(result, \"aoe\", support_id = \"A\")"},{"path":[]},{"path":"https://gillescolling.com/areaOfEffect/IMPLEMENTATION_PLAN.html","id":"id_51-plotaoe_result","dir":"","previous_headings":"Phase 5: Plot Method","what":"5.1 plot.aoe_result()","title":"areaOfEffect Implementation Plan","text":"File: R/aoe_class.R Usage:","code":"#' @export plot.aoe_result <- function(x,                             support_id = NULL,                             show_aoe = TRUE,                             show_original = TRUE,                             col_core = \"#2E7D32\",                             col_halo = \"#F57C00\",                             col_original = \"#000000\",                             col_aoe = \"#9E9E9E\",                             pch = 16,                             cex = 0.8,                             main = NULL,                             ...) {    # Filter to support if specified   if (!is.null(support_id)) {     x <- x[x$support_id %in% support_id, ]   }    geoms <- attr(x, \"aoe_geometries\")    # Determine plot extent   pts_bbox <- sf::st_bbox(x)    if (!is.null(geoms) && show_aoe) {     aoe_geom <- aoe_geometry(x, \"aoe\", support_id)     aoe_bbox <- sf::st_bbox(aoe_geom)     pts_bbox <- c(       xmin = min(pts_bbox[\"xmin\"], aoe_bbox[\"xmin\"]),       ymin = min(pts_bbox[\"ymin\"], aoe_bbox[\"ymin\"]),       xmax = max(pts_bbox[\"xmax\"], aoe_bbox[\"xmax\"]),       ymax = max(pts_bbox[\"ymax\"], aoe_bbox[\"ymax\"])     )   }    # Set up plot   if (is.null(main)) {     n_sup <- length(unique(x$support_id))     main <- sprintf(\"AoE: %d points, %d support%s\",                     nrow(x), n_sup, if(n_sup > 1) \"s\" else \"\")   }    plot(1, type = \"n\",        xlim = c(pts_bbox[\"xmin\"], pts_bbox[\"xmax\"]),        ylim = c(pts_bbox[\"ymin\"], pts_bbox[\"ymax\"]),        asp = 1, main = main, xlab = \"\", ylab = \"\", ...)    # Draw geometries if available   if (!is.null(geoms)) {     if (show_aoe) {       aoe_geom <- aoe_geometry(x, \"aoe\", support_id)       plot(sf::st_geometry(aoe_geom),            border = col_aoe, lty = 2, lwd = 1, add = TRUE)     }     if (show_original) {       orig_geom <- aoe_geometry(x, \"original\", support_id)       plot(sf::st_geometry(orig_geom),            border = col_original, lwd = 2, add = TRUE)     }   }    # Draw points   core_pts <- x[x$aoe_class == \"core\", ]   halo_pts <- x[x$aoe_class == \"halo\", ]    if (nrow(halo_pts) > 0) {     plot(sf::st_geometry(halo_pts),          col = col_halo, pch = pch, cex = cex, add = TRUE)   }   if (nrow(core_pts) > 0) {     plot(sf::st_geometry(core_pts),          col = col_core, pch = pch, cex = cex, add = TRUE)   }    # Legend   legend(\"topright\",          legend = c(\"Core\", \"Halo\", \"Original\", \"AoE\"),          col = c(col_core, col_halo, col_original, col_aoe),          pch = c(pch, pch, NA, NA),          lty = c(NA, NA, 1, 2),          lwd = c(NA, NA, 2, 1),          bg = \"white\",          cex = 0.8)    invisible(x) } result <- aoe(pts, supports)  # Basic plot plot(result)  # Single support plot(result, support_id = \"A\")  # Custom colors plot(result, col_core = \"blue\", col_halo = \"red\")  # Without AoE boundary plot(result, show_aoe = FALSE)"},{"path":[]},{"path":"https://gillescolling.com/areaOfEffect/IMPLEMENTATION_PLAN.html","id":"id_61-aoe_area-function","dir":"","previous_headings":"Phase 6: Area Diagnostics","what":"6.1 aoe_area() function","title":"areaOfEffect Implementation Plan","text":"File: R/aoe_area.R Example output:","code":"#' Compute Area Statistics for AoE #' #' @param x An `aoe_result` object, or support sf for standalone use #' @param mask Optional mask (if x is support sf) #' #' @return Data frame with area statistics per support #' @export aoe_area <- function(x, mask = NULL) {   if (inherits(x, \"aoe_result\")) {     # Extract from stored geometries     geoms <- attr(x, \"aoe_geometries\")     if (is.null(geoms)) {       stop(\"No geometries stored\", call. = FALSE)     }      result <- do.call(rbind, lapply(names(geoms), function(sid) {       g <- geoms[[sid]]       data.frame(         support_id = sid,         area_original = as.numeric(sf::st_area(g$original)),         area_aoe_raw = as.numeric(sf::st_area(g$aoe_raw)),         area_aoe_final = as.numeric(sf::st_area(g$aoe_final)),         stringsAsFactors = FALSE       )     }))    } else if (inherits(x, \"sf\")) {     # Compute directly from support     # ... standalone computation   }    # Derived metrics   result$expansion_ratio <- result$area_aoe_raw / result$area_original   result$area_masked <- result$area_aoe_raw - result$area_aoe_final   result$pct_masked <- 100 * result$area_masked / result$area_aoe_raw    class(result) <- c(\"aoe_area_result\", \"data.frame\")   result }  #' @export print.aoe_area_result <- function(x, ...) {   cat(\"AoE Area Statistics\\n\")   cat(\"───────────────────\\n\\n\")    # Format areas nicely (km² if large)   x_print <- x   area_cols <- c(\"area_original\", \"area_aoe_raw\", \"area_aoe_final\", \"area_masked\")    for (col in area_cols) {     if (col %in% names(x_print)) {       # Convert to km² if > 1e6 m²       vals <- x_print[[col]]       if (max(vals, na.rm = TRUE) > 1e6) {         x_print[[col]] <- sprintf(\"%.1f km²\", vals / 1e6)       } else {         x_print[[col]] <- sprintf(\"%.0f m²\", vals)       }     }   }    x_print$expansion_ratio <- sprintf(\"%.2fx\", x$expansion_ratio)   x_print$pct_masked <- sprintf(\"%.1f%%\", x$pct_masked)    print.data.frame(x_print, row.names = FALSE) } AoE Area Statistics ───────────────────   support_id area_original  area_aoe_raw area_aoe_final  area_masked expansion_ratio pct_masked           A    12340.5 km²    49362.0 km²    41205.3 km²    8156.7 km²           4.00x     16.5%           B     8921.2 km²    35684.8 km²    35684.8 km²       0.0 km²           4.00x      0.0%"},{"path":"https://gillescolling.com/areaOfEffect/IMPLEMENTATION_PLAN.html","id":"implementation-order","dir":"","previous_headings":"","what":"Implementation Order","title":"areaOfEffect Implementation Plan","text":"Recommended order: 1 → 2 → 3 → 4 → 6 → 5 Phase 1 foundational. Phases 2-3-4-6 can done order Phase 1. Phase 5 depends Phase 4 geometry access.","code":""},{"path":"https://gillescolling.com/areaOfEffect/IMPLEMENTATION_PLAN.html","id":"file-structure-after-implementation","dir":"","previous_headings":"","what":"File Structure After Implementation","title":"areaOfEffect Implementation Plan","text":"","code":"R/ ├── aoe.R              # Main function (modified) ├── aoe_class.R        # S3 class, print, summary, plot methods ├── aoe_geometry.R     # aoe_geometry() extractor ├── aoe_area.R         # aoe_area() diagnostics └── aoe_summary.R      # Standalone summary (kept for backwards compat)"},{"path":"https://gillescolling.com/areaOfEffect/IMPLEMENTATION_PLAN.html","id":"backwards-compatibility","dir":"","previous_headings":"","what":"Backwards Compatibility","title":"areaOfEffect Implementation Plan","text":"aoe() still returns sf-compatible object existing code using result$aoe_class, result$support_id continues work aoe_summary() remains available standalone function New functionality additive","code":""},{"path":"https://gillescolling.com/areaOfEffect/IMPLEMENTATION_PLAN.html","id":"testing-requirements","dir":"","previous_headings":"","what":"Testing Requirements","title":"areaOfEffect Implementation Plan","text":"phase requires tests : 1. Basic functionality 2. Edge cases (empty results, single support, many supports) 3. S3 method dispatch 4. Attribute preservation subsetting","code":""},{"path":"https://gillescolling.com/areaOfEffect/IMPLEMENTATION_PLAN.html","id":"documentation-updates","dir":"","previous_headings":"","what":"Documentation Updates","title":"areaOfEffect Implementation Plan","text":"Update aoe.Rd new return structure Add aoe_geometry.Rd Add aoe_area.Rd Update vignettes plot examples Add “Working Results” vignette","code":""},{"path":"https://gillescolling.com/areaOfEffect/index.html","id":"areaofeffect","dir":"","previous_headings":"","what":"Spatial Support at Scale","title":"Spatial Support at Scale","text":"Spatial Support Scale areaOfEffect package formalizes spatial support scale. Given set points one support polygons, aoe() classifies points “core” (inside original support) “halo” (inside area effect outside original support), pruning points outside.","code":""},{"path":"https://gillescolling.com/areaOfEffect/index.html","id":"concept","dir":"","previous_headings":"","what":"Concept","title":"Spatial Support at Scale","text":"Political borders hard ecological boundaries. Biological processes stop administrative lines. sampling within political region, observations near border influenced conditions outside region. area effect (AoE) corrects border truncation expanding support outward centroid. Points classified: Core: inside original support Halo: outside original support inside expanded area effect Pruned: outside area effect (returned) default, AoE expands give equal core halo areas. arbitrary—’s unique scale inside outside contribute equally. Sea boundaries treated differently political borders: hard boundaries. optional mask can provided enforce constraints.","code":""},{"path":"https://gillescolling.com/areaOfEffect/index.html","id":"why-equal-area","dir":"","previous_headings":"","what":"Why Equal Area?","title":"Spatial Support at Scale","text":"default scale (sqrt(2) - 1 ≈ 0.414) produces equal core halo areas. emerges simple principle: without domain knowledge, outside matter much inside. tuned parameter. ’s unique solution “core equals halo”: formula derived, chosen. removes degree freedom analyst replaces principled geometric constraint.","code":"(1 + s)² - 1 = 1  →  s = √2 - 1"},{"path":"https://gillescolling.com/areaOfEffect/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Spatial Support at Scale","text":"","code":"# Install from GitHub # install.packages(\"pak\") pak::pak(\"gcol33/areaOfEffect\")"},{"path":[]},{"path":"https://gillescolling.com/areaOfEffect/index.html","id":"single-support","dir":"","previous_headings":"Usage","what":"Single Support","title":"Spatial Support at Scale","text":"","code":"library(areaOfEffect) library(sf)  # Create example support polygon (e.g., a country or region) support <- st_as_sf(   data.frame(id = 1),   geometry = st_sfc(st_polygon(list(     cbind(c(0, 100, 100, 0, 0), c(0, 0, 100, 100, 0))   ))),   crs = 32631 )  # Create observation points pts <- st_as_sf(   data.frame(id = 1:4),   geometry = st_sfc(     st_point(c(50, 50)),   # core (center)     st_point(c(10, 10)),   # core (inside)     st_point(c(150, 50)),  # halo (outside original, inside AoE)     st_point(c(300, 300))  # outside (will be pruned)   ),   crs = 32631 )  # Apply area of effect result <- aoe(pts, support)  # View classification result$aoe_class #> [1] \"core\" \"core\" \"halo\""},{"path":"https://gillescolling.com/areaOfEffect/index.html","id":"multiple-supports-parallel-processing","dir":"","previous_headings":"Usage","what":"Multiple Supports (Parallel Processing)","title":"Spatial Support at Scale","text":"multiple supports provided, processed independently. Points can appear multiple times fall within multiple AoEs.","code":"# Two adjacent admin regions supports <- st_as_sf(   data.frame(region = c(\"A\", \"B\")),   geometry = st_sfc(     st_polygon(list(cbind(c(0, 50, 50, 0, 0), c(0, 0, 100, 100, 0)))),     st_polygon(list(cbind(c(50, 100, 100, 50, 50), c(0, 0, 100, 100, 0))))   ),   crs = 32631 )  # Points near the shared boundary pts <- st_as_sf(   data.frame(id = 1:3),   geometry = st_sfc(     st_point(c(25, 50)),   # inside A     st_point(c(50, 50)),   # on boundary     st_point(c(75, 50))    # inside B   ),   crs = 32631 )  result <- aoe(pts, supports) # Points may appear in both regions' output (long format)"},{"path":"https://gillescolling.com/areaOfEffect/index.html","id":"with-a-mask-eg-land-boundary","dir":"","previous_headings":"Usage","what":"With a Mask (e.g., Land Boundary)","title":"Spatial Support at Scale","text":"","code":"# Create land mask (excludes sea) land <- st_as_sf(   data.frame(id = 1),   geometry = st_sfc(st_polygon(list(     cbind(c(-50, 200, 200, -50, -50), c(0, 0, 150, 150, 0))   ))),   crs = 32631 )  # Apply with mask result <- aoe(pts, support, mask = land)"},{"path":"https://gillescolling.com/areaOfEffect/index.html","id":"diagnostic-summary","dir":"","previous_headings":"Usage","what":"Diagnostic Summary","title":"Spatial Support at Scale","text":"","code":"result <- aoe(pts, support) aoe_summary(result) #>   support_id n_total n_core n_halo prop_core prop_halo #> 1          1       3      2      1     0.667     0.333"},{"path":"https://gillescolling.com/areaOfEffect/index.html","id":"function-signature","dir":"","previous_headings":"","what":"Function Signature","title":"Spatial Support at Scale","text":"","code":"aoe(points, support, scale = sqrt(2) - 1, reference = NULL, mask = NULL)"},{"path":"https://gillescolling.com/areaOfEffect/index.html","id":"return-value","dir":"","previous_headings":"","what":"Return Value","title":"Spatial Support at Scale","text":"aoe_result object (extends sf) containing supported points, : point_id column: original point identifier support_id column: identifier support classification refers aoe_class column: \"core\" \"halo\" S3 methods: print(), summary(), plot(). Use aoe_geometry() extract polygons, aoe_area() area statistics. multiple supports provided, points may appear multiple times (per support whose AoE contains ).","code":""},{"path":"https://gillescolling.com/areaOfEffect/index.html","id":"design-principles","dir":"","previous_headings":"","what":"Design Principles","title":"Spatial Support at Scale","text":"buffer: AoE scales proportionally centroid, fixed distance Derived default: default scale geometrically determined, tuned Symmetric prior: Equal core/halo areas = bias toward inside outside Hard boundaries respected: Optional mask coastlines hard constraints Multiple supports: Process admin regions parallel long format output","code":""},{"path":"https://gillescolling.com/areaOfEffect/index.html","id":"license","dir":"","previous_headings":"","what":"License","title":"Spatial Support at Scale","text":"MIT","code":""},{"path":"https://gillescolling.com/areaOfEffect/index.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Spatial Support at Scale","text":"","code":"@software{areaOfEffect,   author = {Colling, Gilles},   title = {areaOfEffect: Spatial Support at Scale},   year = {2026},   url = {https://github.com/gcol33/areaOfEffect} }"},{"path":"https://gillescolling.com/areaOfEffect/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2026 Gilles Colling Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://gillescolling.com/areaOfEffect/reference/aoe.html","id":null,"dir":"Reference","previous_headings":"","what":"Classify and Prune Points by Area of Effect — aoe","title":"Classify and Prune Points by Area of Effect — aoe","text":"Given set points one support polygons, aoe() classifies points \"core\" (inside original support) \"halo\" (inside area effect outside original support), pruning points outside.","code":""},{"path":"https://gillescolling.com/areaOfEffect/reference/aoe.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Classify and Prune Points by Area of Effect — aoe","text":"","code":"aoe(   points,   support,   scale = sqrt(2) - 1,   reference = NULL,   mask = NULL,   coords = NULL )"},{"path":"https://gillescolling.com/areaOfEffect/reference/aoe.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Classify and Prune Points by Area of Effect — aoe","text":"points sf object POINT geometries. support sf object POLYGON MULTIPOLYGON geometries. row defines separate support region. multiple rows provided, points classified support independently, returning long format output point may appear multiple times. scale Numeric scale factor (default sqrt(2) - 1, approximately 0.414). multiplier applied distances reference point 1 + scale. Common values: sqrt(2) - 1 (default): equal core/halo areas, ratio 1:1 1: equal linear distance inside/outside, area ratio 1:3 reference Optional sf object single POINT geometry. NULL (default), centroid support used. valid support single row. mask Optional sf object POLYGON MULTIPOLYGON geometry. provided, area effect intersected mask (e.g., land boundary exclude sea). coords Column names coordinates points data.frame, e.g. c(\"lon\", \"lat\"). NULL, auto-detects common names.","code":""},{"path":"https://gillescolling.com/areaOfEffect/reference/aoe.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Classify and Prune Points by Area of Effect — aoe","text":"aoe_result object (extends sf) containing supported points, columns: point_id Original point identifier (row name index) support_id Identifier support classification refers aoe_class Classification: \"core\" \"halo\" multiple supports provided, points may appear multiple times (per support whose AoE contains ). result S3 methods print(), summary(), plot(). Use aoe_geometry() extract AoE polygons.","code":""},{"path":"https://gillescolling.com/areaOfEffect/reference/aoe.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Classify and Prune Points by Area of Effect — aoe","text":"area effect computed scaling support outward centroid. default, scale sqrt(2) - 1 (~0.414), produces equal core halo areas. means AoE twice area original support, split evenly core (inside) halo (outside). transformation applies: $$p' = r + (1 + s)(p - r)$$ \\(r\\) reference point (centroid), \\(p\\) vertex support boundary, \\(s\\) scale factor. scale \\(s\\), area multiplier \\((1 + s)^2\\): Scale 1: multiplier 2, area 4x original, halo:core = 3:1 Scale 0.414: multiplier ~1.414, area 2x original, halo:core = 1:1 Points exactly original support boundary classified \"core\". support geometry validated internally using sf::st_make_valid().","code":""},{"path":"https://gillescolling.com/areaOfEffect/reference/aoe.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Classify and Prune Points by Area of Effect — aoe","text":"","code":"library(sf)  # Single support support <- st_as_sf(   data.frame(id = 1),   geometry = st_sfc(st_polygon(list(     cbind(c(0, 10, 10, 0, 0), c(0, 0, 10, 10, 0))   ))),   crs = 32631 )  pts <- st_as_sf(   data.frame(id = 1:4),   geometry = st_sfc(     st_point(c(5, 5)),     st_point(c(2, 2)),     st_point(c(15, 5)),     st_point(c(30, 30))   ),   crs = 32631 )  result <- aoe(pts, support)  # Multiple supports (e.g., admin regions) supports <- st_as_sf(   data.frame(region = c(\"A\", \"B\")),   geometry = st_sfc(     st_polygon(list(cbind(c(0, 10, 10, 0, 0), c(0, 0, 10, 10, 0)))),     st_polygon(list(cbind(c(8, 18, 18, 8, 8), c(0, 0, 10, 10, 0))))   ),   crs = 32631 )  result <- aoe(pts, supports) # Points near the boundary may appear in both regions' AoE"},{"path":"https://gillescolling.com/areaOfEffect/reference/aoe_area.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute Area Statistics for AoE — aoe_area","title":"Compute Area Statistics for AoE — aoe_area","text":"Calculate area statistics original supports areas effect, including expansion ratios, masking effects, core/halo balance.","code":""},{"path":"https://gillescolling.com/areaOfEffect/reference/aoe_area.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute Area Statistics for AoE — aoe_area","text":"","code":"aoe_area(x)"},{"path":"https://gillescolling.com/areaOfEffect/reference/aoe_area.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute Area Statistics for AoE — aoe_area","text":"x aoe_result object returned aoe().","code":""},{"path":"https://gillescolling.com/areaOfEffect/reference/aoe_area.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute Area Statistics for AoE — aoe_area","text":"aoe_area_result data frame one row per support: support_id Support identifier area_core Area core region (original support) area_halo Area halo region (AoE minus core, masking) area_aoe Total AoE area masking halo_core_ratio Ratio halo core area (theoretically 3.0 without mask) pct_masked Percentage theoretical AoE area removed masking","code":""},{"path":"https://gillescolling.com/areaOfEffect/reference/aoe_area.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Compute Area Statistics for AoE — aoe_area","text":"scale \\(s\\), AoE expands multiplier \\((1+s)\\) centroid, resulting \\((1+s)^2\\) times area. theoretical halo:core ratio \\((1+s)^2 - 1\\): Scale 1 (default): ratio 3.0 (core 1 part, halo 3 parts) Scale 0.414: ratio 1.0 (equal areas) Masking reduces halo (thus ratio) AoE extends beyond hard boundaries.","code":""},{"path":"https://gillescolling.com/areaOfEffect/reference/aoe_area.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Compute Area Statistics for AoE — aoe_area","text":"","code":"library(sf)  support <- st_as_sf(   data.frame(id = 1),   geometry = st_sfc(st_polygon(list(     cbind(c(0, 10, 10, 0, 0), c(0, 0, 10, 10, 0))   ))),   crs = 32631 )  pts <- st_as_sf(   data.frame(id = 1:3),   geometry = st_sfc(     st_point(c(5, 5)),     st_point(c(15, 5)),     st_point(c(2, 2))   ),   crs = 32631 )  result <- aoe(pts, support) aoe_area(result)"},{"path":"https://gillescolling.com/areaOfEffect/reference/aoe_geometry.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract AoE Geometries — aoe_geometry","title":"Extract AoE Geometries — aoe_geometry","text":"Extract original support polygons /area effect polygons aoe_result object.","code":""},{"path":"https://gillescolling.com/areaOfEffect/reference/aoe_geometry.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract AoE Geometries — aoe_geometry","text":"","code":"aoe_geometry(x, which = c(\"aoe\", \"original\", \"both\"), support_id = NULL)"},{"path":"https://gillescolling.com/areaOfEffect/reference/aoe_geometry.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract AoE Geometries — aoe_geometry","text":"x aoe_result object returned aoe(). geometry extract: \"aoe\" (default), \"original\", \"\". support_id Optional character numeric vector specifying support(s) extract. NULL (default), extracts .","code":""},{"path":"https://gillescolling.com/areaOfEffect/reference/aoe_geometry.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract AoE Geometries — aoe_geometry","text":"sf object polygon geometries columns: support_id Support identifier type \"original\" \"aoe\"","code":""},{"path":"https://gillescolling.com/areaOfEffect/reference/aoe_geometry.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Extract AoE Geometries — aoe_geometry","text":"","code":"library(sf)  support <- st_as_sf(   data.frame(region = c(\"A\", \"B\")),   geometry = st_sfc(     st_polygon(list(cbind(c(0, 10, 10, 0, 0), c(0, 0, 10, 10, 0)))),     st_polygon(list(cbind(c(15, 25, 25, 15, 15), c(0, 0, 10, 10, 0))))   ),   crs = 32631 )  pts <- st_as_sf(   data.frame(id = 1:4),   geometry = st_sfc(     st_point(c(5, 5)),     st_point(c(12, 5)),     st_point(c(20, 5)),     st_point(c(27, 5))   ),   crs = 32631 )  result <- aoe(pts, support)  # Get AoE polygons aoe_polys <- aoe_geometry(result, \"aoe\")  # Get both original and AoE for comparison both <- aoe_geometry(result, \"both\")  # Filter to one support (uses row names as support_id) region_1 <- aoe_geometry(result, \"aoe\", support_id = \"1\")"},{"path":"https://gillescolling.com/areaOfEffect/reference/aoe_summary.html","id":null,"dir":"Reference","previous_headings":"","what":"Summarize Area of Effect Results — aoe_summary","title":"Summarize Area of Effect Results — aoe_summary","text":"Compute summary statistics AoE classification result, including counts proportions core vs halo points per support.","code":""},{"path":"https://gillescolling.com/areaOfEffect/reference/aoe_summary.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Summarize Area of Effect Results — aoe_summary","text":"","code":"aoe_summary(x)"},{"path":"https://gillescolling.com/areaOfEffect/reference/aoe_summary.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Summarize Area of Effect Results — aoe_summary","text":"x sf object returned aoe().","code":""},{"path":"https://gillescolling.com/areaOfEffect/reference/aoe_summary.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Summarize Area of Effect Results — aoe_summary","text":"data frame one row per support, containing: support_id Support identifier n_total Total number supported points n_core Number core points n_halo Number halo points prop_core Proportion points core prop_halo Proportion points halo","code":""},{"path":"https://gillescolling.com/areaOfEffect/reference/aoe_summary.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Summarize Area of Effect Results — aoe_summary","text":"","code":"library(sf)  support <- st_as_sf(   data.frame(id = 1),   geometry = st_sfc(st_polygon(list(     cbind(c(0, 10, 10, 0, 0), c(0, 0, 10, 10, 0))   ))),   crs = 32631 )  pts <- st_as_sf(   data.frame(id = 1:4),   geometry = st_sfc(     st_point(c(5, 5)),     st_point(c(2, 2)),     st_point(c(15, 5)),     st_point(c(12, 5))   ),   crs = 32631 )  result <- aoe(pts, support) aoe_summary(result)"},{"path":"https://gillescolling.com/areaOfEffect/reference/countries.html","id":null,"dir":"Reference","previous_headings":"","what":"World Country Polygons with Pre-calculated AoE Bounds — countries","title":"World Country Polygons with Pre-calculated AoE Bounds — countries","text":"sf object containing country polygons Natural Earth (1:50m scale) pre-calculated bounding boxes area effect analysis.","code":""},{"path":"https://gillescolling.com/areaOfEffect/reference/countries.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"World Country Polygons with Pre-calculated AoE Bounds — countries","text":"","code":"countries"},{"path":"https://gillescolling.com/areaOfEffect/reference/countries.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"World Country Polygons with Pre-calculated AoE Bounds — countries","text":"sf data frame 237 rows 8 variables: iso2 ISO 3166-1 alpha-2 country code (e.g., \"FR\", \"\") iso3 ISO 3166-1 alpha-3 country code (e.g., \"FRA\", \"BEL\") name Country name continent Continent name bbox Original bounding box (xmin, ymin, xmax, ymax) Mollweide bbox_equal_area AoE bounding box scale sqrt(2)-1 (equal areas) bbox_equal_ray AoE bounding box scale 1 (equal linear distance) geometry Country polygon WGS84 (EPSG:4326)","code":""},{"path":"https://gillescolling.com/areaOfEffect/reference/countries.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"World Country Polygons with Pre-calculated AoE Bounds — countries","text":"Natural Earth https://www.naturalearthdata.com/","code":""},{"path":"https://gillescolling.com/areaOfEffect/reference/countries.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"World Country Polygons with Pre-calculated AoE Bounds — countries","text":"","code":"# Get France france <- countries[countries$iso3 == \"FRA\", ]  # Use directly with aoe()"},{"path":"https://gillescolling.com/areaOfEffect/reference/get_country.html","id":null,"dir":"Reference","previous_headings":"","what":"Get Country Polygon by Name or ISO Code — get_country","title":"Get Country Polygon by Name or ISO Code — get_country","text":"Quick accessor country polygons bundled dataset.","code":""},{"path":"https://gillescolling.com/areaOfEffect/reference/get_country.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get Country Polygon by Name or ISO Code — get_country","text":"","code":"get_country(x)"},{"path":"https://gillescolling.com/areaOfEffect/reference/get_country.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get Country Polygon by Name or ISO Code — get_country","text":"x Country name, ISO2 code, ISO3 code (case-insensitive)","code":""},{"path":"https://gillescolling.com/areaOfEffect/reference/get_country.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get Country Polygon by Name or ISO Code — get_country","text":"sf object country polygon, error found.","code":""},{"path":"https://gillescolling.com/areaOfEffect/reference/get_country.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get Country Polygon by Name or ISO Code — get_country","text":"","code":"get_country(\"Belgium\") get_country(\"BE\") get_country(\"BEL\")"},{"path":"https://gillescolling.com/areaOfEffect/reference/plot.aoe_result.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot method for aoe_result — plot.aoe_result","title":"Plot method for aoe_result — plot.aoe_result","text":"Visualize AoE classification result, showing points colored class optionally support AoE boundaries.","code":""},{"path":"https://gillescolling.com/areaOfEffect/reference/plot.aoe_result.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot method for aoe_result — plot.aoe_result","text":"","code":"# S3 method for class 'aoe_result' plot(   x,   support_id = NULL,   show_aoe = TRUE,   show_original = TRUE,   col_core = \"#2E7D32\",   col_halo = \"#F57C00\",   col_original = \"#000000\",   col_aoe = \"#9E9E9E\",   pch = 16,   cex = 0.8,   main = NULL,   ... )"},{"path":"https://gillescolling.com/areaOfEffect/reference/plot.aoe_result.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot method for aoe_result — plot.aoe_result","text":"x aoe_result object support_id Optional: filter specific support(s) show_aoe Logical; show AoE boundary (default TRUE) show_original Logical; show original support boundary (default TRUE) col_core Color core points (default \"#2E7D32\", green) col_halo Color halo points (default \"#F57C00\", orange) col_original Color original support boundary (default \"#000000\") col_aoe Color AoE boundary (default \"#9E9E9E\") pch Point character (default 16) cex Point size (default 0.8) main Plot title (default auto-generated) ... Additional arguments passed plot","code":""},{"path":"https://gillescolling.com/areaOfEffect/reference/plot.aoe_result.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot method for aoe_result — plot.aoe_result","text":"Invisibly returns x","code":""},{"path":"https://gillescolling.com/areaOfEffect/reference/plot.aoe_result.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot method for aoe_result — plot.aoe_result","text":"","code":"library(sf)  support <- st_as_sf(   data.frame(id = 1),   geometry = st_sfc(st_polygon(list(     cbind(c(0, 10, 10, 0, 0), c(0, 0, 10, 10, 0))   ))),   crs = 32631 )  set.seed(42) pts <- st_as_sf(   data.frame(id = 1:50),   geometry = st_sfc(lapply(1:50, function(i) {     st_point(c(runif(1, -5, 15), runif(1, -5, 15)))   })),   crs = 32631 )  result <- aoe(pts, support) plot(result)"},{"path":"https://gillescolling.com/areaOfEffect/reference/print.aoe_area_result.html","id":null,"dir":"Reference","previous_headings":"","what":"Print method for aoe_area_result — print.aoe_area_result","title":"Print method for aoe_area_result — print.aoe_area_result","text":"Print method aoe_area_result","code":""},{"path":"https://gillescolling.com/areaOfEffect/reference/print.aoe_area_result.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Print method for aoe_area_result — print.aoe_area_result","text":"","code":"# S3 method for class 'aoe_area_result' print(x, ...)"},{"path":"https://gillescolling.com/areaOfEffect/reference/print.aoe_area_result.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Print method for aoe_area_result — print.aoe_area_result","text":"x aoe_area_result object ... Additional arguments (ignored)","code":""},{"path":"https://gillescolling.com/areaOfEffect/reference/print.aoe_area_result.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Print method for aoe_area_result — print.aoe_area_result","text":"Invisibly returns x","code":""},{"path":"https://gillescolling.com/areaOfEffect/reference/print.aoe_result.html","id":null,"dir":"Reference","previous_headings":"","what":"Print method for aoe_result — print.aoe_result","title":"Print method for aoe_result — print.aoe_result","text":"Print method aoe_result","code":""},{"path":"https://gillescolling.com/areaOfEffect/reference/print.aoe_result.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Print method for aoe_result — print.aoe_result","text":"","code":"# S3 method for class 'aoe_result' print(x, ...)"},{"path":"https://gillescolling.com/areaOfEffect/reference/print.aoe_result.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Print method for aoe_result — print.aoe_result","text":"x aoe_result object ... Additional arguments passed print.sf","code":""},{"path":"https://gillescolling.com/areaOfEffect/reference/print.aoe_result.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Print method for aoe_result — print.aoe_result","text":"Invisibly returns x","code":""},{"path":"https://gillescolling.com/areaOfEffect/reference/print.aoe_summary_result.html","id":null,"dir":"Reference","previous_headings":"","what":"Print method for aoe_summary_result — print.aoe_summary_result","title":"Print method for aoe_summary_result — print.aoe_summary_result","text":"Print method aoe_summary_result","code":""},{"path":"https://gillescolling.com/areaOfEffect/reference/print.aoe_summary_result.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Print method for aoe_summary_result — print.aoe_summary_result","text":"","code":"# S3 method for class 'aoe_summary_result' print(x, ...)"},{"path":"https://gillescolling.com/areaOfEffect/reference/print.aoe_summary_result.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Print method for aoe_summary_result — print.aoe_summary_result","text":"x aoe_summary_result object ... Additional arguments (ignored)","code":""},{"path":"https://gillescolling.com/areaOfEffect/reference/print.aoe_summary_result.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Print method for aoe_summary_result — print.aoe_summary_result","text":"Invisibly returns x","code":""},{"path":"https://gillescolling.com/areaOfEffect/reference/sub-.aoe_result.html","id":null,"dir":"Reference","previous_headings":"","what":"Subset method for aoe_result — [.aoe_result","title":"Subset method for aoe_result — [.aoe_result","text":"Preserves aoe_result attributes subsetting.","code":""},{"path":"https://gillescolling.com/areaOfEffect/reference/sub-.aoe_result.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Subset method for aoe_result — [.aoe_result","text":"","code":"# S3 method for class 'aoe_result' x[i, ...]"},{"path":"https://gillescolling.com/areaOfEffect/reference/sub-.aoe_result.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Subset method for aoe_result — [.aoe_result","text":"x aoe_result object Row indices ... Additional arguments passed sf subsetting","code":""},{"path":"https://gillescolling.com/areaOfEffect/reference/sub-.aoe_result.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Subset method for aoe_result — [.aoe_result","text":"aoe_result object (sf support_id removed)","code":""},{"path":"https://gillescolling.com/areaOfEffect/reference/summary.aoe_result.html","id":null,"dir":"Reference","previous_headings":"","what":"Summary method for aoe_result — summary.aoe_result","title":"Summary method for aoe_result — summary.aoe_result","text":"Summary method aoe_result","code":""},{"path":"https://gillescolling.com/areaOfEffect/reference/summary.aoe_result.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Summary method for aoe_result — summary.aoe_result","text":"","code":"# S3 method for class 'aoe_result' summary(object, ...)"},{"path":"https://gillescolling.com/areaOfEffect/reference/summary.aoe_result.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Summary method for aoe_result — summary.aoe_result","text":"object aoe_result object ... Additional arguments (ignored)","code":""},{"path":"https://gillescolling.com/areaOfEffect/reference/summary.aoe_result.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Summary method for aoe_result — summary.aoe_result","text":"aoe_summary_result object","code":""},{"path":"https://gillescolling.com/areaOfEffect/news/index.html","id":"areaofeffect-010","dir":"Changelog","previous_headings":"","what":"areaOfEffect 0.1.0","title":"areaOfEffect 0.1.0","text":"Initial CRAN release. ## Core Functionality aoe() classifies points “core” (inside support) “halo” (inside scaled area effect outside original support), pruning points outside Default scale sqrt(2) - 1 produces equal core halo areas - geometrically derived default requiring parameter tuning Multiple supports processed independently long format output Optional mask argument hard boundaries (coastlines, etc.)","code":""},{"path":"https://gillescolling.com/areaOfEffect/news/index.html","id":"s3-class-system-0-1-0","dir":"Changelog","previous_headings":"","what":"S3 Class System","title":"areaOfEffect 0.1.0","text":"aoe_result class extending sf specialized methods print() method showing point counts, supports, scale info summary() method returning area statistics plot() method visualizing points support/AoE boundaries","code":""},{"path":"https://gillescolling.com/areaOfEffect/news/index.html","id":"helper-functions-0-1-0","dir":"Changelog","previous_headings":"","what":"Helper Functions","title":"areaOfEffect 0.1.0","text":"aoe_summary() counts proportions per support aoe_geometry() extract original AoE polygon geometries aoe_area() area statistics including halo:core ratio masking effects","code":""}]
